\documentclass[a4paper]{article}

\def\npart{II}

\def\ntitle{Number Fields}
\def\nlecturer{J.\ Thorne}

\def\nterm{Lent}
\def\nyear{2018}

\input{header}

\renewcommand*{\O}{\mathcal{O}}
\DeclareMathOperator{\n}{N}
\DeclareMathOperator{\disc}{disc}

\makeindex

\begin{document}

\input{titlepage}

\tableofcontents

\setcounter{section}{-1}

\section{Motivation}

Recall the following example from IB Groups, Rings and Modules:

\begin{theorem}
  Let \(p\) be an odd prime, then \(p = a^2 + b^2\) if and only if \(p = 1 \pmod 4\).
\end{theorem}

\begin{proof}
  If \(p = a^2 + b^2\) then \(p = 0, 1 \text{ or } 2 \pmod 4\) so this condition is necessary.

  Suppose instead \(p = 1 \pmod 4\), then \(\binom{-1}{p} = 1\) so there exists \(a \in \Z\) such that \(a^2 = 1 \pmod p\), or \(p \divides a^2 + 1\). We can factor \(a^2 + 1 = (a + i)(a - i) \in \Z[i]\). We know from IB Groups, Rings and Modules that \(\Z[i]\) is a UFD. As \(p \divides (a + i)(a - i)\), if \(p\) is irreducible in \(\Z[i]\)  then \(p \divides a + i\) or \(p \divides a - i\). Thus \(p \in \Z[i]\) is reducible so \(p = z_1z_2\) with \(z_1z_2 \in \Z[i]\). If \(z_1 = A + Bi\) where \(A, B \in \Z\) then \(A^2 + B^2 = p\).
\end{proof}

\begin{notation}
  If \(R \subseteq S\) are rings and \(\alpha \in S\) then
  \[
    R[\alpha] = \left\{ \sum{i = 0}^n a_i\alpha^i \in s: a_i \in R \right\}
  \]
  which is the smallest subring of \(S\) containing both \(R\) and \(\alpha\).
\end{notation}

Another example is given \(p\) an odd prime, does the equation
\[
  x^p + y^p = z^p
\]
have solutions such that \(x, y, z \in \Z, xyz \neq 0\)?

\begin{theorem}[Kummer, 1850]
  If \(\Z[e^{2\pi i/p}]\) is a UFD then there are no solutions.
\end{theorem}

The strategy is to factor
\[
  x^p + y^p = \prod_{j = 0}^{p - 1} (x + e^{2\pi ij/p}j) \in \Z[e^{2\pi i/p}].
\]
We now know that \(\Z[e^{2\pi i/p}]\) is a UFD if and only if \(p \leq 19\), so unfortunately this does not lead us very far. Instead, we have the more power theorem

\begin{theorem}[Kummer, 1850]
  If \(p\) is a \emph{regular} prime then there are no solutions.
\end{theorem}

We will define regular prime later in this course. This theorem is more powerful that the previous one. To give an idea, if \(p < 100\) then \(p\) is regular if and only if \(p \neq 37, 59, 67\).

Given a number field, this course studies the ring of integers. In the end of the course we will come back to Kummer's theorem.

\section{Ring of integers}

Recall that a field extension \(L/K\) is an inclusion \(K \subseteq L\) of fields. The degree of \(L/K\) is
\[
  [L:K] = \dim_K L.
\]
We say \(L/K\) is finite if \([L:K] < \infty\).

\begin{definition}[Number field]\index{number field}
  A \emph{number field} is a finite extension \(L/\Q\).
\end{definition}

Here are two ways to construct number fields:
\begin{enumerate}
\item Let \(\alpha \in \C\) be an algebraic number. Then \(L = \Q(\alpha)\) is a number field.
\item Let \(K\) be a number field \(K\) and \(f(x) \in K[x]\) be irreducible. Then \(L = K[x]/(f(x))\) is a number field. Recall Tower Law from IID Galois Theory:
  \[
    [L:\Q] = [L:K][K:\Q] < \infty.
  \]
\end{enumerate}
Note that the first one comes with an embedding in \(\C\), but the second one doesn't (and in general there are more than one).

\begin{definition}[Algebraic integer]\index{algebraic integer}\leavevmode
  \begin{enumerate}
  \item Let \(L/K\) be a field extension. We say \(\alpha \in L\) is \emph{algebraic} over \(K\) if there exists a monic polynomial \(f(x) \in K[x]\) such that \(f(\alpha) = 0\).
  \item Let \(L/\Q\) be a field extension. We say \(\alpha \in L\) is an \emph{algebraic integer} if there exists a monic polynomial \(f(x) \in \Z[x]\) such that \(f(\alpha) = 0\).
  \end{enumerate}
\end{definition}

\begin{definition}[Minimal polynomial]\index{minimal polynomial}
  Let \(L/K\) be a field extension and let \(\alpha \in L\) be an algebraic over \(K\). We call the \emph{minimal polynomial} of \(\alpha\) over \(K\) the monic polynomial \(f_\alpha(x) \in K[x]\) of the least degree such that \(f_\alpha(\alpha) = 0\).
\end{definition}

Note that \(f_\alpha(x)\) is well-defined: firstly there exists some monic \(f(x) \in K[x]\) such that \(f(\alpha) = 0\) since \(\alpha\) is algebraic. If \(f_\alpha(x), f_\alpha'(x) \in K[x]\) both satisfy the definition of minimal plynomial then we apply the polynomial division algorithm to write
\[
  f_\alpha(x) = q(x)f_\alpha'(x) + r(x)
\]
where \(p(x), r(x) \in K[x]\) and \(\deg r < \deg f_\alpha'\). Evaluate at \(\alpha\), we get
\[
  0 = f_\alpha(\alpha) = p(\alpha)f_\alpha'(\alpha) + r(\alpha) = r(\alpha)
\]
so by minimality of \(\deg f_\alpha'\), \(r = 0\). Then \(\deg f_\alpha = \deg f_\alpha'\) and they are both monic so \(p = 1\). \(f_\alpha = f_\alpha'\).

\begin{lemma}
  Let \(L/\Q\) be a field extension and let \(\alpha \in L\) to be an algebraic integer. Then
  \begin{enumerate}
  \item the minimal polynomial \(f_\alpha(x)\) of \(\alpha\) over \(\Q\) lies in \(\Z[x]\);
  \item if \(g(x) \in \Z[x]\) satisfies \(g(\alpha) = 0\) then there exists \(q(x) \in \Z[x]\) such that \(g(x) = f_\alpha(x)q(x)\);
  \item the kernel of the ring homomorphism
    \begin{align*}
      \Z[x] &\to L \\
      f(x) &\mapsto f(\alpha)
    \end{align*}
    equals to \((f_\alpha(x))\).
  \end{enumerate}
\end{lemma}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item Recall from IB Groups, Rings and Modules that given \(f(x) = \sum_{i = 0}^n a_ix^i \in \Z[x]\), we define the content to be
    \[
      c(f) = \gcd(a_n, \dots, a_0).
    \]
    Gauss' Lemma says that if \(f(x), g(x) \in \Z[x]\) then \(c(fg) = c(f)c(g)\).

    Since \(\alpha \in L\) is an algebraic integer, there exists a monic \(f(x) \in \Z[x]\) such that \(f(\alpha) = 0\). Thus \(c(f) = 1\). Apply polynomial division in \(\Q[x]\) to get
    \[
      f(x) = p(x)f_\alpha(x) + r(x)
    \]
    where \(p(x), r(x) \in \Q[x]\). Same as before, we must have \(r(x) = 0\) so \(f(x) = p(x)f_\alpha(x)\). Now choose integers \(n, m \geq 1\) such that \(np(x) \in \Z[x], c(np) = 1\) and \(mf_\alpha(x) \in \Z[x], c(mf_\alpha) = 1\). Then
    \[
      nmf(x) = np(x) \cdot mf_\alpha(x).
    \]
    Take contents,
    \[
      nm = c(nmf(x)) = c(np \cdot mf_\alpha) = c(np)c(mf_\alpha) = 1.
    \]
    Thus \(n = m = 1\) so \(f_\alpha(x) \in \Z[x]\).
  \item This is similar to the previous one. Let \(g(x) \in \Z[x]\) be such that \(g(\alpha) = 0\). wlog \(g(x) \neq 0\) and \(c(g) = 1\). We deduce \(g(x) = q(x)f_\alpha(x)\) where \(q(x) \in \Q[x]\). Choose \(k \geq 1\) such that \(kq(x) \in \Z[x]\) and \(c(kq) = 1\). Then
    \[
      k = c(kg) = c(kq \cdot f_\alpha) = c(kq) c(f_\alpha) = 1
    \]
    so \(q(x) \in \Z[x]\).
  \item Reformulation of (2).
  \end{enumerate}
\end{proof}

\begin{corollary}
  If \(a \in \Q\), then \(\alpha\) is an algebraic integer if and only if \(\alpha \in \Z\).
\end{corollary}

\begin{proof}
  By the above lemma, \(\alpha\) is an algebraic integer if and only if \(f_\alpha(x) \in \Z[x]\). If \(\alpha \in \Q\) then \(f_\alpha(x) = x - \alpha\).
\end{proof}

\begin{notation}
  If \(L/\Q\) is a field extension, we write
  \[
    \O_L = \{\alpha \in L: \alpha \text{ is an algebraic integer}\}.
  \]
\end{notation}

\begin{proposition}
  If \(L/\Q\) is a field extension, \(\O_L\) is a ring.
\end{proposition}

\begin{proof}
  \(0, 1 \in \O_L\). If \(\alpha \in \O_L\) then
  \[
    f_{-\alpha}(x) = (-1)^{\deg f_\alpha} f_\alpha(-x)
  \]
  so \(-\alpha \in \O_L\). Easy. Now given \(\alpha, \beta \in \O_L\), we need to show \(\alpha + \beta, \alpha\beta \in \O_L\). First notice the following characterisation of algebraic integers: if \(\alpha \in \O_L\) then \(\Z[\alpha] \subseteq L\) is a finitely generated \(\Z\)-module: by definition, \(\Z[\alpha]\) is generated by \(1, \alpha, \alpha^2, \dots\). Let
  \[
    f_\alpha(x) = x^d + a_1x^{d - 1} + \dots + a_d \in \Z[x],
  \]
  then
  \[
    \alpha^d = -(a_1\alpha^{d - 1} + \dots + a_d) \in \sum_{i = 0}^{d - 1} \Z \alpha^i.
  \]
  Thus by induction, \(\alpha^n \in \sum_{i = 0}^{d - 1}\Z \alpha^i\) for all \(n \geq d\).

  Now take \(\alpha, \beta \in \O_L\) and let \(d = \deg f_\alpha, e = \deg f_\beta\). By definition, \(\Z[\alpha, \beta] = \Z[\alpha][\beta]\) is generated as an \(\Z\)-module by \(\{\alpha^i\beta^j\}_{i, j \in \N_0}\). The same argument shows that in fact the ring is generated as a \(\Z\)-module by \(\{\alpha^i\beta^j\}_{0 \leq i < d, 0 \leq j < e}\). Now use classification of finitely generated \(\Z\)-modules, there is an isomorphism
  \[
    \Z[\alpha, \beta] \cong \Z^r \oplus T
  \]
  for some \(r \geq 1\) and finite abelian group \(T\). In fact \(T = 0\): if \(\gamma \in T\) then \(|T|\gamma = 0\) by Lagrange's Theorem. But \(\Z[\alpha, \beta] \subseteq L\), a \(\Q\)-vector space, so this forces \(\gamma = 0\). We can therefore fix an isomorphism
  \[
    \Z[\alpha, \beta] \cong \Z^r
  \]
  for some \(r \geq 1\). Now there is a \(\Z\)-module endomorphism
  \begin{align}
    m_{\alpha\beta}: \Z[\alpha, \beta] &\to \Z[\alpha, \beta] \\
    \gamma &\mapsto \alpha\beta\gamma
  \end{align}
  \(m_{\alpha\beta}\) can be represented by an \(r \times r\) matrix \(A_{\alpha\beta} \in \matrixring_{r \times r}(\Z)\). Let
  \[
    F_{\alpha\beta}(x) = \det(x \cdot I_r - A_{\alpha\beta}) \in \Z[x]
  \]
  be the characteristic polynomial. Then by Cayley-Hamilton Theorem,
  \[
    F_{\alpha\beta}(m_{\alpha\beta}) = 0.
  \]
  Write
  \[
    F_{\alpha\beta}(x) = x^r + b_1x^{r - 1} + \dots + b_r \in \Z[x]
  \]
  so
  \[
    m_{\alpha\beta}^r + b_1m_{\alpha\beta}^{r - 1} + \dots + b_r \cdot \id = 0.
  \]
  Apply the above endomorphism to \(1 \in \Z[\alpha, \beta]\), we get
  \[
    (\alpha\beta)^r + b_1(\alpha\beta)^{r - 1} + \dots + b_r = F_{\alpha\beta}(\alpha\beta) = 0
  \]
  so \((\alpha\beta)^r \in \O_L\).

  The argument to show \(\alpha + \beta \in \O_L\) is identical, replacing \(m_{\alpha\beta}\) by
  \begin{align*}
    m_{\alpha + \beta}: \Z[\alpha, \beta] &\to \Z[\alpha, \beta] \\
    \gamma &\mapsto (\alpha + \beta)\gamma
  \end{align*}
\end{proof}

\begin{definition}[Ring of integers]\index{ring of integers}
  \(\O_L\) is the \emph{ring of algebraic integers} of \(L\).
\end{definition}

\begin{lemma}
  Let \(L/\Q\) be a number field and let \(\alpha \in L\). Then there exists \(n \in \Z, n \geq 1\) such that \(n \alpha \in \O_L\).
\end{lemma}

\begin{proof}
  Let \(f(x) \in \Q[x]\) be a monic polynomial such that \(f(\alpha) = 0\). Then there exists \(n \in \Z, n \geq 1\) such that \(g(x) = n^{\deg f} f(x/n) \in \Z[x]\) is monic. Then
  \[
    g(n\alpha) = n^{\deg f} f(\alpha) = 0
  \]
  so \(n\alpha \in \O_L\).
\end{proof}

\section{Complex Embeddings}

Let \(L\) be a number field.

\begin{definition}[Complex embedding]\index{complex embedding}
  A \emph{complex embedding} of \(L\) is a field homomorphism
  \[
    \sigma: L \to \C.
  \]
\end{definition}

\begin{note}
  In this case \(\sigma\) is injective and \(\sigma|_\Q\) is the unique embedding \(\Q \to \C\).
\end{note}

\begin{proposition}
  Let \(L/K\) be an extension of number fields, and let \(\sigma_0: K \to \C\) be a complex embedding. Then there exist exactly \([L:K]\) embeddings \(\sigma: L \to \C\) such that \(\sigma|_K = \sigma_0\).
\end{proposition}

\begin{proof}
  By induction on \([L:K]\). If \([L:K] = 1\) then \(L = K\).

  In general, choose \(\alpha \in L \setminus K\) and consider \(L/K(\alpha)/K\). By the Tower Law
  \[
    [L:K] = [L:K(\alpha)][K(\alpha):K]
  \]
  and \([K(\alpha):K] > 1\). By induction, it suffices to show that there are exactly \([K(\alpha):K]\) embeddings \(\sigma: K(\alpha) \to \C\) extending \(\sigma_0\). Let \(f_\alpha(x) \in K[x]\) be the minimal polynomial of \(\alpha\) over \(K\). Notice that there is an isomorphism of fields
  \begin{align*}
    K[x]/(f_\alpha(x)) &\to K(\alpha) \\
    x &\mapsto \alpha
  \end{align*}
  To get a complex embedding \(\sigma: K(\alpha) \to \C\) extending \(\sigma_0\), it's equivalent to give a root \(\beta\) of \((\sigma_0f_\alpha)(x)\) in \(\C\). We have
  \[
    [K(\alpha):K] = \deg f_\alpha = \deg \sigma_0f_\alpha
  \]
  so it suffices to show that \(\sigma_0f_\alpha\) has distinct roots in \(\C\). The polynomial \(f_\alpha(x) \in K[x]\) is irreducible so is prime to its derivative \(f_\alpha'(x)\). We can therefore find \(A(x), B(x) \in K[x]\) such that
  \[
    Af_\alpha + Bf_\alpha' = 1.
  \]
  Hence
  \[
    (\sigma_0 A)(\sigma_0f_\alpha) + (\sigma_0B)(\sigma_0f_\alpha') = 1.
  \]
  Hence if \(\beta \in \C\) and \((\sigma_0f_\alpha)(\beta) = 0\), \((\sigma_0f_\alpha')(\beta) \neq 0\).
\end{proof}

\begin{notation}
  If \(\sigma: L \to \C\) is a complex embedding, then \(\conj \sigma\) is also a complex embedding where \(\conj \sigma(\alpha) = \conj{\sigma(\alpha)}\). In the other words, complex conjugation is an automorphism of \(\C\) and we can post-compose it with any field embedding.

  If \(\sigma = \conj \sigma\) then \(\sigma(L) \subseteq \R\). Otherwise \(\sigma \neq \conj \sigma\) and \(\sigma(L)\) is not contained in \(\R\). We write \(r\) for the number of complex embeddings \(\sigma\) such that \(\sigma = \conj \sigma\) and \(s\) for the number of pairs of embeddings \(\{\sigma, \conj \sigma\}\) where \(\sigma \neq \conj \sigma\). It then follows that
  \[
    r + 2s = [L:\Q].
  \]
\end{notation}

\begin{eg}[Quadratic field]\index{quadratic field}
  Let \(d \in \Z\) be square-free and \(d \neq 0, 1\). Let\
  \[
    \Q(\sqrt d) = \Q[x]/(x^2 - d).
  \]
  If \(d > 0\) then \(r = 2, s = 0\), which we call real quadratic field. If \(d < 0\) then \(r = 0, s = 1\), which we call imaginary quadratic field.
\end{eg}

\begin{eg}
  Let \(m \in \Z\) be cube-free and \(m \neq -1, 0, 1\). Let
  \[
    \Q(\sqrt[3]{m}) = \Q[x]/(x^3 - m).
  \]
  Then \(r = 1, s = 1\).
\end{eg}

\begin{definition}[Trace \& norm]\index{trace}\index{norm}
  Let \(L/K\) be a extension of number fields and let \(\alpha \in L\). Let \(m_\alpha\) be the \(K\)-linear map
  \begin{align*}
    m_\alpha: L &\to L \\
    \beta &\mapsto \alpha\beta
  \end{align*}
  Then we define the \emph{trace} of \(\alpha\) to be
  \[
    \tr_{L/K}(\alpha) = \tr m_\alpha \in K
  \]
  and the \emph{norm} of \(\alpha\) to be
  \[
    \n_{L/K}(\alpha) = \det m_\alpha \in K.
  \]
\end{definition}

\begin{lemma}
  If \(L/K\) is an extension of number fields and \(\alpha \in L\), then
  \begin{enumerate}
  \item \(\tr_{L/K}(\alpha) = [L:K(\alpha)] \tr_{K(\alpha)/K}(\alpha)\).
  \item \(\n_{L/K}(\alpha) = \n_{K(\alpha)/K}(\alpha)^{[L:K(\alpha)]}\).
  \end{enumerate}
\end{lemma}

\begin{proof}
  There is an isomorphism \(L \cong K(\alpha)^{[L:K(\alpha)]}\) of \(K(\alpha)\)-vector spaces.
\end{proof}

\begin{lemma}
  Let \(L/K\) be an extension of number fields and let \(\alpha \in L\). Let \(\sigma_0: K \to \C\) be a complex embedding and \(\sigma_1, \dots, \sigma_n: L \to \C\) be complex embeddings extending \(\sigma_0\). Then
  \begin{align*}
    \sigma_0(\tr_{L/K}(\alpha)) &= \sum_{i = i}^n \sigma_i(\alpha) \\
    \sigma_0(\n_{L/K}(\alpha)) &= \prod_{i = 1}^n \sigma_i(\alpha)
  \end{align*}
\end{lemma}

\begin{proof}
  wlog \(L = K(\alpha)\). Let \(f_\alpha(x) \in K[x]\) be the minimal polynomial of \(\alpha\) over \(K\). Recall that
  \[
    (\sigma_0f_\alpha)(x) = \prod_{i = 1}^n (x - \sigma_i(\alpha)).
  \]
  Write \(f_\alpha(x) = x^n + a_1x^{n - 1} + \dots + a_n\). Then
  \begin{align*}
    \sigma_0(a_1) &= - \sum_{i = 1}^n \sigma_i(\alpha) \\
    \sigma_0(a_n) &= (-1)^n \prod_{i = 1}^n \sigma_i(\alpha)
  \end{align*}
  Let \(g(x) \in K[x]\) be the characteristic polynomial of \(m_\alpha\). If \(g(x) = x^n + b_1x^{n - 1} + \dots + b_n\) then
  \begin{align*}
    b_1 &= -\tr m_\alpha = -\tr_{L/K}(\alpha) \\
    b_n &= (-1)^n\det m_\alpha = (-1)^n \n_{L/K}(\alpha)
  \end{align*}
  so done if we can show \(f_\alpha(x) = g(x)\). By Cayley-Hamilton, \(g(m_\alpha) = 0\) so \(g(\alpha) = 0\). Thus \(f_\alpha(x) = g(x)\).
\end{proof}

\begin{corollary}
  If \(\alpha \in \O_L\) then \(\tr_{L/K}(\alpha), \n_{L/K}(\alpha) \in \O_L\).
\end{corollary}

\begin{proof}
  We have the following characterisation of ring of integers: if \(\beta \in L\) then \(\beta \in \O_L\) if and only if \(\sigma_0(\beta) \in \O_\C\) as for all \(f(x) \in \Z[x]\), \(f(\beta) = 0\) if and only if \(f(\sigma_0(\beta)) = 0\).

  By the lemma, \(\sigma_0 \tr_{L/K}(\alpha) = \sigma_1(\alpha) + \dots + \sigma_n(\alpha)\). If \(\alpha \in \O_L\) then \(\sigma_i(\alpha) \in \O_\C\) for all \(i\). But \(\O_\C\) is a ring so \(\sigma_0 \tr_{L/K}(\alpha) \in \O_\C\). Thus \(\tr_{L/K}(\alpha) \in \O_L\). Similar for norm.
\end{proof}

\begin{proposition}[Classification of ring of integers of quadratic fields]
  Let \(d \in \Z\) be square-free and \(d \neq 0, 1\). Let \(L = \Q(\sqrt d)\). Then
  \[
    \O_L =
    \begin{cases}
      \Z[\sqrt d] & \text{if } d = 2, 3 \pmod 4 \\
      \Z[\frac{1 + \sqrt d}{2}] & \text{if } d = 1 \pmod 4
    \end{cases}
  \]
\end{proposition}

\begin{proof}
  We have a nice characterisation of algebraic integers in the case of quadratic fields: if \(\alpha \in L\), then \(\alpha \in \O_L\) if and only if \(\tr_{L/\Q}(\alpha), \n_{L/\Q}(\alpha) \in \Z\). (Why?)

  Let \(\alpha \in L\). Write \(\alpha = \frac{u}{2} + \frac{v}{2}\sqrt d\) where \(u, v \in \Q\). If \(\alpha \in \O_L\) then
  \begin{align*}
    \tr_{L/\Q}(\alpha) &= u \in \Z \\
    \n_{L/\Q}(\alpha) &= \frac{1}{4}(u + v\sqrt d)(u - v\sqrt d) = \frac{1}{4}(u^2 - dv^2) \in \Z
  \end{align*}
  so \(u^2 - dv^2 \in 4\Z\), \(dv^2 \in \Z\). Write \(v = \frac{r}{s}\) where \(r, s \in \Z\) and are coprime. Then \(dr^2 \in s^2\Z\) so \(s^2 \divides dr^2\). If \(p\) is a prime and \(p \divides s\) then \(p^2 \divides d\). But this is absurd as \(d\) is square-free. Thus \(v \in \Z\).

  We have shown that if \(\alpha \in \O_L\) then \(\alpha = \frac{u}{2} + \frac{v}{2}\sqrt d\) where \(u, v \in \Z\) and \(u^2 = dv^2 \pmod 4\). Split into cases:
  \begin{enumerate}
  \item \(d = 2, 3 \pmod 4\): \(u^2 = 0, 1 \pmod 4, v^2 = 0, 1 \pmod 4\). Consider the congruence \(u^2 =dv^2 \pmod 4\) shows that both \(u, v \in 2\Z\). Hence \(\alpha \in \Z[\sqrt d]\). Thus \(\O_L = \Z[\sqrt d]\).
  \item \(d = 1 \pmod 4\): \(u^2 = v^2 \pmod 4\) so \(u = v \pmod 2\). Hence
    \[
      \O_L \subseteq \left\{ \frac{u}{2} + \frac{v}{2}\sqrt d: u, v \in \Z, u = v \pmod 2 \right\} \cong \Z\oplus\Z\cdot \left(\frac{1 + \sqrt d}{2} \right).
    \]
    It thus remains to show that \(\frac{1 + \sqrt d}{2}\) is an algebraic integer. But we know
    \begin{align*}
      \tr_{L/\Q} \frac{1 + \sqrt d}{2} &= 1 \\
      \n_{L/\Q} \frac{1 + \sqrt d}{2} &= \frac{1 - d}{4} \in \Z
    \end{align*}
    so done.
  \end{enumerate}
\end{proof}

Recall that if \(R\) is a ring, then a \emph{unit} in \(R\) is an element \(u \in R\) such that there exists \(v \in R\) such that \(uv = 1\). The set
\[
  R^\times = \{u \in R: u \text{ is a unit}\}
\]
form a group under multiplication.

\begin{lemma}
  If \(L\) is a number field then
  \[
    \O_L^\times = \{\alpha \in \O_L: \n_{L/\Q}(\alpha) = \pm 1\}.
  \]
\end{lemma}

\begin{remark}
  We'll prove later in the course that \(\O_L^\times\) is a finite group if and only if \(L = \Q\) or \(L\) is an imaginary quadratic field.
\end{remark}

\begin{proof}
  Norm is multiplicative so
  \[
    \n_{L/\Q}(\alpha\beta) = \n_{L/\Q}(\alpha)\n_{L/\Q}(\beta)
  \]
  for all \(\alpha, \beta \in L\). If \(\alpha \in \O_L^\times\) then there exists \(\beta \in \O_L\) such that \(\alpha\beta = 1\). Thus \(\n_{L/\Q}(\alpha)\n_{L/\Q}(\beta) = 1\). As they are both integers,
  \[
    \n_{L/\Q}(\alpha) \in \Z^\times = \{\pm 1\}.
  \]

  Conversely, suppose \(\alpha \in \O_L\) and \(\n_{L/\Q}(\alpha) = \pm 1\). Then \(\alpha^{-1} \in L\). Let \(\sigma_1, \dots, \sigma_n: L \to \C\) be distinct complex embeddings of \(L\). Then
  \[
    \n_{L/\Q}(\alpha) = \prod_{i = 1}^n \sigma_i(\alpha) = \pm 1
  \]
  so
  \[
    \sigma_1(\alpha^{-1}) = \pm \prod_{i = 2}^n \sigma_i(\alpha) \in \O_\C
  \]
  so \(\alpha^{-1} \in \O_L\).
\end{proof}

\section{Discriminants and integral bases}

Let \(L\) be a number field, \(n = [L:\Q]\) and \(\sigma_1, \dots, \sigma_n: L \to \C\) be distinct complex embeddings of \(L\).

\begin{definition}[Discriminant]\index{discriminant}
  Let \(\alpha_1, \dots, \alpha_n \in L\). Then their \emph{discriminant} is
  \[
    \disc(\alpha_1, \dots, \alpha_n) = \det D^2
  \]
  where \(D \in \matrixring_{n \times n}(\C)\) is \(D_{ij} = \sigma_i(\alpha_j)\).
\end{definition}

\begin{note}
  This is independent of the choice of ordering of \(\sigma_i\)'s and \(\alpha_j\)'s, as changing them amounts to permuting the rows and columns, which change \(\det D\) by a sign.
\end{note}

\begin{lemma}
  Let \(\alpha_1, \dots, \alpha_n \in L\). Then
  \[
    \disc(\alpha_1, \dots, \alpha_n) = \det T
  \]
  where \(T \in \matrixring_{n \times n}(\Q)\) is \(T_{ij} = \tr_{L/\Q}(\alpha_i\alpha_j)\).
\end{lemma}

\begin{proof}
  \[
    T_{ij}
    = \sum_{k = 1}^n \sigma_k(\alpha_i\alpha_j)
    = \sum_{k = 1}^n D_{ki}D_{kj}
    = (D^TD)_{ij}
  \]
\end{proof}

\begin{corollary}
  \(\disc(\alpha_1, \dots, \alpha_n) \in \Q\) and if further \(\alpha_1, \dots, \alpha_n \in \O_L\) then \(\disc(\alpha_1, \dots, \alpha_n) \in \Z\).
\end{corollary}

\begin{proof}
  \(\disc(\alpha_1, \dots, \alpha_n) = \det T \in \Q\).

  If \(\alpha_i\)'s are in \(\O_L\), then \(D_{ij} \in \O_\C\) for all \(i, j\). As \(\det\) is a polynomial, \(\disc(\alpha_1, \dots, \alpha_n) \in \O_\C \cap \Q = \Z\).
\end{proof}

\begin{proposition}
  Let \(\alpha_1, \dots, \alpha_n \in L\). Then \(\disc(\alpha_1, \dots, \alpha_n) \neq 0\) if and only if \(\alpha_i\)'s form a \(\Q\)-basis of \(L\).
\end{proposition}

\begin{proof}
  Suppose \(\alpha_i\)'s do not form a basis, i.e.\ they satisfy a non-trivial relation. Then the columns of the matrix \(D_{ij} = \sigma_i(\alpha_j)\) are linearly dependent so \(\disc(\alpha_1, \dots, \alpha_n) = 0\).

  Conversely, suppose \(\alpha_1, \dots, \alpha_n\) are linearly independent. Then \(\disc(\alpha_1, \dots, \alpha_n) \neq 0\) if and only if \(\det T \neq 0\), if and only if the symmetric bilinear form
  \begin{align*}
    \phi: L \times L &\to \Q \\
    (\alpha, \beta) &\mapsto \tr_{L/\Q}(\alpha\beta)
  \end{align*}
  is non-degenerate. In other words, for all \(\alpha \in L^\times\), there exists \(\beta \in L\) such that \(\varphi(\alpha, \beta) \neq 0\). But if \(\alpha \in L^\times\) then \(\phi(\alpha, \alpha^{-1}) = \tr_{L/\Q}(1) = n \neq 0\).
\end{proof}

\begin{definition}[Integral basis]\index{integral basis}
  We say \(\alpha_1, \dots, \alpha_n \in L\) form an \emph{integral basis} for \(\O_L\) if
  \begin{enumerate}
  \item \(\alpha_1, \dots, \alpha_n \in \O_L\),
  \item \(\alpha_1, \dots, \alpha_n\) generate \(\O_L\) as a \(\Z\)-module.
  \end{enumerate}
\end{definition}

\begin{lemma}
  If \(\alpha_1, \dots, \alpha_n\) form an integral basis for \(\O_L\) then the function
  \begin{align*}
    f: \Z^n &\to \O_L \\
    (m_1, \dots, m_n) &\mapsto \sum_{i = 1}^n m_i\alpha_i
  \end{align*}
  is an isomorphism of \(Z\)-modules.
\end{lemma}

\begin{proof}
  \(f\) is clearly a surjective homomorphism so remains to show it is injective. Observe that \(\alpha_1, \dots, \alpha_n\) form a \(\Q\)-basis of \(L\): we know that if \(\beta \in L\) then there exists \(N \geq 1, N \in \Z\) such that \(N\beta \in \O_L\). Write
  \[
    N\beta = \sum_{i = 1}^n m_i\alpha_i
  \]
  for some \(m_i \in \Z\). Thus \(\beta = \sum_{i = 1}^m \frac{m_1}{N} \alpha_i\). Thus \(\alpha_i\)'s span \(L\) and thus form a basis of \(L\).

  If \(f(m_1, \dots, m_n) = 0\) then \(\sum_{i = 1}^n m_i\alpha_i = 0\) so \(m_i = 0\) by linear independent of \(\alpha_i\)'s.
\end{proof}

We will soon prove that every number field has an integral basis.

\begin{lemma}[Sandwich lemma]\leavevmode
  \begin{enumerate}
  \item If \(H \leq G\) are abelian groups and \(G \cong \Z^a\) for some integer \(a \geq 0\), then \(H \cong \Z^b\) for some \(b \leq a\).
  \item If \(K \leq H \leq G\) are abelian groups and \(K \cong \Z^a, G \cong \Z^a\) for some \(a \geq 0\), then \(H \cong \Z^a\).
  \item If \(H \leq G\) are abelian groups and \(H \cong \Z^a, G \cong \Z^a\) for some \(a \geq 0\) then \(G/H\) is finite.
  \end{enumerate}
\end{lemma}

This is a generalisation of results about finite dimensional vector spaces (i.e.\ finitely generated free modules over fields) to finitely generated free \(\Z\)-modules.

\begin{proof}\leavevmode
  \begin{enumerate}
  \item \(G/H\) is a finitely generated abelian group. By the classification, \(G/H \cong \Z^n \oplus A\) where \(A\) is a finite abelian group. Choose \(p\) prime such that \(p \ndivides |A|\). Then the map
    \begin{align*}
      f: G/H &\to G/H \\
      x + H &\mapsto px + H
    \end{align*}
    is injective. Consider the map
    \begin{align*}
      f': H/pH &\to G/pG \\
      x + pH &\mapsto x + pG
    \end{align*}
    Claim this map is also injective: if \(x \in H, x \in pG\) then \(x = py\) for some \(y \in G\). Then \(y + H \in \ker f = H\). Thus \(x \in pH\).

    By classification \(H \cong \Z^b\). As \(f'\) is injective, \(|H/pH| \leq |G/pG|\), i.e.\ \(p^b \leq p^a\) so \(b \leq a\).
  \item Apply 1 to \(K \leq H\) and \(H \leq G\) to get \(H \cong \Z^b\) where \(a \leq b \leq a\) so \(a = b\).
  \item Again \(G/H\) is finitely generated so by classification \(G/H \cong \Z^N \oplus A\) where \(A\) is a finite abelian group. Let \(p\) be a prime such that \(p \ndivides |A|\). The same proof as in 1 shows that \(f': H/pH \to G/pG\) is injective. Since \(|H/pH| = |G/pG| = p^a\), \(f'\) is an isomorphism. Thus (?)
    \[
      G/H + pG \cong (\Z/p\Z)^N
    \]
    There is a surjective homomorphism \(G/pG \to G/H + pG\) which has kernel containing the image of \(f'\). Hence the map is surjective with kernel \(G/pG\). This forces \(N = 0\).
  \end{enumerate}
\end{proof}







\printindex


\iffalse
Reading

Marcus, Number Fields
secret notes: https://www.dpmms.cam.ac.uk/~jat58/nfl2018
\fi
\end{document}
