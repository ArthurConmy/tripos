\documentclass[a4paper]{article}

\def\npart{II}

\def\ntitle{Algebraic Geometry}
\def\nlecturer{I.\ Grojnowski}

\def\nterm{Lent}
\def\nyear{2019}

\input{header}

\renewcommand{\A}{\mathbb{A}}


\DeclareMathOperator{\Cl}{Cl}
\renewcommand*{\P}{\mathbb{P}}
\let\div\relax
\AtBeginDocument{DeclareMathOperator{\div}{div}}

\begin{document}

\input{titlepage}

\tableofcontents

\setcounter{section}{-1}

\section{Introduction}

Study of polynomial equations.

\begin{eg}
  \(E = \{(x, y) \in \C^2: y^2 = x^3 - x\}\). Sketch this.

  Consider \(p: E \to \C, (x, y) \mapsto x\). For each \(x \notin \{0, \pm 1\}\), there are 2 points in \(p^{-1}(x)\). So this is a double cover ramified at \(0, \pm 1\), the precise meaning of these phrases will be defined later. How does this help us sketch? For \(x\) away from the three points, the preimage of a disk under \(p\) are two copies of the disk. If \(x\) is near \(0\), we have \(x^3 - x \approx -x\) so locally it looks like \(y^2 = -x\). If we project \((x, y)\) to \(x\) we get a disk winding around twice. But if we project to \(y\) we get a bijection.

  Still, how do we visualise \(E\)? First let's sketch it over \(\R\). If \((x, y) \in \R^2\) then \(y^2 \geq 0\) so \(x(x^2 - 1) \cdot 0\). Thus \(x \geq 1\) or \(-1 \leq x \leq 0\). Just like in high school, we can differentiate. (graph) The infinite bit should be visualised as a circle minus a point.

  Now let \((x, y) \in \C^2\). Let
  \[
    \Gamma = \{(x, y) \in E: y \in \R, x \in [-1, 0] \cup [1, \infty)\} = p^{-1}\{[-1, 1] \cup [1, \infty)\}.
  \]
  Claim \(E \setminus \Gamma\) is disconnected and it consists of two pieces, each isomorphic via \(p\) to \(\C \subseteq ([-1, 0] \cup [1, \infty))\). This is equivalent to the claim that if \(x \in \C \subseteq ([-1, 0] \cup [1, \infty))\) then can choose a square root of \(x^3 - x\), and then as you wander around, this remains a single-valued functions. The proof is left as an exercise.

  Granting this, we have two copies of \(\C \subseteq ([-1, 0] \cup [1, \infty))\). Turn one of them around and glue (graph).

  More surprisingly, solutions of equaitons have a topology!
\end{eg}

\section{The dictionary between algebra and geometry}

\subsection{Basic notions}

\begin{definition}[\(k\)-algebra]\index{\(k\)-algebra}
  Let \(k\) be a field. A \emph{(commutative) \(k\)-algebra} is a unital commutative ring countaining \(k\) as a subring.
\end{definition}

\begin{eg}
  \(k[x_1, \dots, x_n]\), the polynomial ring in \(n\)-variables.
\end{eg}

\begin{notation}
  If \(k\) is a fields, write \(\A^n = \A^n(k) = k^n\), the \emph{affine \(n\)-space}\index{affine space}.
\end{notation}

Observe that every \(f \in k[x_1, \dots, x_n]\) defines a function
\begin{align*}
  \A^n(k) &\to \A^1(k) \\
  (p_1, \dots, p_n) &\mapsto f(p_1, \dots, p_n) = \operatorname{ev}_p(f)
\end{align*}

This defines a map from \(k[x_1, \dots, x_n]\) to the space of all functions \(\A^n \to \A^1\). If \(k\) is finite then it is surjective but not injective, and if \(k\) is infinite then it is not surjective.

More generally, if \(L \supseteq k\) is an algebraic extension then one can define a function \(\A^n(L) \to \A^1(L)\) by evaluating \(f\) at a point in \(L^n\). Therefore \(f\) defines a function \(\A^n(\cl k) \to \A^1(\cl k)\) where \(\cl k\) is the algebraic closure of \(k\). So now the map \(k[x_1, \dots, x_n] \to \{\A^n(\cl k) \to \A^1(\cl k)\}\) is injective for all \(k\) but never surjective.

The conclusion is that we should think of \(k[x_1, \dots, x_n]\) as very special functions \(\cl k^n \to \cl k\), namely ``polynomial with \(k\)-coefficients''. As a concrete example, let \(k = \F_q\). Then \(x^q - x\) defines a function \(\cl k \to \cl k\) that is \emph{not} zero.

\begin{definition}[algebraic set]
  Let \(S \subseteq k[x_1, \dots, x_n]\). Define
  \[
    Z(S) = \{p \in \A^p: f(p) = 0 \text{ for all } f \in S\} \subseteq \A^n
  \]
  which are the simultaneous zeros of equations in \(S\). Such a subset is known as \emph{algebraic set}, \emph{Zariski closed subset of \(\A^n\)}.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(\A^n = Z(0)\).
  \item \(Z(x) = \{0\}\). Similarly \(Z(x - 7) = \{7\}\).
  \item If \(f(x) = (x - \lambda_1) \dots (x - \lambda_n)\) then \(Z(f) = \{\lambda_1, \dots, \lambda_n\}\).
  \item if \(k = \cl k\) then algebraic subsets of \(\A^1\) are \(\emptyset, \A^1\) or finite set of points of \(k\).
  \item In \(\A^2\), \(Z(y^2 - x^3 + x) = E\) which we sketched in introduction.
  \item In \(\A^2\), \(Z(x, y) = \{(0, 0)\}\), \(Z(xy)\) is the union of two axes. \(Z(y)\) is the \(x\)-axis and \(Z(y(y - 1), x(y - 1))\) is the union of a point and a line
  \end{enumerate}
\end{eg}

If \(J\) is the ideal generated by \(S\), i.e.
\[
  J = \left\{\sum a_i f_i: a_i \in k[x_1, \dots, x_n], f_i \in S\right\}
\]
then \(Z(J) = Z(S)\).

Recall from IB Groups, Rings and Modules

\begin{theorem}[Hilbert basis theorem]
  If \(k\) is Noetherian then so is \(k[x]\).
\end{theorem}

%Natural numbers to the power of \(0\) is a notherian poset under dictionary order. Amazing!

So every ideal in \(k[x_1, \dots, x_n]\) is finitely generated. Therfore there exist \(f_1, \dots, f_r \in k[x_1, \dots, x_n]\) such that
\[
  Z(S) = Z(f_1, \dots, f_r).
\]
Thus algebraic sets are solutions of finitely many polynomial equations.

\begin{lemma}\leavevmode
  \begin{enumerate}
  \item If \(I \subseteq J\) then \(Z(J) \subseteq Z(I)\).
  \item \(Z(0) = \A^n\) and \(Z(k[x_1, \dots, x_n]) = \emptyset\).
  \item \(Z(\bigcup J_i) = Z(\sum J_i) = \bigcap Z(J_i)\) for any (possibly infinite) family of ideals \(\{J_i\}\).
  \item \(Z(I \cap J) = Z(I) \cup Z(J)\) for ideals \(I, J\).
  \end{enumerate}
\end{lemma}

\begin{proof}
  1, 2, 3 are clear. For 4, \(\subseteq\) follows from 1. For \(\supseteq\), if \(x \notin Z(I)\) then exists \(f_1 \in I\) with \(f_1(x) \neq 0\) and if \(x \notin Z(J)\) then exists \(f_2 \in J\) with \(f_2(x) \neq 0\). Thus \(f_1f_2(x) = f_1(x)f_2(x) \neq 0\) so \(x \notin Z(f_1f_2)\). But \(f_1f_2 \in I \cap J\) as \(I\) and \(J\) are ideals. Thus \(x \notin Z(I \cap J)\).
\end{proof}

We can define a map goes the other direction. If \(Z \subseteq \A^n(\cl k)\) is a subset, define
\[
  I(Z) = \{f \in k[x_1, \dots, x_n]: f(p) = 0 \text{ for all } p \in Z\}.
\]

If \(f \in I(Z), g \in k[x_1, \dots, x_n]\), \(fg(p) = f(p)g(p) = 0\) if \(p \in Z\) so \(I(Z)\) is an ideal.

\begin{lemma}\leavevmode
  \begin{enumerate}
  \item If \(Z \subseteq Z'\) then \(I(Z') \subseteq I(Z)\).
  \item For any \(Y \subseteq \A^n\), \(Y \subseteq Z(I(Y))\).
  \item If \(V = Z(J)\) is an algebraic subset then \(V = Z(I(V))\).
  \item If \(J \subseteq k[x_1, \dots, x_n]\) is an ideal then \(J \subseteq I(Z(J))\).
  \end{enumerate}
\end{lemma}

\begin{proof}
  1, 2 and 4 are immediate. For 3, \(\supseteq\) follows from \(I(V) = I(Z(J) \supseteq J\) by 4 so \(Z(I(V)) \subseteq Z(J) = V\) by 1. \(\subseteq\) follows from 2.
\end{proof}

The first lemma says that algebraic subsets of \(\A^n\) form the closed sets of a topology on \(\A^n\). This is called the \emph{Zariski topology}\index{Zariski topology}.

\begin{eg}
  If \(X = \A^1(k)\) where \(k = \cl k\), the closed subsets are finite subsets of points of \(\A^1\).

  Note that if \(k = \C\), if \(Z \subseteq \A^n(k)\) is Zariski closed then it is closed in the usual sense.
\end{eg}

The second lemma says that \(Z(I(Y))\) is the smallest algebraic subset of \(\A^n\) containing \(Y\), i.e.\ the closure of \(Y\) in the Zariski topology.

\begin{eg}
  If \(k = \C\) and \(\Z \subseteq \C\) then \(Z(I(\Z)) = \C\) as if a polynomial vanishes at \(\Z\) then it must be zero.
\end{eg}

We have a correspondence
\[
  \begin{tikzcd}
    \{\text{algebraic subsets of } \A^n\} \ar[r, "I", shift left] & \{\text{ideals in } k[x_1, \dots, x_n]\} \ar[l, "Z", shift left]
  \end{tikzcd}
\]
Note that this is not quite a bijection. For example in \(k[x]\),
\[
  Z(x) = Z(x^2) = Z(x^3) = \cdots
\]
and more generally
\[
  Z(f_1^{q_1} \cdots f_r^{g_r}) = Z(f_1 \cdots f_r)
\]
where \(q_i > 0\). We will fix this shortly.

\subsection{Hilbert's Nullstellensatz}

Let \(Y \subseteq \A^n\) be an algebraic subset so \(Y = Z(I(Y))\). Recall that we have a map \(k[x_1, \dots, x_n] \to \{\cl k^n \to \cl k\}\). Hence by restriction we have a map \(k[x_1, \dots, x_n] \to \{Y \to \cl k\}\) as \(Y \subseteq \cl k^n\). By definition \(I(Y) \mapsto 0\). This motivates us to make the following definition:

\begin{definition}
  Let \(k[Y] = k[x_1, \dots, x_n]/I(Y)\).
\end{definition}

We've just seen \(k[y] \embed \{Y \to \cl k\}\) so \(k[Y]\) is a special class of functions on \(Y\), namely ``polynomial functions on \(Y\) with \(k\)-coefficients''.

\begin{eg}
  \(k[\A^n] = k[x_1, \dots, x_n]\).

  \(k[E] = k[x, y]/(y^2 - x^3 + x)\).
\end{eg}

Clearly \(k[Y]\) is a \(k\)-algebra. Our aim is to recover \(Y\) completely from the the \(k\)-algebra \(k[Y]\).

Observe that if \(p \in Y \subseteq \A^n(k)\) then the map
\begin{align*}
  k[Y] &\to k \\
  f &\mapsto f(p)
\end{align*}
is an algebra homomorphism. It is surjective and its kernel, denoted
\[
  \mathfrak m_p = \{f \in k[Y]: f(p) = 0\},
\]
is a maximal ideal, as \(k[Y]/\mathfrak m_p\) is a field. So
\[
  \{\text{points in } Y\} \embed \{\text{algebra homomorphism } k[Y] \to k\} \embed \{\text{max ideals } \mathfrak m \subseteq k[Y]\}.
\]
It is remarkable that if \(k = \cl k\) then all of these coincides (the second equality is not so amazing as it is more or less a statement about field extension).

We ask: what are the maximal ideals of \(k[x_1, \dots, x_n]\)? We've observed if \(p \in k^n\) then \(\{f \in k[x_1, \dots, x_n]: f(p) = 0\}\) is a maximal ideal.

Not all maximal ideals are of the form \(\mathfrak m_p\), however. For example if \(k = \R\) then \((x^2 + 1) \subseteq \R[x]\) is a maximal ideal as \(\R[x]/(x^2 + 1) \cong \C\). Nevertheless, notice that \(\R \subseteq \C\) and this is an extension of \(\R\).

\begin{theorem}[Nullstellensatz]\index{Nullstellensatz}\leavevmode
  \begin{enumerate}
  \item If \(\mathfrak m \subseteq k[x_1, \dots, x_n]\) is a maximal ideal then \(k[x_1, \dots, x_n]/\mathfrak m = L\) is an algebraic field extension of \(k\), hence finite-dimensional over \(k\).
  \end{enumerate}
\end{theorem}
















\iffalse

\section{Algebraic curves}

\begin{eg}
  \(E^0 = \{y^2 = (x - \lambda_1)(x - \lambda_2)(x - \lambda_3)\}, \lambda_1\lambda_2\lambda_3 \neq 0, \lambda_i \neq \lambda_j\) for \(i \neq j\). Let \(E = \cl{E^0} \subseteq \P^2\). The closure is
  \[
    y^2t = (x - \lambda_1z)(x - \lambda_2z)(x - \lambda_3z).
  \]
  Each point on the other chart when \(z = 0\). Unique extra point \(x = z = 0, y \neq 0\), \(P_\infty = [0:1:0]\). We will compute \(L(nP_\infty)\). To begin, let's compute \(\div(x), div(y)\).
  \begin{align*}
    x &= 0 \text{ when } y = \pm \sqrt{-\lambda_1\lambda_2\lambda_3} = \pm c \\
    x &= \infty \text{ at } P_\infty
  \end{align*}
  At \(y = \pm c, \frac{\p f}{\p y} (0, \pm c) \neq 0\) so \(x\) is a local parameter so
  \[
    \div(x) = [0: c: 1] + [0: -c: 1] + n_\infty P_\infty.
  \]
  Let \(\deg \div(x) = 0\), so \(n_\infty = -2\). Similarly,
  \[
    \div(y) = \sum_{i = 1}^3 [\lambda_i: 0: -1] - 3 P_\infty.
  \]
  Hence \(x \in L(2 P_\infty), y \in L(3 P_\infty)\).

  Example \(xy \in L(5P_\infty)\), Claim \(L(P_\infty) = k\). Granting claim, get \(\dim L(nP_\infty) \leq n\) for \(n \geq 1\) by proposition v. But
  \begin{align*}
    1, x &\in L(2P_\infty) \\
    1, x, y &\in L(3P_\infty) \\
    1, x, y, x^2 &\in L(4P_\infty) \\
    1, x, y, x^2, xy &\in L(5P_\infty)
  \end{align*}
  Claim that these are linearly independent, so \(\dim L(nP_\infty) = n\) for \(n \leq 5\): this is obvious in \(k(x) \supseteq L(nP_\infty)\).
  \[
    1, x, y, x^2, xy, x^3, y^2 \in L(6P_\infty)
  \]
  but these are not linearly independent by our general result, or more importantly, \(y^2 = (x - \lambda_1)(x - \lambda_2)(x - \lambda_3)\) is the linear relation between them.
  \begin{ex}\leavevmode
    \begin{enumerate}
    \item Show that \(xx^i, x^iy\) are linearly independent and hence
    \item \(\dim L(nP_\infty) = n\) for all \(n \geq 1\).
    \end{enumerate}
  \end{ex}

  Observe how this compares with \(\P^1\), when \(\dim L(nP) = n + 1\) for \(n \geq 0\).

  Proof of claim that \(L(P_\infty) = k\): if not, \(L(P_\infty) = k + kt\) for some \(t \in k(E)\), then
  \[
    t^n \in L(nP_\infty) \setminus L((n - 1)P_\infty)
  \]
  so \(1, t, \dots, t^n \in L(nP_\infty)\) and are linearly independent so must be a basis (as \(\dim L(nP_\infty) \leq n + 1\)). But \(x \in L(2P_\infty), y \in L(3P_\infty)\), so \(x = a't^2 + b't + c = (at + b)^2 + d\) by completing the square if \(\ch k \neq 2\). Replace \(t\) with \(at + b\), so \(x = t^2 + d\) and \(y = g_3(t)\) for some cubic polynomial in \(t\). But that
  \[
    g_3(t)^2 = \prod_{i = 1}^3 (t^2 - (\lambda_i - d)).
  \]
  Now \(\lambda_i\)'s are distinct, so \(\lambda_i - d\) are distinct, so RHS is not a square in \(k[t]\), absurd.
\end{eg}

Given \(D \in \div X\) where \(X\) is a smooth projective curve, \(\ell(D) = \dim L(D) \geq 1\), put \(m = \ell (D) - 1\). Choose a basis \(f_0, \dots, f_m\) of \(L(D)\). Get a rational map \(\alpha_D = [f_0: \dots: f_n], X \to \P^m = \P(L(D)^*)\). As \(X\) is a smooth projective curve, \(\alpha_D\) extends to a morphism \(\alpha_D: X \to \P^m\). Notice that if \(D' = D + \div(g)\), \(f_0g, \dots, f_mg\) is a basis of \(L(D')\) but
\[
  [f_0g: \dots: f_mg] = [f_0: \dots: f_m]
\]
so \(\alpha_D: X \to \P^m = \P(L(D)^*)\) equals to \(\alpha_{D'}: X \to \P^m = \P(L(D')^*)\), i.e.\ the map only depends on the class of \(D\) in \(\Cl(X)\).

\begin{eg}
  \(X = \P^1, D = n(\alpha), \ell(D) = n + 1\). Choose a basis \(1, t, \dots, t^n\) of \(L(n(\infty))\), then
  \[
    \alpha_D(t) = [1:t: \dots: t^n]: \P^1 \to \P^n.
  \]
  i.e.
  \[
    \alpha_D[x_0: x_1] = [1: \frac{x_1}{x_0}: \dots: \frac{x_1^n}{x_0^n}] = [x_0^n: x_0^{n - 1}x_1: \dots: x_1^n].
  \]
\end{eg}

\begin{definition}[Embedding]\index{embedding}
  An \emph{embedding} is a morphism \(\alpha: X \to Y\) with the property that \(X\) is isomorphic to \(\alpha(X)\) via \(\alpha\).
\end{definition}

\begin{ex}\leavevmode
  \begin{enumerate}
  \item Show that the above \(\alpha_{n(\infty)}: \P^1 \to \P^n\) is an embedding.
  \item Show that the morphism
    \begin{align*}
      alpha: \P^1 &\to \P^2 \\
      t &\mapsto [1: t^2: t^3]
    \end{align*}
    is injective but \emph{not} an embedding.
  \end{enumerate}
\end{ex}

\begin{ex}
  Let \(X = E\) be elliptical curve, \(D = nP_\infty\). Show
  \begin{align*}
    \alpha_{P_\infty}: E &\to \P^0 \\
    \alpha_{2P_\infty}: E &\to \P^1 \\
    (x, y) &\mapsto x \\
    \alpha_{3P_\infty}: E &\to P^2 \\
    (x, y) &\mapsto (x, y)
  \end{align*}

  basis of \(L(2P_\infty)\) \(1, x\), basis of \(L(3P_\infty)\) \(1, x, y\).
  
  Notice that \(\alpha_{3P_\infty}\)  is an embedding \(E \subseteq \R^2\) but \(\alpha_{2P_\infty}, \alpha_{P_\infty}\) are not.
\end{ex}

\begin{theorem}[Embedding criteria]
  \(\alpha_D: X \to \P^m\) is an embedding if and only if for all \(p, q \in X\), \(\ell(D - p - q) = \ell(D) - 2\). When this happens, \(X\) is a curve in \(\P^m\) of degree \(\deg D\).
\end{theorem}

We have not yet defined the degree of a curve \(X \subseteq \P^m\). Suppose \(X \subseteq \P V, \dim V = m + 1\), \(X\) smooth. Let \(H \subseteq \P V\) be a hyperplane and suppose \(X \nsubseteq H\). Then \(X \cap H\) is a closed subvariety of \(X\), so a finite set of points, and we define
\[
  [X \cap H] \in \div X
\]
to be these points ``counted with multiplicity''. Define \(\deg X\) ot be \(\deg [X \cap H]\) which will depend on \(X \subseteq \P^m\) but no other choices.

\begin{eg}
  Let \(H = \{x_0 = 0\}\) for some linear function \(x_0 \in V^*\). If \(p \in X \cap H\), want to define \(v_p(x_0)\). But \(x_0 \in k(X)\). Pick \(x_1 \in V^*\) wit \(x_1(p) \neq 0\). Now \(\frac{x_0}{x_1} \in k(X)\). Then \(v_p(\frac{x_0}{x_1}\) makes sense, and
  \[
    v_p(\frac{x_0}{x_1'}) = v_p(\frac{x_0}{x_1}) + v_p(\frac{x_1}{x_1'}).
  \]
  If \(x_1'\) is another function in \(V^*\) with \(x_1'(p) \neq 0\) but then the last term is \(0\). So define
  \[
    n_p = v_p(\frac{x_0}{x_1})
  \]
  which is independent of choice of \(x_1\).
\end{eg}

\begin{definition}
  Let \([H \cap X] = \sum_{p \in H \cap X} n_pP \in \div (X), [H \cap X] \geq 0\). Define
  \[
    \deg X = \deg [H \cap X].
  \]
\end{definition}

If we pick \(H' = \{x_0' = 0\}, X \nsubseteq H'\).
\[
  v_p(\frac{x_0}{x_1'}) = v_p(\frac{x_0}{x_1}) + v_p(\frac{x_1}{x_1'})
\]
so \([H \cap X] = [H' \cap X] + \div (\frac{x_0}{x_0'})\), i.e.\ \([H \cap X] = [H' \cap X]\) are equal in \(\Cl(X)\).

\begin{lemma}
  Let \(X = Z(F) \subseteq \P^2\) where \(F\) is a homogeneous polynomial of degree \(d\), then
  \[
    \deg Z(F) = \deg F.
  \]
\end{lemma}
\fi


\printindex
\end{document}