\documentclass[a4paper]{article}

\def\npart{II}

\def\ntitle{Linear Analysis}
\def\nlecturer{R.\ Bauerschmidt}

\def\nterm{Michaelmas}
\def\nyear{2018}

\input{header}

\newtheorem*{fact}{Fact}

\newcommand{\K}{{\mathbb{K}}} % field
\DeclareMathOperator{\spans}{span} % span in a vector space

\begin{document}

\input{titlepage}

\tableofcontents

\section{Normed spaces and linear operators}

Unless stated, vector spaces are real or complex, and \(\K\) stands for \(\R\) or \(\C\).

\subsection{Normed vector spaces}

\begin{definition}[normed space]\index{normed space}
  A \emph{normed vector space} \((X, \norm{\cdot})\) is a vector space \(X\) with a norm \(\norm{\cdot}: X \to \R, x \mapsto \norm x\) satisfying
  \begin{enumerate}
  \item positive-definite: \(\norm x \geq 0\) for all \(x \in X\) and \(\norm x = 0\) if and only if \(x = 0\),
  \item positive homogeneity: \(\norm{\lambda x} = |\lambda| \norm x\) for all \(\lambda \in K\) and \(x \in X\),
  \item triangle inequality: \(\norm{x + y} \leq \norm x + \norm y\) for all \(x, y \in X\).
  \end{enumerate}
\end{definition}

In particular, every norm induces a \emph{metric} by \(d(x, y) = \norm{x - y}\).

\begin{fact}
Vector space operations and the norm are continuous maps, i.e.\ the following maps
\begin{align*}
  \K \times X &\to X \\
  (\lambda, x) &\mapsto \lambda x \\
  X \times X &\to X \\
  (x, y) &\mapsto x + y \\
  X &\to \R \\
  x &\mapsto \norm x
\end{align*}
are continuous and the metric is translation invariant: \(d(x, y) = d(x + z, y + z)\) for all \(x, y, z \in X\).
\end{fact}

\begin{proof}
  We only check scalar multiplication. The others are left as exercises. Since \(\K\) and \(X\) are both metric spaces, it suffices to check that \(\lambda_j \to \lambda\) in \(\K\) and \(x_j \to x\) in \(X\) then \(\lambda_j x_j \to \lambda x\).

  Indeed,
  \begin{align*}
    \norm{\lambda_j x_j - \lambda x}
    &= \norm{(\lambda_j - \lambda) x_j + \lambda(x_j - x)} \\
    &\leq \norm{(\lambda_j - \lambda) x_j} + \norm{\lambda(x_j - x)} \\
    &= |\lambda_j - \lambda| \norm{x_j} +|\lambda| \norm{x_j - x} \\
    &\to 0
  \end{align*}
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(\ell_n^2 = (\R^n, \norm \cdot_2)\) where \(\norm x_2 = (\sum_{i = 1}^n |x_i|^2)^{1/2}\), i.e.\ Euclidean norm.
  \item \(\ell_n^1 = (\R^n, \norm \cdot_1)\) where \(\norm x_1 = \sum_{i = 1}^n |x_i|\).
  \item \(\ell_n^\infty = (\R^n, \norm \cdot_\infty)\) where \(\norm x_\infty = \max_i |x_i|\).
  \end{enumerate}
\end{eg}

It is often useful to consider the \emph{unit ball} \(B = B(X) = \{x \in X: \norm x \leq 1\}\). (Pictures)

\begin{fact}\leavevmode
\begin{enumerate}
\item \(B\) determines the norm through \(\norm x = \inf \{t > 0: x \in tB\}\).
\item \(B\) is \emph{convex}: for all \(x, y \in B, \lambda \in (0, 1), \lambda x + (1 - \lambda) y \in B\).
\end{enumerate}
\end{fact}

\begin{remark}
  Any set \(B \subseteq \R^n\) which is a closed, bounded, symmetric (\(x \in B \implies -x \in B\)) neighbourhood of \(0\) defines a norm by the same formula as above and \(B\) is the unit ball of that norm, although we will not use this fact in the course.
\end{remark}

\subsection{The space \(\mathcal l^p\)}

Let \(S = \{x = (x_i)_{i = 1}^\infty \subseteq \K\}\) be the set of scalar sequences with
\begin{align*}
  x + y &= (x_i)_i + (y_i)_i = (x_i + y_i)_i, \\
  \lambda x &= \lambda (x_i)_i = (\lambda x_i)_i.
\end{align*}

\begin{definition}
  For \(1 \leq p < \infty\), let \(\ell^p = \{x \in S: \sum_n |x_n|^p < \infty\}\) with norm \(\norm x_p = (\sum_n |x_n|^p)^{1/p}\). let \(\ell^\infty = \{x \in S: \sup_n |x_n| < \infty\}\) with norm \(\norm x_\infty = \sup_n |x_n|\). Finally, \(c_0 = \{x \in S: x_n \to 0\}\) with norm \(\norm x_\infty = \sup_n |x_n|\).
\end{definition}

We have yet proved \(\norm \cdot_p\) is a norm for general \(p\). The triangle inequality follows from Minkowski's inequality, discussed next.

Recall that \(f: \R^+ \to \R\) is \emph{convex} if
\[
  f(\lambda t + (1 - \lambda) s) \leq \lambda f(t) + (1 - \lambda) f(s)
\]
for all \(s, t \in \R^+, \lambda \in (0, 1)\). Graphically, the graph of \(f\) lies below the secant between any two points on the graph. \(f\) is concave if \(-f\) is convex. Note that \(\log: \R^+ \to \R\) is a concave function.

\begin{corollary}
  Let \(1 < p, q < \infty\) with \(\frac{1}{p} + \frac{1}{q} = 1\). Then
  \[
    \frac{1}{p} |x|^p + \frac{1}{q} |y|^q \geq |x| \cdot |y|
  \]
  for all \(x, y \in \K\).
\end{corollary}

\begin{proof}
  Set \(t = |x|^p, s = |y|^q, \lambda = \frac{1}{p}\). Then
  \begin{align*}
    &\frac{1}{p} |x|^p + \frac{1}{q} |y|^q \geq |x| |y| \\
    \iff& \lambda t + (1 - \lambda) s \geq t^\lambda s^{1 - \lambda} \\
    \iff& \log (\lambda t + (1 - \lambda) s) \geq \lambda \log t + (1 - \lambda) \log s
  \end{align*}
  which holds by concavity of \(\log\).
\end{proof}

\begin{theorem}[Hölder's inequality]\index{Hölder's inequality}
  Let \(1 < p, q < \infty\) with \(\frac{1}{p} + \frac{1}{q} = 1\), let \(x \in \ell^p, y \in \ell^q\). Then \(xy = (x_ny_n)_n \in \ell^1\) and
  \[
    \norm{xy}_1 \leq \norm x_p \norm x_q.
  \]
\end{theorem}

\begin{proof}
  It suffcies to assumes that \(\norm x_p = 1 = \norm y_q\). By Hölder's inequality,
  \[
    \sum_{n = 1}^N |x_n y_n| \leq \frac{1}{p} \sum_{n = 1}^N |x_n|^p + \frac{1}{q} \sum_{n = 1}^N |y_n|^q.
  \]
  Take \(N \to \infty\),
  \[
    \norm{xy}_1 \leq \frac{1}{p} + \frac{1}{q} = 1 = \norm x_p \norm y_q.
  \]
\end{proof}

\begin{theorem}[Minkowski's inequality]\index{Minkowski's inequality}
  Let \(1 < p < \infty\) and let \(x, y \in \ell^p\). Then \(x + y \in \ell^p\) and \(\norm{x + y}_p \leq \norm x_p + \norm y_p\).
\end{theorem}

\begin{proof}
  We call the power \(r\). Have
  \begin{align*}
    & \sum_n |x_n + y_n|^r \\
    =& \sum_n |x_n + y_n|^{r - 1}|x_n + y_n| \\
    \leq& \sum_n |x_n + y_n|^{r - 1} |x_n| + \sum_n |x_n + y_n|^{r - 1} |y_n| \\
    \intertext{Applying Hölder's inequality for \(p = \frac{r}{r - 1}, q = r\) to the first term and similarly to the second term,}
    \leq& \left( \sum_n |x_n + y_n|^r \right) ^{\frac{r - 1}{r}} \left( \sum_n |x_n|^r \right)^{\frac{1}{r}} + \left( \sum_n |x_n + y_n|^r \right) ^{\frac{r - 1}{r}} \left( \sum_n |y_n|^r \right)^{\frac{1}{r}}
  \end{align*}
  Divide by both sides by a common factor, get
  \[
    \norm{x + y}_r \leq \norm x_r + \norm y_r.
  \]
\end{proof}

\subsection{Banach spaces}

\begin{definition}[Banach space]\index{Banach space}
  A normed vector space is a \emph{Banach space} if it is \emph{complete} as a metric space, i.e.\ every Cauchy sequence converges.
\end{definition}

\begin{ex}
  For \(1 \leq p \leq \infty\), the space \(\ell^p\) is complete.
\end{ex}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Any finite dimensional normed space is a Banach space.
  \item Let \(S\) be a set and let \(B(S)\) be the vector space of bounded functions on \(S\). Then \(B(S)\) is a Banach space with norm \(\norm f_\infty = \sup_{s \in S} |f(s)|\).
  \item Let \(K\) be a compact Hausdorff space (for concreteness, take \([0, 1]\)) and let \(C(K)\) be the space of continuous functions on \(K\). Then \(C(K) \subseteq B(K)\) as every continuous function on \(K\) is bounded. Moreover \(C(K) \subseteq B(K)\) is closed as the uniform limit of a sequence of continuous functions is continuous. Therefore \(C(K)\) is a Banach space with norm \(\norm \cdot_\infty\).
  \item Let \(U \subseteq \R^n\) be open bounded and let \(C^k(\cl U)\) be the space of functions \(f: \cl U \to \K\) \(k\)-times continuously differentiable on \(U\). Then \(C^k(\cl U)\) is a Banach space with norm
    \[
      \norm f_{C^k(\cl U)} = \max_{|\alpha| < k} \norm{D^\alpha f}_\infty,
    \]
    where
    \[
      D^\alpha(f(x)) = \frac{\partial^{|\alpha|} f}{\partial x_1^{\alpha_1} \dots \partial x_n^{\alpha_n}}
    \]
    where \(\alpha = (\alpha_1, \dots, \alpha_n) \in \N_0^n, |\alpha| = \sum_{i = 1}^n \alpha_i\).
  \item Let \(X\) be the space of continuous functions on \([0, 1]\). Then for \(p \in [1, \infty)\),
    \[
      \norm f_p = \left( \int_0^1 |f(x)|^p dx \right)^{1/p}
    \]
    is a norm on \(X\). However, \(X\) is \emph{not} complete in this norm! In IID Probability and Measure, we will show that its completion has a very nice description, namely \(L^p\).
  \item Let \(D = \{z \in \C: |z| < 1\}\) and let \(A(\cl D)\) be the space of continuous functions \(f: \cl D \to \C\) that are analytic in \(D\). Then \(A(\cl D)\) is complete with \(\norm \cdot_\infty\) because the uniform limit of a sequence of analytic functions is analytic.
  \end{enumerate}
\end{eg}

In example 3 above we used the following fact:

\begin{fact}
  Let \(X\) be a normed space and \(Y \leq X\) a subspace. Then
  \begin{enumerate}
  \item if \(Y\) is complete then \(Y\) is closed in \(X\).
  \item if \(X\) is complete and \(Y\) is closed then \(Y\) is complete.
  \end{enumerate}
\end{fact}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item Let \(x \in \cl Y\). Then there is \((y_n) \subseteq Y\) such that \(y_n \to x\). In particular, \((y_n)\) is Cauchy so converges to some \(y \in Y\) by completeness. Thus by uniqueness of limit \(x = y \in Y\).
  \item Suppose \((y_n) \subseteq Y\). Then \((y_n)\) is Cauchy in \(X\). By completeness there is \(x \in X\) such that \(y_n \to x\). Since \(Y\) is closed, in fact \(x \in Y\).
  \end{enumerate}
\end{proof}

\begin{definition}[separable]\index{separable}
  A topological space is \emph{separable} if it has a countable dense subset.
\end{definition}

\begin{ex}\leavevmode
  \begin{enumerate}
  \item For \(1 \leq p < \infty\), \(\ell^p\) is separable.
  \item \(\ell^\infty\) is not separable.
  \item \(c_0\) is separable.
  \end{enumerate}
\end{ex}

\subsection{Bounded operators and the dual space}

\begin{proposition}
  Let \(X, Y\) be normed spaces, \(T: X \to Y\) linear, then TFAE:
  \begin{enumerate}
  \item \(T\) is continuous.
  \item \(T\) is continuous at \(0\).
  \item \(T\) is bounded, i.e.\ there is \(C > 0\) such that \(\norm{Tx} \leq C \norm x\) for all \(x \in X\).
  \end{enumerate}
\end{proposition}

\begin{proof}\leavevmode
  \begin{itemize}
  \item \(1 \implies 2\): obvious.
  \item \(2 \implies 3\): since \(T\) is continuous at \(0\) and \(\{y \in Y: \norm y \leq 1\}\) is a neighbourhood of \(0 = T(0) \in Y\), there is \(\delta > 0\) such that \(\norm x < \delta\) implies that \(\norm{T x} \leq 1\). For any \(x \in X, x \neq 0\), by linearity,
    \[
      \norm{T x} = \frac{\norm x}{\delta} \norm{T \left(\delta \frac{x}{\norm x} \right)} \leq \frac{\norm x}{\delta}.
    \]
  \item \(3 \implies 1\): let \(\varepsilon > 0\). Set \(\delta = \frac{\varepsilon}{C}\). Then \(\norm{x - y} < \delta\) implies that
    \[
      \norm{Tx - Ty} = \norm{T(x - y)} \leq C \norm{x - y} \leq \varepsilon
    \]
    so \(T\) is (uniformly) continuous.
  \end{itemize}
\end{proof}

The infimum of such \(C\) is called

\begin{definition}[operator norm]\index{operator norm}
  For \(T: X \to Y\) bounded linear, the \emph{operator norm} is
  \[
    \norm T = \norm T_{\text{op}} = \sup_{\norm x \leq 1} \norm{Tx}.
  \]
\end{definition}

\begin{notation}
  \(B(X, Y) = \{T: X \to Y \text{ bounded and linear}\}\).
\end{notation}

\begin{fact}
  \(B(X, Y)\) is a normed space with norm given by the operator norm.
\end{fact}

\begin{proof}
  Let \(T, S \in B(X, Y)\). Then
  \[
    \norm{(T + S)x} = \norm{Tx + Sx}
    \leq \norm{Tx} + \norm{Sx}
    \leq (\norm T + \norm S) \norm x
  \]
  so \(\norm{T + S} \leq \norm T + \norm S\).

  The other axioms are clear.
\end{proof}

\begin{eg}
  Let \(p \in (1, \infty)\).
  \begin{enumerate}
  \item Define
    \begin{align*}
      T: \ell^p &\to \ell^p \\
      (x_1, x_2, \dots) &\mapsto (x_1, x_2, \dots, x_r, 0, 0, \dots)
    \end{align*}
    for some fixed \(r > 0\). Then \(T \in B(\ell^p, \ell^p)\) with \(\norm T = 1\).
  \item Define
    \begin{align*}
      T: \ell^p &\to \ell^p \\
      (x_1, x_2, \dots) &\mapsto (0, x_1, x_2, \dots ),
    \end{align*}
    called the right shift operator. Then \(T \in B(\ell^p, \ell^p)\) with \(\norm T = 1\). In fact, \(\norm{Tx} = \norm x\) for all \(x \in \ell^p\). This means that \(T\) is an isometry but not surjective.
  \item Similarly define
    \begin{align*}
      S: \ell^p &\to \ell^p \\
      (x_1, x_2, \dots) &\mapsto (x_2, x_3, \dots)
    \end{align*}
    with \(\norm S = 1\). Note that \(S\) is surjective but not injective. \(ST = \id \neq TS\).
  \item Let \(p, q \in [1, \infty]\) with \(\frac{1}{p} + \frac{1}{q} = 1\). Fix \(y \in \ell^q\) and define
    \begin{align*}
      \phi_y: \ell^p & \to \K \\
      x &\mapsto (x, y) := \sum_{n} x_yy_n
    \end{align*}
    i.e.\ \(\phi_y = (\cdot, y)\). By Hölder's inequality, this is well-defined and \(\norm{\phi_y} \leq \norm y_q\).
  \item An unbounded map: let \(F\) be the space of finite real sequences with \(\norm \cdot_1\). Define
    \begin{align*}
      T: F &\to \R \\
      (x_1, \dots, x_n, 0, 0, \dots) &\mapsto \sum_{i = 1}^n i x_i
    \end{align*}
    Then \(T\) is not bounded (i.e.\ not continuous) as \(\norm{T e_n} = n \to \infty\) as \(n \to \infty\).
  \item Define
    \begin{align*}
      T: \ell^1 &\to \ell^2 \\
      x &\mapsto x
    \end{align*}
    which has \(\norm T = 1\) because \(\sum_n |x_n| \leq 1\) implies \(\sum_n |x_n|^2 \leq 1\). But \(T\ell^1 \neq \ell^2\). Since \(T\ell^1\) is also dense in \(\ell^2\), \(T\ell^1\) is not closed in \(\ell^2\) and thus not complete.
  \end{enumerate}
\end{eg}

\begin{definition}[isomorphism, isometric isomorphism]\index{isomorphism}\index{isometric isomorphism}
  Let \(X\) and \(Y\) be normed spaces. Then
  \begin{enumerate}
  \item an \emph{isomorphism} from \(X\) to \(Y\) is a map \(T: X \to Y\) that is a linear homeomorphism. Thus \(T \in B(X, Y)\) and \(T^{-1} \in B(X, Y)\), i.e.\ there are \(C_1, C_2 > 0\) such that
    \[
      C_1 \norm x \leq \norm{Tx} \leq C_2 \norm x
    \]
    for all \(x \in X\).
  \item a bijective linear map \(T: X \to Y\) is an \emph{isometric isomorphism} if \(\norm{Tx} = \norm x\) for all \(x \in X\).
  \end{enumerate}

\end{definition}

\begin{definition}[dual space]\index{dual space}
  Let \(X\) be a normed space. Its \emph{dual space} is
  \[
    X^* = B(X, \K).
  \]

  A linear map \(X \to \K\) is called a \emph{functional}.
\end{definition}

\begin{theorem}
  Let \(X\) and \(Y\) be normed spaces with \(Y\) complete. Then \(B(X, Y)\) is also complete. In particular \(X^* = B(X, \K)\) is complete.
\end{theorem}

\begin{proof}
  Let \((T_n)_n \subseteq B(X, Y)\) be a Cauchy sequence. Then for every \(x \in X\), the sequence \((T_nx)_n \subseteq Y\) is Cauchy:
  \[
    \norm{T_n x - T_mx}
    = \norm{(T_n - T_m) x}
    \leq \underbrace{\norm{T_n - T_m}}_{< \frac{\varepsilon}{\norm x}} \norm x
    < \varepsilon
  \]
  Since \(Y\) is complete, there is \(y \in Y\) such that \(T_nx \to y\). Set \(Tx = y\). Need to check \(T \in B(X, Y)\) and \(\norm{T_n - T} \to 0\).
  \begin{itemize}
  \item \(T\) is linear:
    \begin{align*}
      T(\lambda x + \mu y)
      &= \lim_{n \to \infty} T_n(\lambda x + \mu y) \\
      &= \lim_{n \to \infty} (\lambda T_n x + \mu T_n y) \\
      &= \mu T_x + \mu T_y
    \end{align*}
  \item \(T\) is bounded: for \(\norm x \leq 1\),
    \begin{align*}
      \norm{Tx}
      &\leq \norm{T_nx} + \norm{(T_n - T) x} \\
      &\leq \norm{T_n} + \varepsilon \\
      &\leq \sup_n \norm{T_n}
    \end{align*}
    which is bounded as \((T_n)_n\) is Cauchy.
  \item \(T_n \to T\) in operator norm: for \(\norm x \leq 1\),
    \begin{align*}
      \norm{T_n x - Tx}
      &\leq \norm{(T_n - T_m) x} + \norm{(T_m - T) x} \\
      &\leq \norm{T_n - T_m} + \varepsilon \\
      &\leq \limsup_{n \to \infty} \norm{T_n - T_m} \\
      &\to 0
    \end{align*}
  \end{itemize}
\end{proof}

\begin{eg}
  Let \(p, q \in (1, \infty)\) with \(\frac{1}{p} + \frac{1}{q} = 1\). Then the map
  \begin{align*}
    \phi: \ell^q &\to (\ell^p)^* \\
    y &\mapsto \phi_y = (\cdot, y)
  \end{align*}
  is an isometric isomorphism, i.e.\ \(\ell^q = (\ell^p)^*\).

\end{eg}

\begin{proof}
  Clearly \(\phi\) is linear. We have already seen that \(\norm{\phi_y} \leq \norm y_q\). Claim that \(\norm{\phi_y} \geq \norm y_q\): note that LHS is a supremum so suffices to find \(\norm x \leq 1\) such that \(|\phi_y(x)| \geq \norm y_q\). Take
  \[
    x_n =
    \begin{cases}
      |y_n|^{q/p - 1} \overline y_n & y_n \neq 0 \\
      0 & y_n = 0
    \end{cases}
  \]
  Then
  \[
    \norm x_p^p = \sum_n |x_n|^p = \sum_n |y_n|^q = \norm y_q^q < \infty
  \]
  so \(x \in \ell^p\). We have
  \[
    \phi_y(x) = (x, y) \geq \sum_{n} |y_n|^{q/p + 1} = \sum_n |y_n|^q = \norm y_q^q = \norm y_q \norm y_q^{q - 1}.
  \]
  Note that
  \[
    \norm y_q^{q - 1} = \norm x_p^{\frac{p}{q}(q - 1)} = \norm x_p^{p (1 - \frac{1}{q})} = \norm x_p
  \]
  so
  \[
    |\phi_y(x)| = \norm y_q \norm x_p.
  \]
  Thus \(\phi\) is an isometry. It remains to check that \(\phi\) is surjective. Let \(T \in (\ell^p)^*\). Set \(y_n = Te_n\). Claim that \(y \in \ell^q\) and \(\norm y_q \leq \norm T\): define
  \[
    x_n =
    \begin{cases}
      |y_n|^{q/p - 1} \overline y_n & n \leq N \text{ and } y_n \neq 0 \\
      0 & \text{otherwise}
    \end{cases}
  \]
  We want to proceed as before but we don't know if \(y \in \ell^q\) this time so we only take the first \(N\) terms. Then \(\norm x_p^p = \sum_{n = 1}^N |y_n|^q\) so \(x \in \ell^p\) and
  \[
     Tx
    = \sum_{n = 1}^N x_n Te_n
    = \sum_{n = 1}^N x_n y_n
    = \sum_{n = 1}^N |y_n|^q
  \]
  Rewrite the equation backward,
  \[
    \sum_{n = 1}^N |y_n|^q
    = Tx
    \leq \norm T \norm x_p
    = \norm T \left( \sum_{n = 1}^N |y_n|^q \right)^{1/p}
  \]
  so
  \[
    \left( \sum_{n = 1}^N |y_n|^q \right)^{1 - 1/p} \leq \norm T
  \]
  so \(\norm y_q \leq \norm T\).

  Finally, claim that \(T = \phi_y\): for all \(n\), by construction we know
  \[
    Te_n = \phi_y(e_n) = y_n.
  \]
  Since \(T\) and \(\phi_y\) are both continuous and linear, \(T = \phi_y\) on the span of \(\{e_n: n \geq 1\}\) which is just \(\ell^p\).
\end{proof}

\begin{remark}
  Similarly, \((\ell^1)^* = \ell^\infty\) and \(c_0^* = \ell^1\) by the same argument. But the argument does \emph{not} show \((\ell^\infty)^* = \ell^1\) since \(\{e_n\}\) is not dense in \(\ell^\infty\), i.e.\ it is not separable.
\end{remark}

\begin{corollary}
  For \(1 \leq p \leq \infty\), \(\ell^p\) is complete.
\end{corollary}

\subsection{Finite-dimensional vector spaces}

\begin{fact}
  Any finite-dimensional vector space can be identified with \(\K^n\) by choosing a basis. Here \(n\) is the dimension.
\end{fact}

\begin{definition}[equivalent]\index{equivalent}
  Two norms \(\norm \cdot\) and \(\norm \cdot'\) on a vector space \(X\) are \emph{equivalent} if there exists \(C > 0\) such that
  \[
    C^{-1} \norm x' \leq \norm x \leq C \norm x',
  \]
  i.e.\ \(\id: (X, \norm \cdot) \to (X, \norm \cdot ')\) is an isomorphism.
\end{definition}

\begin{theorem}
  Let \(X\) be a finite-dimensional vector space. Then all norms on \(X\) are equivalent.
\end{theorem}

\begin{proof}
  It suffcies to show that any norm \(\norm \cdot\) on \(\K^n\) is equivalent to \(\norm \cdot_2\). Claim that \(\norm x \leq C \norm x_2\) for all \(x \in \K^n\):
  \[
    \norm x
    = \norm*{\sum_{i = 1}^n x_i e_1}
    \leq \sum_{i = 1}^n |x_i| \norm{e_i}
    \leq \underbrace{n \max_i \norm{e_i}}_{C} \underbrace{\max_i|x_i|}_{\leq \norm x_2}
  \]
  Also claim that \(\norm x_2 \leq C' \norm x\) for all \(x\): let
  \[
    S = \{x: \norm x_2 = 1\}
  \]
  and define \(f = \norm \cdot |_S: S \to \R\). Then \(f\) is continuous (w.r.t.\ \(\norm \cdot_2\)):
  \[
    |f(x) - f(y)|
    = |\norm x - \norm y|
    \leq \norm{x - y}
    \leq C\norm{x - y}_2
  \]
  Note also that \(S\) is compact (with respect to \(\norm \cdot_2\)) as it is closed and bounded. Therefore \(f\) assumes its minimum on \(S\), i.e.\ there exists \(\delta > 0\) such that \(f(x) \geq \delta\) for all \(x \in S\). Then for all \(x \in \K^n\), have
  \[
    \norm x = \norm*{\frac{x}{\norm x_2}} \cdot \norm x_2 = f(\frac{x}{\norm x_2}) \cdot \norm x_2
    \geq \delta \norm x_2.
  \]
\end{proof}

\begin{corollary}
  Let \(X\) and \(Y\) be normed spaces with \(\dim X < \infty\). Then every linear map \(T: X \to Y\) is continuous.
\end{corollary}

\begin{proof}
  Define a new norm on \(X\) by
  \[
    \norm x' = \norm x + \norm{T x}.
  \]
  Since all norms on \(X\) are equivalent, there is \(C > 0\) such that
  \[
    \norm x' \leq C \norm x,
  \]
  i.e.\ \(\norm{T x} \leq (C - 1) \norm x\) for all \(x\). Thus \(T\) is bounded and thus continuous.
\end{proof}

\begin{corollary}
  Let \(X\) and \(Y\) be finite-dimensional vector spaces and \(T: X \to Y\) is a linear bijection. Then \(T\) is an isomorphism.

  In particular for any \(X\) and \(Y\) if \(\dim X = \dim Y < \infty\) then \(X\) and \(Y\) are isomorphic.
\end{corollary}

\begin{corollary}\leavevmode
  \begin{enumerate}
  \item Every finite-dimensional normed space is complete (as it is true in \(\norm \cdot_2\)).
  \item Every finite-dimensional subspace of a normed space is closed.
  \end{enumerate}
\end{corollary}

\begin{corollary}
  Let \(X\) be a finite-dimensional normed space. Then \(\overline B(X)\), the closed unit ball, is compact.
\end{corollary}

\begin{proof}
  Closed and bounded in \(\norm \cdot_2\) (because this holds in \(\norm \cdot\)). Thus \(\overline B(X)\) is compact in \(\norm \cdot_2\) so compact in \(\norm \cdot\).
\end{proof}

The converse is also true:
\begin{theorem}
  Let \(X\) be a normed space such that \(\overline B(X)\) is compact. Then \(X\) is finite-dimensional.
\end{theorem}

\begin{proof}
  Since \(\overline B_1(0) = \overline B(X)\) is compact, there are \(x_1, \dots, x_n \in X\) such that
  \[
    \overline B_1(0) \subseteq \bigcup_{i = 1}^n B_{1/2}(x_i).
  \]
  Let \(Y\) be the span of \(x_i\)'s. Then \(\dim Y \leq n\). Also
  \[
    B_1(0) \subseteq Y + B_{1/2}(0)
  \]
  so
  \[
    B_1(0) \subseteq Y + \frac{1}{2} (Y + B_{1/2}(0))
    = Y + B_{1/4}(0)
    \subseteq \dots
    \subseteq Y + B_{2^{-n}}(0)
  \]
  for all \(m \in \N\). Therefore \(B_1(0) \subseteq \cl Y = Y\). Since \(X\) is linear, \(X \subseteq Y\). Thus \(\dim X \leq n\).
\end{proof}

\subsection{Completion, products, quotients}

\subsubsection{Completion}

\begin{proposition}
  Let \(X\) be a metric space. The \emph{completion} of \(X\) is a complete metric space \(\tilde X\) containing a dense subset that is isometric to \(X\).
\end{proposition}

\begin{proof}
The construction is as follow. For two Cauchy sequences \(x = (x_n), y = (y_n) \subseteq X\), define \(x \sim y\) if and only if \(d(x_n, y_n) \to 0\). This is an equivalence relation. Denote the equivalence class of a Cauchy seuqence \(x\) by \(\tilde x\). Define
\[
  \tilde X = \{\tilde x: x \text{ Cauchy in } X\}
\]
and define a metric
\[
  \tilde d(\tilde x, \tilde y) = \lim_{n \to \infty} d(x_n, y_n).
\]
The limit exists and is independent of the representatives. Then \(\tilde d\) is a metric: if \(\tilde d(\tilde x, \tilde y) = 0\) then \(d(x_n, y_n) \to 0\) so \(x \sim y\) so \(\tilde x = \tilde y\). Symmetry and triangle inequality follow from those for \(d\).

Now we show \(X \embed \tilde X\). For \(x \in X\), define \(j(x) \in \tilde X\) as the equivalence class of \((x, x, \dots)\). Then
\[
  \tilde d(j(x), j(y)) = d(x, y)
\]
so \(j\) is an isometry. The image of \(j\) is dense in \(\tilde X\) since if \((x_n)\) is Cauchy in \(X\) then \((j(x_n))\) in \(\tilde X\) is Cauchy and \(j(x_n) \to \tilde x\).

Finally, to show \(\tilde X\) is complete, let \((\tilde x^k) \subseteq \tilde X\) be Cauchy. Let \((x^k_n) \subseteq X\) be a representative for \(\tilde x^k\). Choose \(n_k\) such that \(d(x_n^k, x_m^k) \leq 2^{-k}\) for \(n, m \geq n_k\). Define \(x_k = x_{n_k}^k \in X\). Claim that \(x = (x_k) \subseteq X\) is Cauchy and \(\tilde x^k \to \tilde x\) in \(\tilde X\). It is left as an exercise.
\end{proof}

\begin{definition}[completion]\index{completion}\index{normed space!completion}
  \(\tilde X\) is called the \emph{completion} of \(X\) and we regard \(X \subseteq \tilde X\).
\end{definition}

In the case of normed spaces, the metric completion has more structure:

\begin{theorem}
  Let \(X\) be a normed space. Then there is a Banach space \(\tilde X\) containing \(X\) as a dense subspace.
\end{theorem}

\begin{proof}
  Let \(\tilde X\) be the metric space completion of \(X\). For \(\tilde x, \tilde y \in \tilde X\), choose \((x_n), (y_n) \subseteq X\) such that \(x_n \to \tilde x\) and \(y_n \to \tilde y\) (in \(\tilde X\)). For any \(\lambda, \mu \in \K\), \(\lambda x_n + \mu y_n\) is Cauchy. Set \(\lambda \tilde x + \mu \tilde y = \lim_{n \to \infty} (\lambda x_n + \mu y_n)\). This makes \(\tilde X\) a vector space. Moreover,
  \[
    \norm{\tilde x} = \lim_{n \to \infty} \norm{x_n} = \lim_{n \to \infty} d(0, x_n) = \tilde d (0, \tilde x)
  \]
  is a norm on \(\tilde X\) and since \(\tilde d\) is complete, this makes \(\tilde X\) a Banach space.
\end{proof}

\begin{proposition}
  Let \(X\) and \(Y\) be normed spaces and let \(T \in B(X, Y)\). Then there is a unique \(\tilde T \in B(\tilde X, \tilde Y)\) such that
  \[
    \tilde T|_X = T, \norm{\tilde T} = \tilde T.
  \]
\end{proposition}

\begin{proof}
  For \(\tilde x \in \tilde X\), choose \((x_n) \subseteq X\) such that \(x_n \to \tilde x\). Then \((x_n)\) is Cauchy, and since \(T\) is bounded, \((Tx_n) \subseteq Y\) is Cauchy as well. By completeness of \(\tilde Y\), there is \(\tilde y \in \tilde Y\) such that \(Tx_n = \tilde y\). Set \(\tilde T \tilde x = \tilde y\). Note that \(\tilde T\) is well-defined, linear and \(\tilde T|_X = T\). Also
  \[
    \norm{\tilde T \tilde x} = \lim_{n \to \infty} \norm{T x_n} \leq \norm T \lim_{n \to \infty} \norm{x_n} = \norm T \norm{\tilde x},
  \]
  so \(\norm{\tilde T} = \norm T\) so equality. Uniqueness follows from continuity and density of \(X\) in \(\tilde X\).
\end{proof}

\begin{remark}
  The completion \(\tilde X\) is unique in the sense that if \(\tilde X'\) is another completion of \(X\) then there is an isometric isomorphism \(\tilde X \to \tilde X'\) restricting to identity on \(X\).
\end{remark}

\subsubsection{Product}

\begin{definition}[product]\index{normed space!product}
Let \(X\) and \(Y\) be normed spaces. Then \(X \times Y\) can be made into a normed space with one of the following equivalent norms:
\[
  \norm{(x, y)} = (\norm x^p + \norm y^p)^{1/p}, p \in [1, \infty)
\]
or
\[
  \norm{(x, y)} = \max \{\norm x, \norm y\}.
\]
\end{definition}

They are equivalent for precisely the same reason that norms on finite-dimensional spaces are equivalent. Thus henceforth we will just use ``norm on \(X \times Y\)'' to mean any of the equivalent norms.

As expected for a product construction, the projections \(\pi_X: X \times Y \to X\), and \(\pi_Y: X \times Y \to Y\) are continuous.

\begin{fact}
  If \(X\) and \(Y\) are complete then \(X \times Y\) is complete and \(X \cong X \times \{0\} \subseteq X \times Y\) and \(Y \cong \{0\} \times Y \subseteq X \times Y\) are closed subspaces.
\end{fact}

\subsubsection{Quotient}

\begin{definition}[quotient]\index{normed space!quotient}
  Let \(X\) be a normed space and let \(Y \subseteq X\) be a \emph{closed} subspace. Then \(x \sim x'\) if \(x - x' \in Y\) defines an equivalence relation with equivalence classes \([x] = x + Y\). Let \(X / Y\) be the collection of all equivalence classes and define
  \[
    \norm{[x]} = \inf_{y \in Y} \norm{x + y}.
  \]
\end{definition}

\begin{proposition}\leavevmode
  \begin{enumerate}
  \item \(\norm \cdot\) is a norm on \(X / Y\).
  \item \(\pi: X \to X/Y, x \mapsto x + Y\) is continuous.
  \item If \(X\) is complete then \(X / Y\) is complete.
  \end{enumerate}
\end{proposition}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item Suffices to show positive definiteness as the other axioms are trivial. Assume that
    \[
      \norm{\pi(x)} = \inf_{y \in Y} \norm{x + y} = 0,
    \]
    then there exist \((x_n) \subseteq X\) such that \(x_n \to 0\) and \(\pi(x_n) = \pi(x)\), i.e.\ \(x - x_n \in Y\). Thus \(x \in \cl Y = Y\).
  \item
    \[
      \norm{\pi(x)} = \inf_{y \in Y} \norm{x + y} \leq \norm x
    \]
    so \(\norm \pi \leq 1\).
  \item Let \((x_n) \subseteq X\) be such that \(\pi(x_n) \subseteq X / Y\) is Cauchy. Claim that there exists a subsequence \((n_k) \subseteq \N\) and \((y_n) \subseteq Y\) such that \((x_{n_k} + y_{n_k})_k\) is Cauchy in \(X\): by passing to a subsequence \((n_k)\) we can assume that \(\norm{\pi(x_{n_{k + 1}}) - \pi(x_{n_k})} \leq 2^{-k - 1}\). Now choose \((z_k) \subseteq Y\) such that
    \[
      \norm{x_{n_{k + 1}} - x_{n_k} + z_k} \leq 2^{-k}.
    \]
    Define \(y_1 = 0\) and \(y_k = z_1 + \dots + z_{k - 1} \in Y\), then
    \[
      \norm{(x_{n_{k + 1}} + y_{k + 1}) - (x_{n_k} + y_k)}
      = \norm{x_{n_{k + 1}} - x_{n_k} + z_k}
        \leq 2^{-k}
    \]
    so \((x_{n_k} + y_k)_k\) is Cauchy.

    Claim that \((\pi(x_n)) \subseteq X / Y\) converges: since \(X\) is complete, there is \(x \in X\) such that \(x_{n_k} + y_k \to x\) in \(X\). Then
    \[
      \norm{\pi(x_{n_k}) - \pi(x)}
      = \inf_{y \in Y} \norm{x - (x_{n_k} + y)}
      \leq \norm{x - (x_{n_k} + y_k)}
      \to 0
    \]
    which implies convergence of \((\pi(x_n))\) along a subsequence, ergo the original sequence.
  \end{enumerate}
\end{proof}

\section{Completeness of the Baire category}

\subsection{Baire category}

Recall that if \(X\) is a metric space, then \(Y \subseteq X\) is \emph{dense} if \(\cl Y = X\), i.e.\ \(Y \cap B_r(x) \neq \emptyset\) for all \(x \in X, r > 0\).

\begin{theorem}[Baire category theorem]\index{Baire category theorem}
  \label{thm:BCT}
  Let \(X\) be a \emph{complete} metric space. For any sequence of open dense subsets \(U_j \subseteq X\), \(j \in \N\), the intersection \(\bigcap_{j = 1}^\infty U_j\) is dense in \(X\).
\end{theorem}

\begin{proof}
  Let \(U = \bigcap_{j = 1}^\infty U_j\). Given any \(r \in X, r > 0\), we need to show that \(B_r(x) \cap U = \emptyset\). Since \(U_1\) is dense, there is \(x_1 \in X, r \in (0, 1)\) such that
  \[
    \cl B_{r_1}(x_1) \subseteq B_{2r_1}(x_1) \subseteq U_1 \cap B_r(x).
  \]
  Likewise choose \(x_2 \in X, r_2 \in (0, \frac{1}{2})\) such that
  \[
    \cl B_{r_2}(x_2) \subseteq U_2 \cap B_{r_1}(x_1)
  \]
  and in general \(x_n \in X, r \in (0, \frac{1}{n})\) such that
  \[
    \cl B_{r_n}(x_n) \subseteq U_n \cap B_{r_{n - 1}}(x_{n - 1}).
  \]
  Then \(r_n \to 0\) and a nested chain of open balls
  \[
    B_{r_1}(x_1) \supseteq B_{r_2}(x_2) \supseteq \dots
  \]
  so \(d(x_n, x_m) < r_n\) if \(m \geq n\), i.e.\ \((x_n)\) is a Cauchy sequence. Since \(X\) is complete, there is \(y \in X\) such that \(x_n \to y\). Note that \(y \in \cl B_{r_k}(x_k) \cap U_k\) for all \(k\). Thus
  \[
    y \in \bigcap_{j = 1}^\infty U_j = U
  \]
  and \(y \in \cl B_{r_1}(x_1) \subseteq B_r(x)\) so \(y \in U \cap B_r(x)\).
\end{proof}

The following corollary is equivalent to Baire category theorem is often used in practice:

\begin{corollary}
  Let \(X\) be a complete metric space. Let \(A_j \subseteq X\) be a sequence of closed subsets such that \(\bigcup_j A_j\) has nonempty interior, i.e.\ it contains some ball, then at least one of the \(A_j\)'s has nonempty interior.
\end{corollary}

\begin{proof}
  Let \(U_j = X \setminus A_j\). Since \(\bigcup_j A_j\) has nonempty interior,
  \[
    X \setminus \bigcup_j A_j = \bigcap_j U_j
  \]
  is not dense. Since the \(U_j\)'s are open, by \Cref{thm:BCT} at least one of the \(U_j\)'s cannot be dense, say \(U_k\). Thus \(A_k = X \setminus U_k\) has nonempty interior.
\end{proof}

\begin{definition}[nowhere dense, meagre, residual, set of first/second category]\index{nowhere dense}\index{meagre}\index{residual}\index{first category}\index{second category}
  Let \(X\) be a metric space.
  \begin{enumerate}
  \item A subset \(Y \subseteq X\) is \emph{nowhere dense} if \(\operatorname{Int}(\cl Y) = \emptyset\), i.e.\ if \(Y\) is not dense in any ball.
  \item A subset \(Z \subseteq X\) is \emph{meagre} or \emph{of the first category} if there are countably many sets \(Y_j \subseteq X\) which are nowhere dense and \(Z = \bigcup_j U_j\).
  \item A subset \(U \subseteq X\) is \emph{nonmeagre} or \emph{of the second category} if it is not meagre.
  \item A subset \(R \subseteq X\) is \emph{residual} if its complement is meagre.
  \end{enumerate}
\end{definition}

\begin{remark}
  TFAE:
  \begin{itemize}
  \item \(Y \subseteq X\) is nowhere dense.
  \item \(\cl Y\) is nowhere dense.
  \item \(X \setminus \cl Y\) is dense.
  \end{itemize}
\end{remark}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(\Q = \bigcup_{x \in \Q} \{x\} \subseteq \R\) is meagre in \(\R\).
  \item Any countable union of meagre sets is meagre.
  \end{enumerate}
\end{eg}

\begin{remark}
  There is a similarity of the concepts of meagre, nonmeagre, residual, with those of null sets, sets of positive measure, sets of full measure in measure theory. For metric spaces that are also measure spaces, such as \(\R\) with Lebesgue measue, one could ask if there is a closer correspondence. The answer is negative, in general. There exists a meagre set \(A\) and a Lebesgue null set \(B\) such that \(R = A \cup B\).
\end{remark}

Yet another formulation of Baire category theorem is

\begin{corollary}
  Let \(X\) be a complete metric space. Then \(X\) is of the second category.
\end{corollary}

\begin{proof}
  Let \(Y_j \subseteq X\) be nowhere dense. It suffices to show that \(X \neq \bigcup_j \cl Y_j\). But \(U_j = X \setminus \cl Y_j\) is open dense so by \Cref{thm:BCT}
  \[
    \bigcap_j U_j = X \setminus \bigcup_j \cl Y_j
  \]
  is dense, in particular not empty.
\end{proof}

\begin{corollary}
  Let \(X\) be a complete metric space. Then residual sets are nonmeagre and dense.
\end{corollary}

\begin{proof}
  Let \(Z \subseteq X\) be meagre and suppose that \(R = X \setminus Z\) was meagre. Then \(X = Z \cup R\) would be meagre as a union of two meagre sets. But since \(X\) is complete, it is not. So \(R\) is nonmeagre.

  To show that \(R\) is dense, we can suppose \(Z = \bigcup_j Y_j\) with \(Y_j\) nowhere dense. Then \(U_j = X \setminus \cl Y\) is open dense. So \(R \supseteq \bigcup_j U_j\) is dense by \Cref{thm:BCT}.
\end{proof}

\begin{corollary}
  Let \(X\) be a complete metric space and \(U \subseteq X\) open. Then \(U = \emptyset\) or \(U\) is of the second category.
\end{corollary}

\begin{proof}
  Assume that \(U\) is open and meagre. Then \(X \setminus U\) is closed and residual so dense. So \(X \setminus U = X\), i.e.\ \(U = \emptyset\).
\end{proof}

\subsection{Principle of uniform boundedness}

\begin{theorem}[principle of uniform boundedness]\index{principle of uniform boundedness}
  Let \(X\) be a complete metric space. Let \((f_\lambda)_{\lambda \in \Lambda}\) be a family of continuous functions \(f_\lambda: X \to \R\). If \((f_\lambda)_{\lambda \in \Lambda}\) is pointwise bounded, i.e.\ for all \(x \in X\), \(\sup_{\lambda \in \Lambda} |f_\lambda(x)| < \infty\), then there is a ball \(B_r(x_0) \subseteq X\) on which \(f_\lambda\) is uniformly bounded, i.e.
  \[
    \sup_{\lambda \in \Lambda} \sup_{x \in B_r(x_0)} |f_\lambda(x)| < \infty.
  \]
\end{theorem}

\begin{proof}
  Let
  \[
    A_k = \{x \in X: |f_\lambda(x)| \leq k \text{ for all } \lambda \in \Lambda\}
    = \bigcap_{\lambda \in \Lambda} \{x \in X: |f_\lambda(x)| \leq k\}.
  \]
  Since \(f_\lambda\)'s are continuous, \(A_k\) is closed. Since \((f_\lambda)\) is pointwise bounded,
  \[
    \bigcup_{k \in \N} A_k = X.
  \]
  By Baire category theorem, at least one of the \(A_k\)'s must contain a ball \(B_r(x_0)\). Thus \((f_\lambda)\) is uniformly bounded on that ball.
\end{proof}

\begin{theorem}[Banach-Steinhaus]\index{Banach-Steinhaus theorem}
  Let \(X\) be a Banach space and let \(Y\) be a normed space. Let \((T_\lambda)_{\lambda \in \Lambda} \subseteq B(X, Y)\) be pointwise bounded, i.e.\ for all \(x \in X\), \(\sup_{\lambda \in \Lambda} \norm{T_\lambda x} < \infty\). Then \((T_\lambda)\) is uniformly bounded, i.e.
  \[
    \sup_{\lambda \in \Lambda} \norm{T_\lambda} < \infty.
  \]
\end{theorem}

\begin{proof}
  Set \(f_\lambda: X \to \R, x \mapsto \norm{T_\lambda x}\). Then \(f_\lambda\) is continuous and \((f_\lambda)\) is pointwise bounded. By the principle of uniform boundedness, there is \(B_r(x_0) \subseteq X\) on which
  \[
    \sup_{\lambda \in \Lambda} \sup_{\norm{x - x_0} < r} \norm{T_\lambda x} < \infty.
  \]
  But since the \(T_\lambda\)'s are linear, for any \(x \in X\) with \(\norm x \leq 1\),
  \[
    \norm{T_\lambda x}
    = \frac{1}{r} \norm{T_\lambda(rx + x_0) - T_\lambda(x_0)}
    \leq \frac{1}{r} \sup_{\lambda \in \Lambda} \sup_{\norm{x - x_0} < r} \norm{T_\lambda x} + \frac{1}{r} \sup_{\lambda \in \Lambda} \norm{T_0x}.
  \]
  The second term is bounded since \(T_\lambda\) is pointwise bounded. Thus
  \[
    \sup_{\lambda \in \Lambda} \norm{T_\lambda} < \infty.
  \]
\end{proof}

The point of the theorem is not so much of finding a uniform bound on the functionals, as the proof (of Baire category theorem) requires axiom of choice and is nonconstructive. Rather it shows that pointwise boundedness implies uniform boundedness so we don't risk losing anything by trying to prove uniform boundedness from onset. As we'll see, in most cases pointwise bound gives uniform bound straightaway. % TODO: check and revise

\subsection{Open mapping theorem}

\begin{definition}[open map]\index{open map}
  A map between topological spaces is \emph{open} if it maps open sets to open sets.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(f: \R\to \R, x \mapsto x^2\) is continuous but not open.
  \item \(f: \R^2 \to \R, (x, y) \mapsto x + \operatorname{sgn}(y)\) is open but not continuous.
  \end{enumerate}
\end{eg}

\begin{theorem}[open mapping theorem]\index{open mapping theorem}
  \label{thm:open mapping theorem}
  Let \(X, Y\) be Banach spaces and \(T \in B(X, Y)\). Then
  \begin{enumerate}
  \item if \(T\) is surjective then it is open.
  \item if \(T\) is bijective then \(T^{-1} \in B(Y, X)\).
  \end{enumerate}
\end{theorem}

\begin{lemma}
  Let \(X, Y\) be normed spaces. Then \(T: X \to Y\) linear is open if
  \[
    T(B_1(0)) \supseteq B_r(0)
  \]
  for some \(r > 0\).
\end{lemma}

\begin{proof}
  Let \(U \subseteq X\) be open and \(x \in U\). As \(U\) is open, choose \(\delta > 0\) such that \(x + B_\delta(0) \subseteq U\). Then
  \[
    T(U) \supseteq T(x + B_\delta(0)) = Tx + \delta T(B_1(0)) \supseteq Tx + r \delta B_1(0).
  \]
  Thus \(T(U)\) contains an open ball around any element \(T(x)\), therefore open.
\end{proof}

\begin{lemma}
  Let \(X\) be a Banach space, \(Y\) a normed space and \(T \in B(X, Y)\). If
  \[
    \cl{T(B_1(0))} \supseteq B_1(0).
  \]
  then
  \[
    T(B_1(0)) \supseteq B_1(0).
  \]
\end{lemma}

\begin{proof}
  Let \(y_0 \in B_1(0) \subseteq Y\). We need to find \(x \in B_1(0)\) such that \(Tx = y_0\). We construct \(x\) as the limit of a Cauchy sequence. Let \(x_1 \in B_{1/2}(0) \subseteq X\) such that
  \[
    \norm{Tx_1 - y_0} < \frac{1}{2}.
  \]
  This is possible since there exists \(\tilde y_0 \in B_{1/2}(0) \cap B_{1/2}(y_0)\) and we can find \(x_1 \in B_{1/2}(0)\) such that \(\norm{Tx_1 - \tilde y_0}\) is arbitrarily small by density of \(T(B_{1/2}(0))\) in \(B_{1/2}(0)\).

  Set \(y_1 = y_0 - Tx_1 \in B_{1/2}(0)\). By induction, if \(y_1, \dots, y_k\) and \(x_1, \dots, x_k\) are such that
  \[
    \norm{x_i} < 2^{-i}, y_i = y_{i - 1} - Tx_i \in B_{2^{-i}}(0) \subseteq Y,
  \]
  can choose \(x_{k + 1} \in B_{2^{-k - 1}}(0) \subseteq X\) such that
  \[
    y_{k + 1} = y_k - Tx_{k + 1} \in B_{2^{-k - 1}}(0) \subseteq Y
  \]
  so
  \[
    \sum_{k = 1}^\infty \norm{x_k} < 1
  \]
  and \(x = \sum_{k = 1}^\infty x_k \in B_1(0)\) exists since \(X\) is complete and
  \[
    y_0 - Tx = \lim_{n \to \infty} \left( y_0 - \sum_{k = 1}^n Tx_k \right)
    = \lim_{n \to \infty} \left( y_1 - \sum_{k = 2}^n Tx_k \right)
    = \dots
    = \lim_{n \to \infty} y_n
    = 0
  \]
  so \(y_0 \in T(B_1(0))\) for any \(y_0 \in B_1(0)\). Thus \(T(B_1(0)) \supseteq B_1(0)\).
\end{proof}

\begin{proof}[Proof of \nameref{thm:open mapping theorem}]\leavevmode
  \begin{enumerate}
  \item By the previous two lemmas, it suffices to show that
    \[
      \cl{T(B_1(0))} \supseteq B_r(0)
    \]
    for some \(r > 0\). We use Baire category theorem to do this. Since \(T\) is surjective, \(Y = \bigcup_{k = 1} \cl{T(B_k(0))}\). Since \(Y\) is complete, the Baire category theorem implies that there is \(k_0 \in \N\) such that \(\cl{T(B_{k_0}(0))}\) has nonempty interior, i.e.\ there is \(r_0 > 0, y_0 = Tx_0\) such that
    \[
      B_{r_0}(y_0) \subseteq \cl{T(B_{k_0}(0))}.
    \]
    By linearlity,
    \begin{align*}
      B_{r_0}(0)
      &= B_{r_0}(y_0) - Tx_0 \subseteq \cl{T(B_{k_0}(0))} - Tx_0 \\
      &= \cl{T(B_{k_0}(-x_0))} \subseteq \cl{T(B_{k_0 + \ell_0}(0))} = (k_0 + \ell_0) \cl{T(B_1(0))}
    \end{align*}
    where \(\ell_0 \geq \norm{x_0}\). Now take \(r = \frac{r_0}{k_0 + \ell_0}\).
  \item If \(T\) is bijective, then \(T\) is open means that \(T^{-1}\) is continuous.
  \end{enumerate}
\end{proof}

\begin{remark}
  The completeness of \(X\) and \(Y\) are both necessary. See example sheet. We can however do a quick counterexample here. Let
  \[
    F = \{(x_n): x_n = 0 \text{ except for finitely many } n\}
  \]
  with \(\norm x_\infty = \max_n |x_n|\). Define
  \begin{align*}
    T: F &\to F \\
    (x_n) &\mapsto (x_n/n)
  \end{align*}
  Then \(\norm T \leq 1\) so \(T\) is continuous and bijective. But \((T^{-1}x)_n = (nx_n)\) is unbounded. In particular \(F\) is not complete.
\end{remark}

\begin{remark}
  The basic problem in linear PDE is the following one: given \(f \in Y\), e.g.\ \(Y = L^2(\Omega)\) for some nice \(\Omega \subseteq \R^d\), and a linear partial differential operator \(L: X \to Y\), say \(X = H_0^2(\Omega)\) and \(L = \Delta\), is there a unique solution \(u \in X\) to \(Lu = f\)? The typical procedure is to show that for \(f\) ``nice'', say \(f \in C^\infty(\Omega)\), spanning a a dense subspace of \(Y\), there is a unique solution such that
  \[
    \norm u \leq C \norm f.
  \]
  such an \emph{a priori} estimate allows us to solve \(Lu = f\) for general \(f \in Y\) by approximation. This implies that \(L\) is surjective. The open mapping theorem guarantees that this strategy works if \(L\) is surjective.
\end{remark}

\subsection{Closed graph theorem}

\begin{theorem}[closed graph theorem]
  Let \(X, Y\) be Banach spaces and \(T: X \to Y\) linear. Then \(T\) is bounded if and only if the graph
  \[
    \Gamma = \{(x, Tx): x \in X\} \subseteq X \times Y
  \]
  is closed.
\end{theorem}

\begin{proof}
  Let \(T\) be bounded and \((x_k, y_k) \subseteq \Gamma\) be a sequence such that \(x_k \to x, y_k = Tx_k \to y\). Since \(T\) is continuous,
  \[
    Tx = y,
  \]
  so \((x, y) \in \Gamma\). So \(\Gamma\) is closed.

  Conversely, suppose that \(\Gamma\) is closed. We want to show that \(T\) is continuous. Since \(X \times Y\) is a Banach space with norm
  \[
    \norm{(x, y)} = \norm x + \norm y
  \]
  and since \(\Gamma\) is closed, it is also a Banach space with the induced norm. The projections
  \begin{align*}
    \pi_X: \Gamma &\to X \\
    (x, Tx) &\mapsto x \\
    \pi_Y: \Gamma &\to Y \\
    (x, Tx) &\mapsto Tx
  \end{align*}
  are continuous and \(\pi_X\) is also a bijection. By the open mapping theorem, \(\pi_X^{-1} \in B(X, \Gamma)\). Thus
  \[
    T = \pi_Y \compose \pi_X^{-1} \in B(X, Y).
  \]
\end{proof}

\begin{remark}
  As a consequence, to prove that \(T: X \to Y\) is bounded, if \(X\) and \(Y\) are Banach spaces, it suffices to check if \(x_k \to x, Tx_k \to y\) then \(Tx = y\), instead of the stronger requirement that if \(x_k \to x\) then \(Tx_k \to y\) and \(y = Tx\).
\end{remark}

\section{Continuous functions on a compact space}

\subsection{Normal topological spaces}

Recall that a topological space \(X\) is \emph{Hausdorff} if for any \(x, y \in X, x \neq y\), there exist open neighbourhodds \(U\) of \(x\) and \(V\) of \(y\) such that \(U \cap V \neq \emptyset\).

\begin{proposition}
  Let \(X\) be a Hausdorff space and \(K_1, K_2 \subseteq X\) are compact sets with \(K_1 \cap K_2 = \emptyset\). Then there exist open \(U_1 \supseteq K_1, U_2 \supseteq K_2\) such that \(U_1 \cap U_2 = \emptyset\).
\end{proposition}

\begin{proof}
  This a mundane exercise in general topology. For any \(x \in K_1, y \in K_2\), let \(U_{xy}\) and \(V_{xy}\) be open neighbourhoods such that \(x \in U_{xy}, y \in V_{xy}\) and \(U_{xy} \cap V_{xy} = \emptyset\). Then \(K_1 \subseteq \bigcup_{x \in K_1} U_{xy}\). Since \(K_1\) is compact, there are finitely many points \(x_1, \dots, x_n \in K_1\) such that \(K_1 \subseteq \bigcup_{i = 1}^n U_{x_iy}\). Set \(U_y = \bigcup_{i = 1}^n U_{x_iy}\) and \(Y_y = \bigcap_{i = 1}^n V_{x_iy}\). Then \(U_y \cap V_y = \emptyset\) and \(K_1 \subseteq U_y, y \in V_y\) for all \(y \in Y\). Then \(K_2 \subseteq \bigcup_{y \in K_2} V_y\). Again by compactness there exist \(y_1, \dots y_m \in K_2\) such that \(K_2 \subseteq \bigcup_{i = 1}^m V_{y_i}\). Set
  \[
    V = \bigcup_{i = 1}^m V_{y_i}, U = \bigcap_{i = 1}^m U_{y_i}.
  \]
  The sets \(U\) and \(V\) are open, \(U \cap V = \emptyset\) and \(U \supseteq K_1, V \supseteq K_2\) by construction.
\end{proof}

\begin{definition}[normal]\index{normal}
  A topological space \(X\) is \emph{normal} if for any closed sets \(A_1, A_2 \subseteq X\) such that \(A_1 \cap A_2 = \emptyset\), there exist open sets \(U_1, U_2 \subseteq X\) such that \(A_1 \subseteq U_1, A_2 \subseteq U_2\) and \(U_1 \cap U_2 = \emptyset\).
\end{definition}

\begin{corollary}
  Any compact Hausdorff space is normal.
\end{corollary}

\begin{proof}
  Closed subsets of a compact space are compact.
\end{proof}

\begin{fact}
  Let \(X\) be normal. Then for every closed \(A \subseteq X\) and open \(U \supseteq A\), then there exists an open set \(V\) and closed set \(B\) such that
  \[
    A \subseteq V \subseteq B \subseteq U.
  \]
\end{fact}

\begin{proof}
  Set \(A' = X \setminus U\). Then \(A'\) and \(A\) are closed and disjoint so there exist open sets \(V\) and \(V'\) such that \(V \supseteq A, V' \supseteq A'\) and \(V \cap V' = \emptyset\). Take \(B = X \setminus V'\), then \(A \subseteq V \subseteq B \subseteq U\).
\end{proof}

\begin{proposition}[Urysohn's lemma]\index{Urysohn's lemma}
  Let \(X\) be normal. For every closed set \(A \subseteq X\) and open set \(U \supseteq A\), there is a continuous function \(f: X \to [0, 1]\) such that
  \[
    f(x) =
    \begin{cases}
      1 & x \in A \\
      0 & x \notin U
    \end{cases}
  \]
\end{proposition}

\begin{proof}
  Let \(A_1 = A\) and \(U_0 = U\). Since \(A_1 \subseteq U_0\) there exists an open set \(U_{1/2}\) and a closed set \(A_{1/2}\) such that
  \[
    A_1 \subseteq U_{1/2} \subseteq A_{1/2} \subseteq U_0.
  \]
  Applying this procedure again, there are open \(U_{1/4}, U_{3/4}\) and closed \(A_{1/3}, A_{3/4}\) such that
  \[
    A_1 \subseteq U_{3/4} \subseteq A_{3/4} \subseteq U_{1/2} \subseteq A_{1/2} \subseteq U_{1/4} \subseteq A_{1/4} \subseteq U_0.
  \]
  Iterating this procedure, there exist open sets \(U_q\) and closed sets \(A_q\) for dyadic \(q \in \{m 2^{-n}: m, n \in \N, 0 < m < 2^n\}\) such that for all \(q < q'\),
  \[
    U_{q'} \subseteq A_{q'} \subseteq U_q \subseteq A_q.
  \]
  Define
  \[
    f(x) = \sup \{q: x \in U_q\} = \inf \{q: x \notin A_q\}
  \]
  (where \(\inf \emptyset = 1, \sup \emptyset = 0\)). Clearly \(0 \leq f \leq 1\). If \(x \notin U = U_0\) then \(f(x) = 0\). If \(x \in A = A_1\) then \(x \in U_q\) for all \(q\) so \(f(x) = 1\). To show continuity, note that for any \(t \in \R\),
  \begin{align*}
    \{x: f(x) > t\} &= \bigcup_{q > t} U_q \\
    \{x: f(x) < t\} &= \bigcup_{q > t} X \setminus A_q
  \end{align*}
  both of which are open. Thus \(f\) is continuous.
\end{proof}

\begin{corollary}
  \label{cor:normal space separates closed sets}
  Let \(X\) be normal and \(A_0, A_1 \subseteq X\) closed and disjoint. Then there exists \(f: X \to [0, 1]\) continuous such that \(f|_{A_0} = 0\) and \(f|_{A_1} = 1\).
\end{corollary}

\begin{proof}
  Take \(A = A_1\) and \(U = X \setminus A_0\) in Urysohn's lemma.
\end{proof}

\begin{corollary}
  Let \(K\) be a compact Hausdorff space. Then \(C(K)\) separates points, i.e.\ for all \(x, y \in K\), \(x \neq y\), there is \(f \in C(K)\) such that \(f(x) \neq f(y)\).
\end{corollary}

\begin{theorem}[Tietze-Urysohn extension theorem]\index{Tietze-Urysohn extension theorem}
  Let \(X\) be normal, \(A \subseteq X\) closed, \(g: A \to \K\) continuous. Then there exists a continuous extension \(f: X \to \K\) such that \(f|_A = g\) and \(\norm f_\infty \leq \norm g_\infty\).
\end{theorem}

\begin{proof}
  We first assume that \(g\) takes values in \([0, 1]\). Let \(g_0 = g\). Let \(A_0 = g^{-1}([0, \frac{1}{3}]), B_0 = g^{-1}([\frac{2}{3}, 1])\) which are disjoint and closed. Thus by \Cref{cor:normal space separates closed sets} there is a continuous \(h_0: X \to [0, \frac{1}{3}]\) such that \(h_0|_{A_0} = 0, h_0|_{B_0} = \frac{1}{3}\). Let \(g_1 = g_0 - h_0|_A\). Then \(g_1(x) \in [0, \frac{2}{3}]\) for all \(x \in A\). By induction assume that \(g_i: A \to [0, \left(\frac{2}{3}\right)^i]\) is given and set
  \[
    A_i = g_i^{-1}(\left[0, \frac{1}{3} \left(\frac{2}{3}\right)^i \right]), B_i = g_i^{-1}(\left[ \frac{2}{3} \left(\frac{2}{3}\right)^i, \left(\frac{2}{3}\right)^i \right])
  \]
  and \(h_i: X \to [0, \frac{1}{3}\left(\frac{2}{3}\right)^i]\) a continuous function with \(h_i|_{A_i} = 0, h_i|_{B_i} = \frac{1}{3}\left(\frac{2}{3}\right)^i\). Set \(g_{i + 1} = g_i - h_i|_A\). We find that
  \[
    g
    = g_0
    = g_1 + h_0|_A
    = g_2 + h_1|_A + h_2|_A
    = \dots
    = \sum_{i = 0}^\infty h_i|_A.
  \]
  Set \(\tilde f = \sum_{i = 0}^\infty h_i\). The convergence is uniform by Weierstrass \(M\)-test so \(\tilde f\) is continuous.

  If \(g\) takes values in \(\R\), we can apply the above to the function \(\frac{1}{2} + \frac{1}{2\pi} \arctan \compose g\) which takes values in \([\frac{1}{4}, \frac{3}{4}] \subseteq [0, 1]\) to obtain an extension \(\tilde f\). If \(g\) takes values in \(\C\), we can apply this to the real and imaginary parts to obtain an extension \(\tilde f\).

  Finally define
  \[
    f(x) =
    \begin{cases}
      \tilde f(x) & |\tilde f(x)| \leq \norm g_\infty \\
      e^{i \arg \tilde f(x)} \norm g_\infty & |\tilde f(x)| \geq \norm g_\infty
    \end{cases}
  \]
  Then \(f\) is still a continuous extension.
\end{proof}

\subsection{Arzelà-Ascoli theorem}

The key object studied by functional analysis is function space. In this section we prove a theorem that answers the important question when a subset of \(C(K)\) is compact.

Since we are studying normed spaces and subspaces thereof, which are in particular metric spaces, here are several notions of compactness in metric spaces. Note that in general they are not equivalent.

\begin{definition}
  A metric space \(X\) is compact if any of the following conditions hold:
  \begin{enumerate}
  \item \(X\) has the \emph{Heine-Borel property}: any open cover of \(X\) has a finite subcover.
  \item \(X\) is \emph{sequentially compact}, i.e.\ any sequence in \(X\) has a convergent subsequence.
  \item \(X\) is \emph{complete} and \emph{totally bounded}, i.e.\ for any \(\varepsilon > 0\) there exists a finite \(\varepsilon\)-net. This is a finite set \(M \subseteq X\) such that for any \(x \in X\), there exists \(m \in M\) such that \(d(x, m) < \varepsilon\).
  \end{enumerate}
\end{definition}

\begin{proof}
  For \(1 \iff 2\) see IB Metric and Topological Spaces. \(2 \implies 3\) easily. We present here only the proof of \(3 \implies 2\). Let \((x_n) \subseteq X\) be a sequence. We want to find a convergent subsequence. Let \(M_n\) be a finite \(\frac{1}{n}\)-net for \(X\). Let \(m_1 \in M_1\) be such that \(B_1(m_1)\) contains infinitely many of the \(x_n\)'s. Let \(n_1\) be the first \(n\) such that \(x_n \in B_1(m_1)\). Given \(m_1 \in M_1, \dots\) and \(m_k \in M_k, n_1, \dots, n_k\) such that \(B_{1/j}(m_j)\) contains infinitely many points from \((x_n) \cap B_{1/i}(m_i)\) for all \(i \leq j\), and \(x_{n_\ell} \in \bigcap_{i = 1}^\ell B_{1/i}(m_i)\) for \(\ell \leq k\), let \(m_{k + 1}\) be such that \(B_{1/(k + 1)}(m_{k + 1})\) contains infinitely many points from \((x_n) \cap \bigcap_{j = 1}^k B_{1/j}(m_j)\) and \(n_{k + 1}\) be the first \(n > n_k\) such that \(x_{n_{k + 1}} \in \bigcap_{j = 1}^{k + 1} B_{1/j}(m_j)\). It follows that for \(\ell \geq k\),
  \[
    d(x_{n_k}, x_{n_\ell}) \leq d(x_{n_k}, m_k) + d(m_k, x_{n_\ell}) \leq \frac{2}{k} \to 0
  \]
  so \((x_{n_k})\) is Cauchy and thus has a convergent subsequence by completeness of \(X\).
\end{proof}

\begin{corollary}
  Let \(X\) be a complete metric space. Then \(Y \subseteq X\) is relatively compact, i.e.\ has compact closure, if and only if \(Y\) is totally bounded.
\end{corollary}

\begin{proof}
  \(Y\) is totally bounded if and only if \(\cl Y\) is totally bounded.
\end{proof}

Throughout this chapter, unless otherwise stated, we assume \(K\) is compact Hausdorff and equip \(C(K)\) with \(\norm \cdot_\infty\) norm, thus making \(C(K)\) into a Banach space, which is in particular a complete metric space.

\begin{theorem}[Arzelà-Ascoli]\index{Arzelà-Ascoli theorem}
  Let \(K\) be compact Hausdorff and \(\mathcal F \subseteq C(K)\). Then TFAE:
  \begin{enumerate}
  \item \(\mathcal F\) is relatively compact;
  \item \(\mathcal F\) is bounded and equicontinuous, i.e.\ \(\sup_{f \in \mathcal F} \norm f_\infty < \infty\) and for all \(\varepsilon > 0, x \in K\) there exists a neighbourhood \(U\) of \(x\) such that for all \(f \in \mathcal F\), \(|f(x) - f(y)| < \varepsilon\) for all \(y \in U\).
  \end{enumerate}
\end{theorem}

The generalises the fact that a subset of a finite-dimensional space is relative compact if and only if it is bounded, with the additional requirement of equicontinuity.

\begin{proof}\leavevmode
  \begin{enumerate}
  \item \(1 \implies 2\): let \(\mathcal F\) be relatively compact, i.e.\ totally bounded. Thus for any \(\varepsilon > 0\) there exists \(f_1, \dots, f_n \in \mathcal F\) such that for all \(f \in \mathcal F\),
    \[
      \min_i \norm{f - f_i} < \varepsilon
    \]
    so in particular \(\norm f \leq \varepsilon + \max_i \norm{f_i}\) for all \(f \in \mathcal F\) so \(\mathcal F\) is bounded.

    Let \(\varepsilon > 0\), \(f_1, \dots, f_n\) as above and \(x \in K\). Since the \(f_i\)'s are continuous, there exsit neighbourhoods \(U_i\) of \(x\) such that
    \[
      |f_i(x) - f_i(y)| < \varepsilon
    \]
    for \(y \in U_i\). Now let \(U = \bigcap_{i = 1}^n U_i\), which is again a neighbourhood of \(x\). For all \(y \in U\),
    \[
      |f(x) - f(y)|
      \leq |f(x) - f_i(x)| + |f_i(x) - f_i(y)| + |f_i(y) - f(y)|
      < 3\varepsilon
    \]
    where \(i\) is such that for all \(f \in \mathcal F\), \(\norm{f - f_i} < \varepsilon\). Thus \(\mathcal F\) is equicontinuous.
  \item \(2 \implies 1\): Let \(\mathcal F\) be bounded and equicontinuous. For \(\varepsilon > 0\), we construct a finite \(3\varepsilon\)-net for \(\mathcal F\). Let \(\varepsilon > 0\). For \(x \in K\), let \(U_x\) be an open neighbourhood of \(x\) such that \(|f(x) - f(y)| < \varepsilon\) whenever \(f \in \mathcal F, y \in U_x\). Since \(K\) is compact, there are \(x_1, \dots, x_n\) such that
    \[
      K = \bigcup_{i = 1}^n U_{x_i}.
    \]
    Since \(\mathcal F\) is (uniformly) bounded, the vector \((f(x_1), \dots, f(x_n)) \in \K^n\) is bounded in any norm on \(\K^n\), say \(\norm \cdot_\infty\). Thus
    \[
      F = \{(f(x_1), \dots, f(x_n)): f \in \mathcal F\} \subseteq \K^n
    \]
    is relatively compact in \(\K^n\). Thus there are \(f_1, \dots, f_m \in \mathcal F\) such that
    \[
      F' = \{(f_i(x_1), \dots, f_i(x_n)): 1 \leq i \leq m\} \subseteq \K^n
    \]
    is a finite \(\varepsilon\)-net of \(F\). Claim that moreover \(f_1, \dots, f_m\) is a finite \(3\varepsilon\)-net for \(\mathcal F\). Indeed, for \(x \in U_{x_j}\),
    \[
      |f(x) - f_i(x)|
      \leq |f(x) - f(x_j)| + |f(x_j) - f_i(x_j)| + |f_i(x_j) - f_i(x)|
      < 3 \varepsilon
    \]
    for some \(1 \leq i \leq m\) such since \(F'\) is a finite \(\varepsilon\)-net of \(F\). Thus \(\mathcal F\) is totally bounded and thus relatively compact.
  \end{enumerate}
\end{proof}

\subsection{Aside: compact operator}

\begin{definition}[compact operator]\index{compact operator}
  Let \(X, Y\) be normed spaces and \(T: X \to Y\) linear. Then \(T\) is \emph{compact} if \(\cl{T(B_1(0))}\) is compact.
\end{definition}

Equivalently, every bounded \((x_n) \subseteq X\) has a subsequence such that \((Tx_n)\) converges along that sequence.

\begin{eg}\leavevmode
  \begin{enumerate}
  \item If \(T \in B(X, Y)\) of finite rank, i.e.\ \(T(X)\) is finite-dimensional, then \(T\) is compact as \(\cl{T(B_1(0))}\) is a bounded closed set in the finite-dimensional space \(T(X)\). In fact, compact operators are generalisation of matrices in the sense that every compact operator is the uniform limit of finite rank operators.
  \item If \(\dim X = \infty\) then \(\id: X \to X\) is not compact as \(\cl{B_1(0)} = \cl B_1(0)\) is not compact.
  \item Let \(K = [0, 1]\). Consider \(C^1([0, 1])\) with \(\norm f_{C^1} = \norm f_\infty + \norm{f'}_\infty\) and \(C^0([0, 1])\) with \(\norm f_{C^0} = \norm f_\infty\). Then the embedding \(\iota: C^1([0, 1]) \to C^0([0, 1])\) is compact. Indeed, let
    \[
      \mathcal F = \{f \in C^1([0, 1]): \norm f_\infty + \norm{f'}_\infty < 1 \} = B_1(0) \subseteq C^1([0, 1])
    \]
    then \(\iota(\mathcal F)\) is bounded in \(C^0([0, 1])\) and for any \(f \in \mathcal F\),
    \[
      |f(x) - f(y)|
      \leq \norm{f'}_\infty |x - y|
      \leq |x - y|
      < \varepsilon
    \]
    whenever \(|x - y| < \varepsilon\). Thus \(\iota(\mathcal F)\) is equicontinuous. So by Arzelà-Ascoli, \(\iota(\mathcal F)\) is relatively compact. \(\iota\) is compact.
  \end{enumerate}
\end{eg}

In general, if \(Y\) is a Banach space then \(T: X \to Y\) is compact if and only if \(T(B_1(0))\) is totally bounded.

\begin{theorem}
  Let \(X\) be a normed space and \(Y\) a Banach space. Then the compact operators form a closed subspace of the space \(B(X, Y)\) of bounded operators.
\end{theorem}

\begin{proof}
  There are two claims in the theorem:
  \begin{enumerate}
  \item if \(S\) and \(T\) are compact operators then so is \(S + T\),
  \item if \(T_n \to T\) where \(T_n\)'s are compact and \(T\) is bounded then \(T\) is compact.
  \end{enumerate}

  Let \((x_n) \subseteq X\) be bounded. Then there is a subsequence \(\Lambda \subseteq \N\) such that \(Sx_n \to y\) for some \(y\) as \(n \in \Lambda, n \to \infty\). Moreover, there is a further subsequence \(\Lambda' \subseteq \Lambda\) such that \(Tx_n \to z\) as \(n \in \Lambda', n \to \infty\). Then
  \[
    (S + T) x_n = S x_n + T x_n \to y + z
  \]
  as \(n \in \Lambda', n \to \infty\). \(S + T\) is compact.

  For the second claim, we need to show that \(T(B_1(0))\) is totally bounded. Let \(\varepsilon > 0\) and \(n \in \N\) be such that \(\norm{T - T_n} < \varepsilon\). Then
  \[
    T_n(B_1(0)) \subseteq \bigcup_{i = 1}^k B_\varepsilon (T_nx_i)
  \]
  for some \(x_1, \dots, x_k \in B_1(0)\) since \(T_n\) is compact. Thus
  \[
    T(B_1(0)) \subseteq \bigcup_{i = 1}^k B_{2\varepsilon} (T_n x_i) \subseteq \bigcup_{i = 1}^k B_{3 \varepsilon} (Tx_i)
  \]
  which is a finite \(\varepsilon\)-net for \(T(B_1(0))\). \(T(B_1(0))\) is totally bounded so \(T\) is compact.
\end{proof}

In particular this shows that limits of finite rank operators are compact:

\begin{corollary}
  Any limit in \(B(X, Y)\) of finite rank operators is compact.
\end{corollary}

\subsection{Application: Peano existence theorem}

Recall in IB Analysis II

\begin{theorem}[Picard-Lindelöf]
  Let \(f: \R \to \R\) be locally Lipschitz continuous. Then for any \(x_0 \in \R\) there exists a maximal interval \((T_1, T_2)\), with \(T_1 = -\infty\) and/or \(T_2 = \infty\) allowed, such that
  \[
    \label{eqn:differential equation}
    \left\{
    \begin{array}{l}
      x'(t) = f(x(t)) \\
      x(0) = x_0
    \end{array}
    \right.
    \tag{\ast}
  \]
  has a unique \(C^1\) solution \(x: (T_1, T_2) \to \R\) that is maximal, i.e.\ that is not the restriction of such a solution on a larger interval. Moreover if \(T_2 \neq \infty\), for any bounded \(K \subseteq \R\) there is \(t < T_2\) such that \(x([t, T_2)) \cap K = \emptyset\) and similarly if \(T_1 \neq -\infty\).
\end{theorem}

\begin{theorem}[Peano existence theorem]\index{Peano existence theorem}
  \label{thm:Peano existence theorem}
  Let \(f: \R \to \R\) be continuous. Then for any \(x_0 \in \R\), there is \(\varepsilon > 0\) and a solution \(x: (-\varepsilon, \varepsilon) \to \R\) to \eqref{eqn:differential equation}.
\end{theorem}

\begin{remark}
  The solution is not necessarily unique. For example take \(f(x) = \sqrt{|x|}\).
\end{remark}

\begin{lemma}[a priori bound]
  Assume that \(b > 0, M > 0\) are such that
  \[
    \label{eqn:2}
    |f(x)| \leq M \text{ for } |x - x_0| \leq b
    \tag{\dagger}
  \]
   Then if \(T \leq \frac{b}{M}\) and \(x\) is any \(C^1\) solution to \eqref{eqn:differential equation} for all \(|t| \leq T\), it follows that \(|x(t) - x_0| \leq b, |x'(t)| \leq M\).
\end{lemma}

\begin{proof}
  Assume that \(x(t)\) is a \(C^1\) solution for \(|t| \leq T' < T\) such that \(|x(t) - x_0| \leq b\). Then
  \[
    |x'(t)| = |f(x(t))| \leq M
  \]
  so
  \[
    |x(t) - x_0| = \Bigg| \int_0^t f(x(s)) ds \Bigg| \leq Mt < b
  \]
  for \(|t| \leq T'\). This allows us to extend the solution beyond \(T'\) by continuous induction. Let
  \[
    I = \{T' \in [0, T]: |x(t) - x_0| \leq b \text{ for } |t| \leq T'\}.
  \]
  Note \(I \neq \emptyset\) and that \(I\) is closed. Claim that \(\sup I = T\): otherwise \(|x(t) - x_0| < b\) for \(|t| < \sup I\) but by continuity, a neighbourhood of \(\sup I\) also has to be contained in \(I\), contradiction. Thus \(I = [0, T]\).
\end{proof}

\begin{proof}[Proof of \nameref{thm:Peano existence theorem}]
  Let
  \[
    B = \{f + \tilde g: \tilde g \in C^0, \norm{\tilde g}_\infty \leq \infty\}
  \]
  and choose \(M, b > 0\) such that \eqref{eqn:2} holds for all \(g \in B\). For any \(h \in B \cap C^1\) there is a local solution by Picard-Lindelöf. The lemma implies that these solutions are defined on all of \([-T, T]\) with \(T\) as in the lemma. Define the solution operator
  \begin{align*}
    S: B \cap C^1 &\to C^1[-T, T] \\
    f &\mapsto x
  \end{align*}
  where \(x\) is the solution to \eqref{eqn:differential equation}. By the lemma, \(S(B \cap C^1)\) is bounded in \(C^1[-T, T]\) with norm \(\norm x_\infty + \norm{x'}_\infty\). By Arzelà-Ascoli, the embedding \(C^1[-T, T] \to C^1[-T, T]\) is compact, i.e.\ \(S(B \cap C^1)\) is relatively compact in \(C^0([-T, T])\). Let \(f_i \in B \cap C^1\) such that \(f_i \to f\) in \(C^0\) (this is not obvious but it will follow from Weierstrass approximation theorem in the next section), i.e.\ \(\norm{f - f_i}_\infty \to 0\). By relative compactness there is a subsequence \(x_i = Sf_i\) converges to some \(x \in C^0[-T, T]\) with \(\norm \cdot_\infty\) norm. Claim that \(x \in C^1([-T, T])\) and \eqref{eqn:differential equation} holds.

  \begin{proof}
    Since \(f_i \to f,  x_i \to x\) in \(C^0\) (along the subsequence, we also have \(f_i \compose x_i \to f \compose x\). Thus \(x_i = f_i \compose x_i \to f \compose x\) uniformly in \(|t| \leq T\). Thus \(x \in C^1\) and \(x' = f \compose x\).
  \end{proof}
\end{proof}

\subsection{Stone-Weierstrass theorem}

\begin{theorem}[Weierstrass approximation theorem]\index{Weierstrass approximation theorem}
  \label{thm:Weierstrass approximation theorem}
  The set of polynomials with real coefficients is dense in \(C([a, b], \R)\) in the uniform topology.
\end{theorem}

The theorem follows more or less directly from the approxmation of a single function: the absolute value function. As any continuous function can be approximated uniformly by piecewise linear function.

\begin{lemma}
  \label{lem:approximation of absolute value}
  There is a sequence of polynomials \(P_n: [-1, 1] \to [0, 1]\) such that \(P_n \to |\cdot|\) uniformly on \([-1, 1]\) as \(n \to \infty\).
\end{lemma}

\begin{proof}
  We use the Babylonian method to construct square root map, which when composed with square maps gives absolute value. The idea is that if \(q: [0, 1] \to [0, 1]\) is a function with
  \[
    q(t) = \frac{1}{2}(t + q(t)^2)
  \]
  Then
  \[
    (1 - q(t))^2 = 1 - 2q(t)+ q(t)^2 = 1 - t
  \]
  so
  \[
    1 - q(t) = \sqrt{1 - t}
  \]
  which is square root up translation and have
  \[
    |t| = 1 - q(1 - t^2).
  \]
  To approximate \(q\), define polynomials
  \begin{align*}
    Q_n: [0, 1] &\to [0, 1] \\
    Q_0(t) &= 0 \\
    Q_n(t) &= \frac{1}{2}(t + Q_{n - 1}(t)^2)
  \end{align*}
  If \(Q_n\) converges to some \(q\) then \(q(t) \in [0, 1]\) and satisfies \(q(t) = \frac{1}{2}(t + q(t)^2)\). To show the sequence converges, note that for any \(t \in [0, 1]\), \(Q_{n + 1}(t) \geq Q_n(t)\). Indeed
  \[
    Q_{n + 1}(t) - Q_n(t) = \frac{1}{2} \underbrace{(Q_n(t) + Q_{n - 1}(t))}_{\geq 0} \underbrace{(Q_n(t) - Q_{n - 1}(t))}_{\geq 0 \text{ by induction}}.
  \]
  Since \(Q_n\) is an increasing function by induction from definition, the last equality implies that \(Q_{n + 1}(t) - Q_n(t)\) is an increasing function. Thus
  \[
    Q_{n + 1}(t) - Q_n(t) \leq Q_{n + 1}(1) - Q_n(1)
  \]
  so
  \[
    Q_m(t) - Q_n(t) \leq Q_m(1) - Q_n(1)
  \]
  for all \(m > n, t \in [0, 1]\). Let \(m \to \infty\), get
  \[
    0 \leq 1 - \sqrt{1 - t} - Q_n(t) \leq 1 - Q_n(1)
  \]
  by defining properties of \(q\). Thus
  \[
    \norm{1 - Q_n(t) - \sqrt{1 - t}}_\infty \leq 1 - Q_n(1) \to 0
  \]
  as \(n \to \infty\).

  Now set \(P_n(t) = 1 - Q_n(1 - t^2)\). Then \(\norm{P_n - |\cdot|}_\infty \to 0\) as \(n \to \infty\).
\end{proof}

\begin{proof}[Proof of \nameref{thm:Weierstrass approximation theorem}]
  Exercise.
\end{proof}

We now state and prove a more abstract and general version of the approximation theorem.

\begin{definition}[algebra]\index{algebra}\index{algebra!commutative}\index{algebra!unital}
  A real/complex \emph{algebra} is a real/complex vector space \(A\) with a bilinear map
  \begin{align*}
    A \times A &\to A \\
    (a, b) &\mapsto ab
  \end{align*}
  called product that is associative, i.e.\ \((ab)c = a(bc)\) for all \(a, b,c \in A\).

  If \(ab = ba\) for all \(a, b \in A\) then \(A\) is \emph{commutative}.

  If there exists \(1 \in A \setminus \{0\}\) such that \(1a = a = a1\) for all \(a \in A\) then \(A\) is \emph{unital}.
\end{definition}

\begin{definition}[normed/Banach algebra]\index{normed algebra}\index{Banach algebra}
  If an algebra \(A\) is a normed vector space such that
  \[
    \norm{ab} \leq \norm a \norm b
  \]
  for all \(a, b \in A\) then \(A\) is called a \emph{normed algebra}. If \(A\) is a Banach space then \(A\) is called a \emph{Banach algebra}.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(C(K, \R)\) is a commutative unital Banach algebra with product being pointwise multiplication and unit being the constant function \(1\).
  \item \(B(X, X)\), where \(X\) is a normed vector space, is a normed unital algebra with product being composition and unit being \(\id_X\). If \(X\) is Banach then so is \(B(X, X)\). It is noncommutative.
  \end{enumerate}
\end{eg}

\begin{theorem}[Stone-Weierstrass]\index{Stone-Weierstrass theorem}
  \label{thm:Stone-Weierstrass}
  Let \(A \subseteq C(K, \R)\) be a subalgebra that
  \begin{enumerate}
  \item separates points: for all \(x, y \in K, x \neq y\), there is \(f \in A\) such that \(f(x) \neq f(y)\),
  \item vanishes nowhere: for all \(x \in K\) there is \(f \in A\) such that \(f(x) \neq 0\).
  \end{enumerate}
  then \(A\) is dense in \(C(K, \R)\).
\end{theorem}

\begin{eg}
  Let \(U \subseteq \R^n\) be open bounded. Let \(A\) be the set of polynomials in \(x_1, \dots, x_n\). Then \(A\) is an algebra, separates points and contains the constant polynomial which vanishes nowhere. Thus Stone-Weierstrass theorem implies that \(\cl A = C(\cl U)\). In particular, \(C^\infty(\cl U)\) is dense in \(C(\cl U)\).
\end{eg}

We set up some terminologies and intermediate results before we prove the theorem. These definitions will also be useful later in this course and in other areas of maths. % check later

\begin{definition}[poset, lattice]\index{poset}\index{partial order}\index{lattice}\leavevmode
  \begin{enumerate}
  \item A \emph{partially ordered set} or \emph{poset} is a set \(P\) with a binary relation \(\leq\) such that for all \(u, v \in P\), either \(u \leq v\) or \(u \nleq v\) and is
    \begin{enumerate}
    \item reflective: \(u \leq u\),
    \item transitive: if \(u \leq v, v \leq w\) then \(u \leq w\),
    \item antisymmetric: if \(u \leq v, v \leq u\) then \(u = v\).
    \end{enumerate}
  \item A \emph{lattice} is a poset \(L\) with the property that for any \(u, v \in L\), there is a \emph{least upper bound} or \emph{join} \(u \vee v\) and a \emph{greatest lower bound} or \emph{meet} \(u \wedge v\), i.e.\
    \begin{align*}
      & u, v \leq u \vee v \text{ and if } u, v \leq b \text{ then } u \vee v \leq b, \\
      & u \wedge v \leq u, v \text{ and if } b \leq u, b \text{ then } v \leq u \wedge v.
    \end{align*}
  \end{enumerate}
\end{definition}

\begin{eg}
  \(C(K, \R)\) is a lattice (\(f \leq g\) if and only if \(f(x) \leq g(x)\) for all \(x \in K\)) and
  \begin{align*}
    (f \vee g) (x) &= \max \{f(x), g(x)\} \\
    (f \wedge g) (x) &= \min \{f(x), g(x)\}
  \end{align*}
\end{eg}

\begin{lemma}
  Let \(A \subseteq C(K, \R)\) be a closed subalgebra. Then \(A\) is a lattice in \(C(K, \R)\).
\end{lemma}

\begin{proof}
  We need to show that if \(f, g \in A\) then \(f \wedge g\) and \(f \vee g\) are also in \(A\).
  \begin{align*}
    (f \vee g) (x) &= \frac{1}{2} (f(x) + g(x) + |f(x) - g(x)|) \\
    (f \wedge g) (x) &= \frac{1}{2} (f(x) + g(x) - |f(x) - g(x)|)
  \end{align*}
  so suffices to show that if \(f \in A\) then \(|f| \in A\). Let \(f \in A, f \neq 0, \varepsilon > 0\). Replacing \(f\) by \(f/\norm f_\infty\) we may assume that \(f\) takes values in \([-1, 1]\). By \Cref{lem:approximation of absolute value} there is a polynomial \(P: [-1, 1] \to [0, 1]\) such that \(\norm{P - |\cdot|}_\infty \leq \varepsilon\). Then \(\norm{P \compose f - |f|}_\infty \leq \varepsilon\). Since \(P \compose f \in A\) and \(A\) is closed, have \(|f| \in A\).
\end{proof}

\begin{lemma}
  \label{lem:lattice}
  Let \(L \subseteq C(K, \R)\) be a sublattice. If \(g \in C(K, \R)\) is such that for all \(\varepsilon > 0\), for all \(x, y \in K\), exists \(f \in L\) such that
  \[
    \label{eqn:lattice}
    \left\{
      \begin{array}{l}
        |f(x) - g(x)| < \varepsilon \\
        |f(y) - g(y)| < \varepsilon
      \end{array}
    \right.
    \tag{\ast}
  \]
  then \(g \in \cl L\). In particular, if this condition holds for all \(g \in C(K, \R)\) then \(\cl L = C(K, \R)\).
\end{lemma}

\begin{proof}
  Let \(g \in C(K, \R)\) be as in the assumption and \(\varepsilon > 0\). We construct \(f \in L\) such that \(\norm{f - g} < \varepsilon\). For \(x, y \in K\), let \(f_{xy}\) be \(f\) in \eqref{eqn:lattice}. By continuity, the sets
  \begin{align*}
    U_{xy} &= \{z \in K: f_{xy}(z) < g(z) + \varepsilon\} \\
    V_{xy} &= \{z \in K: f_{xy}(z) > g(z) - \varepsilon\}
  \end{align*}
  are open and \(\{x, y\} \subseteq U_{xy} \cap V_{xy}\). For any \(x\), \(\{U_{xy}\}_y\) is a cover of \(K\) so by compactness there are \(y_1, \dots, y_n\) such that \(\bigcup_{i = 1}^n U_{xy_i} = K\). Define
  \begin{align*}
    V_x &= \bigcap_{i = 1}^n V_{xy_i} \\
    f_x &= \bigwedge_{i = 1}^n f_{xy_i} \in L
  \end{align*}
  then
  \begin{align*}
    f_x(y) &< g(y) + \varepsilon \text{ for all } y \in K \\
    f_x(y) &> g(y) - \varepsilon \text{ for all } y \in V_x
  \end{align*}
  Now \(\{V_x\}_x\) is an open cover of \(K\). Choose finitely many \(x_1, \dots, x_m\) such that \(K = \bigcup_{j = 1}^m V_{x_j}\) by compactness. Set
  \begin{align*}
    f = \bigvee_{j = 1}^m f_{x_j} \in L
  \end{align*}
  so
  \begin{align*}
    f(y) &< g(y) + \varepsilon \text{ for all } y \in K \\
    f(y) &> g(y) - \varepsilon \text{ for all } y \in K
  \end{align*}
  so \(|f(y) - g(y)| < \varepsilon\) for all \(y \in K\).
\end{proof}

\begin{proof}[Proof of \nameref{thm:Stone-Weierstrass}]
  By continuity of addition and multiplication, the closure \(\cl A\) is a closed subalgebra of \(C(K, \R)\) so is a lattice. Let \(g \in C(K, \R), x, y \in K\). We will find \(f \in A\) such that \(f(x) = g(x)\) and \(f(y) = g(y)\). In particular, \eqref{eqn:lattice} in \Cref{lem:lattice} holds.

  By assumption \(A\) vanishes nowhere and separates points, i.e.\
  \begin{align*}
    & \forall x \in K, \exists f_x \in A \text{ such that } f_x(x) \neq 0 \\
    & \forall x, y \in K, \exists f_{xy} \in A \text{ such that } f_{xy}(x) \neq f_{xy}(y)
  \end{align*}
  Claim that for all \(x \neq y\), there are \(\alpha, \beta, \gamma \in \R\) such that \(h = \alpha f_x + \beta f_y + \gamma f_{xy}\) satisfies
  \[
    h(x) \neq 0, h(y) \neq 0, h(x) \neq h(y).
  \]
  Indeed if \(f_{xy}(x) \neq 0\) and \(f_{xy}(y) \neq 0\) then we can take \(h = f_{xy}\). Otherwise wlog \(f_{xy}(y) = 0\) and by rescaling we can assume
  \[
    f_{xy}(x) = 1, f_{xy}(y) = 0, f_y(x) = C, f_y(y) = 1
  \]
  so take
  \[
    \alpha = 0, \beta = 1, \gamma = 2 - C.
  \]
  This gives the claim since
  \begin{align*}
    h(x) &= C + 2 - C = 2 \\
    h(y) &= 1
  \end{align*}
  We find that \((h(x), h(y)), (h(x)^2, h(y)^2) \in \R^2\) are linearly independent. Then there are \(s, t \in \R\) such that
  \[
    (g(x), g(y)) = t (h(x), h(y)) + s (h(x)^2, h(y)^2) = (f(x), f(y))
  \]
  with \(f = th + sh^2 \in A\). \eqref{eqn:lattice} holds for any \(g \in C(K, \R)\), thus completing the proof.
\end{proof}

\begin{eg}
  Let \(K \subseteq \R^n\) be compact. Then \(C(K)\) is separable, i.e.\ there is a countable dense set (given by polynomial with rational coefficients). Then by Stone-Weierstrass theorem we can approximate continuous functions on \(K\) by this set.

  In example sheet 3, we will show that given \(K\) compact Hausdorff, \(C(K)\) is separable if and only if \(K\) is metrisable.
\end{eg}

\begin{eg}
  Let \(K\) and \(L\) be compact. Then \(A \subseteq C(K \times L)\) consisting of functions of the form
  \begin{align*}
    K \times L &\to \R \\
    (x, y) &\mapsto \sum_{i = 1}^n f_i(x) g_i(y)
  \end{align*}
  where \((f_i) \subseteq C(K), (g_i) \subseteq C(L)\), is an algebra that separates points and vanishes nowhere. Thus \(\cl A = C(K \times L)\). In particular if \((f_i) \subseteq C(K), (g_i) \subseteq C(L)\) are dense sequences then functions of the form \((x, y) \mapsto \sum_{i = 1}^n f_i(x)g_i(y)\) are dense in \(C(K \times L)\).
\end{eg}

\begin{corollary}
  For every \(f \in C([0, 1] \times C[0, 1])\), have
  \[
    \int_0^1 \int_0^1 f(x, y) dx dy = \int_0^1 \int_0^1 f(x, y) dy dx.
  \]
\end{corollary}

\subsection{Complex Stone-Weierstrass theorem}

\begin{theorem}[complex Stone-Weierstrass]\index{Stone-Weierstrass theorem!complex}
  Let \(A \subseteq C(K, \C)\) be a subalgebra such that
  \begin{enumerate}
  \item \(A\) separates points,
  \item \(A\) vanishes nowhere,
  \item \(A\) is closed under complex conjugation, i.e.\ \(\conj f \in A\) if \(f \in A\)
  \end{enumerate}
  then \(\cl A = C(K, \C)\).
\end{theorem}

This is important in spectral theory, which we'll get back to in the last bit of the course.

\begin{definition}[\(C^*\)-algebra]\index{\(C^*\)-algebra}
  A \emph{\(C^*\)-algebra} is a complex unital Banach algebra \(A\) with an antilinear involution \(a \mapsto a^*\) satisfying
  \begin{align*}
    (ab)^* & = b^*a^* \\
    1^* &= 1 \\
    (\lambda a)^* &= \conj \lambda a^* \\
    \norm{a^*} &= \norm a
  \end{align*}
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(C(K, \C)\) is a commutative \(C^*\)-algebra with \(f^* = \conj f\).
  \item \(B(H, H)\) with \(H\) a Hilbert space is a \(C^*\)-algebra. We will introduce Hilbert space formally in the next chapter.
  \end{enumerate}
\end{eg}

\begin{corollary}
  If \(A \subseteq C(K, \C)\) is a \(C^*\)-subalgebra that separates points then \(\cl A = C(K, \C)\).
\end{corollary}

\begin{proof}
  The main observation is that if \(f \in A\) then
  \begin{align*}
    \Re f &= \frac{1}{2} (f + \conj f) \in A \\
    \Im f &= \frac{1}{2i} (f - \conj f) \in A
  \end{align*}
  Let \(A_\R\) be the subalgebra of \(C(K, \R)\) generated by \(\Re f, \Im f\) for \(f \in A\). Then \(A_\R\) vanishes nowhere and separates points since \(A\) does, so the real version Stone-Weierstrass theorem implies that \(\cl A_\R = C(K, \R)\). Let \(f = u + iv \in C(K, \C)\) where \(U, v \in C(K, \R)\). There are \((u_j) \subseteq A_\R, (v_j) \subseteq A_\R\) such that \(u_j \to u, v_j \to v\). Since \(u_j + iv_j \in A\), \(\cl A = C(K, \C)\).
\end{proof}

\begin{eg}[Hardy space]\index{Hardy space}
  One may wonder if closure under complex conjugation is necessary. Consider \(K = \{z \in \C: |z| \leq 1\}\), the closed unit disk. Then
  \[
    A = \{f \in C(K, \C): f \text{ analytic on } K\}
  \]
  is an algebra. It separates points and vanishes nowhere. But \(\cl A \neq C(K, \C)\) since \(z \mapsto \conj z\) is not in \(\cl A\).
\end{eg}

\begin{eg}
  Let \(\mathbb T = \R/2\pi\Z\) be the circle, i.e.\ the interval \([-\pi, \pi]\) with end points identified. Let \(A\) be the subspace in \(C(\mathbb T, \C)\) spanned by \(\{e^{inx}\}_{n \in \Z}\). Its elements are called \emph{trigonometric polynomials}\index{trigonometric polynomial}. \(A\) is a \(C^*\)-subalgebra, separates points and contains the constants so vanishes nowhere. It is also closed under complex conjugation since \(\cl{e^{inx}} = e^{-inx}\) so \(\cl A = C(\mathbb T, \C)\) by complex Stone-Weierstrass theorem.
\end{eg}

\begin{eg}
  On example sheet 3 we'll show that there exists \(f \in C(\mathbb T)\) such that \(S_nf(0) \nto f(0)\) where \(S_nf\) is the partial Fourier sum given by the \emph{Dirichlet sum}\index{Dirichlet sum}
  \[
    S_nf = \sum_{k = -n}^n \hat f_k e^{ikx}
  \]
  where
  \[
    \hat f_k = \frac{1}{2\pi} \int_{-\pi}^\pi f(x) e^{-ikx} dx.
  \]
  This does \emph{not} contradict the previous observation. The moral is that the trigonometric polynomials that provide a uniform approximation to a given \(f \in C(\mathbb T)\) cannot always be taken to be the partial Fourier sum!
\end{eg}

However, we can deduce that the partial Fourier sum of \(f\) converges to \(f\) in \(L^2\).

\begin{proposition}
  For every \(f \in C(\mathbb T)\),
  \[
    \lim_{n \to \infty} \int_{-\pi}^\pi |f - S_nf|^2 dx = 0.
  \]
\end{proposition}

\begin{proof}
  By complex Stone-Weierstrass theorem, for any \(\varepsilon \geq 0\) there is a trigonometric polynomial \(P\) such that \(\norm{P - f} < \varepsilon\). Note that \(S_nP = P\) if \(n \geq \deg P\), where \(\deg P\) is the largest \(n\) such that \(P\) contains \(e^{\pm inx}\). Then
  \[
    |f - S_nf| \leq |f - P| + |S_nf - P| = |f - P| + |S_nf - S_n P|
  \]
  if \(\deg P \leq n\) so
  \[
    |f - S_nf|^2 \leq 2 |f - P|^2 + 2 |S_nf - S_nP|^2
  \]
  since \((a + b)^2 \leq 2a^2 + 2b^2\). Thus
  \[
    \int_{-\pi}^\pi |f - S_nf|^2 dx
    \leq 4 \int_{-\pi}^\pi |f - P|^2 dx
    \leq 8\pi \varepsilon^2
   \]
   where we used \emph{Bessel's inequality}\index{Bessel's inequality}, which we will prove in the next section, that for \(g \in C(\mathbb T)\),
   \[
     \int_{-\pi}^\pi |S_ng|^2 dx \leq \int_{-\pi}^\pi |g|^2 dx.
   \]
\end{proof}

\section{Euclidean vector spaces and Hilbert spaces}

\subsection{Definitions and examples}

\begin{definition}[inner product]\index{inner product}\index{inner product space}
  Let \(X\) be a vector space (real or complex). Then an \emph{inner product} is a map \((\cdot, \cdot): X \times X \to \K\) such that
  \begin{enumerate}
  \item (skew-)symmetric: \((x, y) = \conj{(y, x)}\) for all \(x, y \in X\),
  \item linear in first argument: \((\lambda_1x_1 + \lambda_2x_2, y) = \lambda_1(x_1, y) + \lambda_2(x_2, y)\) for all \(x_i, y \in X, \lambda_i \in \K\),
  \item positive definite: \((x, x) \geq 0\) with \((x, x) = 0\) if and only if \(x = 0\).
  \end{enumerate}

  A vector space \(X\) together with an inner product \((\cdot, \cdot)\) is called an \emph{inner product space}.
\end{definition}

\begin{remark}\leavevmode
  \begin{enumerate}
  \item In the real case \((\cdot, \cdot)\) is bilinear.
  \item In the complex case \((\cdot, \cdot)\) is antilinear in the second argument.
  \item There is an opposite convention, for example among physicists, where the role of the first and second argument is interchanged.
  \end{enumerate}
\end{remark}

\begin{proposition}[Cauchy-Schwarz]\index{Cauchy-Schwarz inequality}
  Let \(X\) be an inner product space. Then
  \[
    |(x, y)| \leq (x, x)^{1/2} (y, y)^{1/2}
  \]
  for all \(x, y \in X\) with equality if and only if \(x = \lambda y\) for some \(\lambda \in \K\).
\end{proposition}

\begin{proof}
  We may assume that \((x, x) = 1 = (y, y)\) and \((x, y) \geq 0\). Then for \(t > 0\),
  \[
    0 \leq (x - ty, x- ty) = (x, x) - 2t(x, y) + t^2(y, y) = 1 + t^2 - 2t(x, y).
  \]
  Thus
  \[
    (x, y) \leq \inf_{t > 0} \frac{1 + t^2}{2t} = 1.
  \]
\end{proof}

\begin{corollary}
  Let \(X\) be an inner product space. Then \(\norm x = (x, x)^{1/2}\) defines a norm on \(X\).
\end{corollary}

\begin{proof}
  Positive definiteness is immediate from the definition. Positive homogeneity follows from
  \[
    \norm{\lambda x} = (\lambda x, \lambda x)^{1/2} = (\lambda \conj \lambda) (x, x)^{1/2} = |\lambda| \norm x.
  \]
  For the triangle inequality, note
  \begin{align*}
    \norm{x + y}^2
    &= (x + y, x + y) \\
    &= (x, x) + (y, y) + \underbrace{(x, y) + (y, x)}_{= 2 \Re(x, y) \leq 2|(x, y)|} \\
    &\leq \norm x^2 + \norm y^2 + 2 \norm x \norm y \\
    &\leq (\norm x + \norm y)^2
  \end{align*}
\end{proof}

\begin{fact}[polarisation identities]\index{polarisation identities}
  Let \(X\) be an inner product space, \(x, y \in X\). Then
  \begin{enumerate}
  \item real version:
    \[
      (x, y) = \frac{1}{4} (\norm{x + y}^2 - \norm{x - y}^2).
    \]
  \item complex version:
    \[
      (x, y) = \frac{1}{4} (\norm{x + y}^2 - \norm{x - y}^2 + i \norm {x + iy}^2 - i \norm{x - iy}^2).
    \]
  \end{enumerate}
\end{fact}

\begin{proof}
  Trivial.
\end{proof}

\begin{corollary}
  The norm determines the inner product.
\end{corollary}

\begin{fact}[parallelogram law]
  Let \(X\) be an inner product space, \(x, y \in X\). Then
  \[
    \norm{x + y}^2 + \norm{x - y}^2 = 2 \norm x + 2 \norm y.
  \]
\end{fact}

\begin{proof}
  Ditto.
\end{proof}

\begin{ex}
  If \(X\) is a normed vector space satisfying the parallelogram law for any \(x, y \in X\), then the polarisation identity defines an inner product on \(X\), so \(X\) is also an inner product space.
\end{ex}

\begin{definition}[Euclidean]\index{normed space!Eulidean}
  A normed space is \emph{Eucldiean} if its norm is the norm associated to some inner product.
\end{definition}

By polarisation identities, such inner product is unique if exists. The exercise shows that an equivalent characterisation is parallelogram law holds.

\begin{definition}[Hilbert space]\index{Hilbert space}
  An inner product space is called a \emph{Hilbert space} if it is complete as a metric space.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(\ell^2 = \{(x_n) \subseteq \K: \sum_{n = 1}^\infty |x_n|^2 < \infty\}\) is a Hilbert space with inner product
    \[
      (x, y) = \sum_{n = 1}^\infty x_n \conj y_n.
    \]
    We will later show that this is the \emph{only} separable Hilbert space up to isometric isomorphism.
  \item \(C([0, 1])\) is an inner product space with
    \[
      (x, y) = \int_0^1 f(x) \conj{g(x)} dx.
    \]
    But it is not complete, so not a Hilbert space. This leads us to completion of inner product spaces.
  \end{enumerate}
\end{eg}

\begin{proposition}
  Let \(X\) be an inner product space. Then the completion of \(X\) is also an inner product space, thus a Hilbert space.
\end{proposition}

\begin{proof}
  Let \(\tilde X\) be the completion of \(X\). For \(x, y \in \tilde X\), choose \((x_n), (y_n) \subseteq X\) such that \(x_n \to x, y_n \to y\). Set
  \[
    (x, y) = \lim_{n \to \infty} (x_n, y_n).
  \]
  Easy to check that this definition is well-defined, that \((\cdot, \cdot)\) is an inner product, and that this iner product induces the completed norm.
\end{proof}

\begin{eg}
  The completion of \(C([0, 1])\) is a Hilbert space, denoted \(L^2([0, 1])\), which can be identified with the space of equivalence classes of Lebesgue measurable functions with \(f \sim g\) if and only if \(f = g\) Lebesgue almost everywhere.
\end{eg}

\subsection{Orthogonal complements and projections}

\begin{definition}[orthogonal, orthogonal complement]\index{orthogonal}\index{orthogonal complement}
  Let \(X\) be an inner product space.
  \begin{itemize}
  \item \(x, y \in X\) are \emph{orthogonal} if \((x, y) = 0\), also written as \(x \perp y\).
  \item The \emph{orthogonal complement} of a set \(S \subseteq X\) is
    \[
      S^\perp = \{x \in X: (x, y) = 0 \text{ for all } y \in S\}.
    \]
  \end{itemize}
\end{definition}

\begin{fact}[Pythagoras]
  If \(x, y\) are orthogonal then \(\norm{x + y}^2 = \norm x^2 + \norm y^2\).
\end{fact}

\begin{fact}
  \(S^\perp\) is a closed subspace of \(X\) and \(\cl{\spans S}^\perp = S^\perp\).
\end{fact}

\begin{proof}
  \(S^\perp = \bigcap_{y \in S} f^{-1}_y(0)\) where \(f_y(x) = (x, y)\) is continuous. Thus \(S^\perp\) is the intersection of closed sets so closed. Clearly
  \[
    S^\perp \supseteq (\spans S)^\perp \supseteq \cl{\spans S}^\perp.
  \]
  For the other direction, let \(x \in S^\perp\) and \(y \in \cl{\spans S}\), i.e.\ \(y = \lim_{n \to \infty} y_n\) with \(y_n \in \spans S\). Then
  \[
    (x, y) = \lim_{n \to \infty} (x, y_n) = 0
  \]
  so \(x \in \cl{\spans S}^\perp\).
\end{proof}

\begin{notation}
  For \(Y \subseteq X\) a subspace, \(Y^\perp \cap Y = 0\). Thus the sum \(Y + Y^\perp\) is direct and write \(Y + Y^\perp = Y \oplus Y^\perp\).
\end{notation}

\begin{eg}
  From linear algebra we know if \(X\) if finite-dimensional then \(X = Y \oplus Y^\perp\). However this is generally false for infinite diemsnional inner product space. Let \(X = C[0, 1]\) with \((f, g) = \int_0^1 f \conj g dx\) and \(Y = C^1[0, 1] \subseteq C[0, 1]\). Then \(Y^\perp = 0\) since \(\int_0^1 f \conj g dx = 0\) for all \(g \in C^1\) implies \(f = 0\) (as \(f \in C[0, 1]\)).
\end{eg}

\begin{theorem}
  \label{thm:orthogonal decomposition}
  Let \(Y \subseteq X\) be a complete subspace. Then
  \[
    X = Y \oplus Y^\perp.
  \]
  Moreover, given \(x \in X\), its unique decomposition \(x = x_\parallel + x_\perp\) where \(x_\parallel \in Y, x_\perp \in Y^\perp\) is characterised by
  \[
    \norm{x_\perp} = \norm{x - x_\parallel} = \inf_{y \in Y} \norm{x - y}.
  \]
\end{theorem}

In particular this holds if \(X\) is a Hilbert space and \(Y \subseteq X\) is a closed subspace.

\begin{proof}
  Let \(x \in X\) and \(D = \inf_{y \in Y} \norm{x - y}\). Choose any sequence \((y_k) \subseteq Y\) such that \(|y_k - x| \to D\). Claim that \((y_k)\) is Cauchy: by the parallelogram identity applied to \(x - y_j, x - y_k\),
  \[
    \norm{y_j - y_k}^2 + \norm{2x - y_j - y_k}^2 = 2 \norm{x - y_j}^2 + 2 \norm{x - y_k}^2.
  \]
  Rearrange,
  \begin{align*}
    \norm{y_j - y_k}^2
    &= 2 \underbrace{\norm{x - y_j}^2}_{\to D^2} + 2 \underbrace{\norm{x - y_k}^2}_{\to D^2} - 4 \underbrace{\norm{x - \frac{1}{2}(y_j + y_k)}^2}_{\geq D^2} \\
    &\leq 4(D^2 + \varepsilon) - 4D^2 \\
    &= 4\varepsilon
  \end{align*}
  for all \(\varepsilon > 0\) for all \(j, k\) sufficiently large. By completeness of \(Y\), the claim implies that \(y_j \to x_\parallel\) for some \(x_\parallel \in Y\). By continuity of norm \(\norm{x - x_\parallel} = D\).

  Now let \(x_\perp = x - x_\parallel\). Have to show that \(x_\perp \in Y^\perp\). Suppose not, then there must by \(\tilde y \in Y\) such that \((\tilde y, x_\perp) > 0\). Thus
  \begin{align*}
    \norm{x_\perp - t \tilde y}^2
    &= \norm{x_\perp}^2 - 2t(x_\perp, \tilde y) + t^2 \norm{\tilde y}^2 \\
    &= D^2 - t(\underbrace{2(x_\perp, \tilde y) - t\norm{\tilde y}^2}_{> 0 \text{ for \(t > 0\) small}}) \\
    &< D^2
  \end{align*}
  But
  \[
    \norm{x_\perp - t\tilde y}^2
    = \norm{x - \underbrace{(x_\parallel + t \tilde y)}_{\in Y}}^2
    \geq D^2,
  \]
  contradiction. Thus \(x_\perp \in Y^\perp\).

  Finally to show that the decomposition is uniquely characterised by the expression, suppose \(x = \tilde x_\perp + \tilde x_\parallel\) for some \(\tilde x_\perp \in Y^\perp, \tilde x_\parallel \in Y\). Then \(\tilde x_\parallel = x_\parallel + y\) where \(y = x_\perp - \tilde x_\perp \in Y^\perp\). But \(y = \tilde x_\parallel - x_\parallel \in Y\) so \(y \in Y \cap Y^\perp = 0\).
\end{proof}

\begin{theorem}[Riesz representation theorem for Hilbert space]\index{Riesz representation theorem}
  Let \(H\) be a Hilbert space. Then for any \(\ell \in H^*\) there is a unique \(x_\ell \in H\) such that
  \[
    \ell(y) = (y, x_\ell)
  \]
  for all \(y \in H\) and \(\norm \ell = \norm{x_\ell}\).
\end{theorem}

This can be seen as a generalisation of \(\ell^2 \cong (\ell^2)^*\), as \(\ell^2\) is an inner product space and thus a Hilbert space.

\begin{proof}
  Let \(\ell \in H^*, \ell \neq 0\). Then \(\ker \ell\) is closed and and by \Cref{thm:orthogonal decomposition} we have \(H = \ker \ell \oplus (\ker \ell)^\perp\). Since \(\ell \neq 0\), \((\ker \ell)^\perp \neq 0\). Claim that there exists \(x_0 \in H\) such that \((\ker \ell)^\perp = \spans \{x_0\}\) and \(\norm{x_0} = 1\): let \(x_0 \in (\ker \ell)^\perp, \norm{x_0} = 1\). Then for any \(y \in H\),
  \[
    y = \underbrace{(y - \frac{\ell(y)}{\ell(x_0)} x_0)}_{\in \ker \ell} + \underbrace{\frac{\ell(y)}{\ell(x_0)} x_0}_{\in \spans \{x_0\} \subseteq (\ker \ell)^\perp}.
  \]
  Define \(x_\ell = \cl{\ell(x_0)} x_0\). Claim that \(\ell(x) = (x, x_\ell)\) for all \(x \in H\): if \(x \in \ker \ell\) then \(\ell(x) = 0\) and
  \[
    (x, x_\ell) = \ell(x_0) (x, x_0) = 0.
  \]
  If \(x \in (\ker \ell)^\perp\), i.e. \(x = \lambda x_0\) where \(\lambda \in \K\), \(x_0\) as above, then
  \[
    (x, x_\ell) = \lambda \ell(x_0) (x_0, x_0) = \lambda \ell(x_0) = \ell(\lambda x_0) = \ell(x).
  \]
  Since \(\ell\) and \((\cdot, x_\ell)\) are in \(H^*\) and agree on \(\ker \ell\) and \((\ker \ell)^\perp\), they also agree on \(H\). % why need boundedness/uniquenss here?

  For uniqueness, if \((x, x_\ell) = (x, \tilde x_\ell)\) for all \(x \in H\) then
  \[
    (x, x_\ell - \tilde x_\ell) = 0
  \]
  for all \(x\), in particular
  \[
    (x_\ell - \tilde x_\ell, x_\ell - \tilde x_\ell) = 0
  \]
  so \(x_\ell = \tilde x_\ell\).

  Finally for isometry,
  \[
    \norm \ell = \sup_{\norm x \leq 1} |\ell(x)| = \sup_{\norm x \leq 1} |(x, x_\ell)| = \norm{x_\ell}
  \]
  where the last equality is by taking \(x = \frac{x_\ell}{\norm{x_\ell}}\) for lower bound and Cauchy-Schwarz for upper bound.
\end{proof}

\begin{corollary}
  The map
  \begin{align*}
    H &\to H^* \\
    x &\mapsto (\cdot, x)
  \end{align*}
  is antilinear, bijective and isometric.
\end{corollary}

\begin{definition}[projection, orthogonal projection]\index{projection}\index{orthogonal projection}
  Let \(X\) be an inner product space.
  \begin{itemize}
  \item A linear operator \(P: X \to X\) is a \emph{projection} if \(P^2 = P\).
  \item A projection \(P\) is an \emph{orthogonal projection} if \(P^2 = P\) and \(P\) is self-adjoint, i.e.
    \[
      (Px, y) = (x, Py)
    \]
    for all \(x, y \in X\).
  \end{itemize}
\end{definition}

\begin{fact}
  Let \(P\) be an orthogonal projection. Then \(\norm P = 1\) or \(\norm P = 0\).
\end{fact}

\begin{proof}
  Suppose \(P \neq 0\). For any \(x \in X\) such that \(Px \neq 0\) so
  \[
    \norm{Px}
    = \frac{\norm{Px}^2}{\norm{Px}}
    = \frac{(Px, Px)}{\norm{Px}}
    = \frac{(x, P^2x)}{\norm{Px}}
    = \frac{(x, Px)}{\norm{Px}}
    \leq \norm x
  \]
  so \(\norm P \leq 1\).

  On the other hand, since \(P \neq 0\) there is \(x\) such that \(P x \neq 0\). Let \(y = Px \neq 0\) and then
  \[
    \norm{Py} = \norm{Px} = \norm y
  \]
  so \(\norm P \geq 1\).
\end{proof}

\begin{corollary}
  Let \(Y \subseteq X\) be a complete subspace. Then there is an orthogonal projection \(P: X \to X\) with
  \begin{align*}
    \im P &= Y \\
    \ker P &= Y^\perp
  \end{align*}
\end{corollary}

\begin{proof}
  Given \(x \in X\), let \(x = x_\parallel + x_\perp\) with \(x_\parallel \in Y\) and \(x_\perp \in Y^\perp\) be its orthogonal decomposition. Set \(Px = x_\parallel\). Then \(P\) is linear since given orthogonal decompositions of \(x, y \in X\), have
  \[
    \lambda x + \mu y
    = \underbrace{\lambda x_\parallel + \mu y_\parallel}_{\in Y} + \underbrace{(\lambda x_\perp + \mu y_\perp)}_{\in Y^\perp}
  \]
  so
  \[
    P(\lambda x + \mu y) = \lambda Px + \mu Py
  \]
  by uniqueness of orthogonal decomposition.

  Clearly \(P^2 = P\). Also have
  \begin{align*}
    (Px, y)
    &= (x_\parallel, y_\parallel + y_\perp) \\
    &= (x_\parallel, y_\parallel) \\
    &= (x_\parallel + x_\perp, y_\perp) \\
    &= (x, Py)
  \end{align*}
  so \(P\) is orthogonal.
\end{proof}

\begin{eg}
  Let \(X = C(\mathbb T, \C)\) with inner product
  \[
    (f, g) = \frac{1}{2\pi} \int_{-\pi}^\pi f \conj g dx.
  \]
  Then
  \begin{align*}
    S_n: X &\to X \\
    f &\mapsto \sum_{k = -n}^n \hat f_k e^{ikx}
  \end{align*}
  where \(\hat f_k = \frac{1}{2\pi} \int f(x) e^{-ikx} dx\), is the orthogonal projection with image \(Y = \spans \{e^{ikx}\}_{|k| \leq n}\) (which is finite-dimensional so complete).

  \begin{proof}
    Let \(e_k(x) = e^{ikx}\). Then \(\hat f_k = (f, e_k)\) and
    \[
      S_nf = \sum_{k = -n}^n e_k (f, e_k).
    \]
    If \(f \in Y\), i.e.\ \(f = \sum_{k = -n}^n a_ke_k\) then
    \[
      S_nf
      = \sum_{k = -n}^n e_k \left( \sum_{\ell = -n}^n a_\ell e_\ell, e_k \right)
      = \sum_{k = -n}^n e_k a_k
      = f
    \]
    as \(\{e_k\}\) is an orthonormal basis. If \(f \in Y^\perp\) the \((f, e_k) = 0\) for all \(|k| \leq n\) so \(S_nf = 0\). Thus \(S_n\) is a projection.

    \(S_n\) is also orthogonal since
    \[
      (S_nf, g) = \sum_{k = -n}^n \hat f_k (e_k, g)
      = \sum_{k = -n}^n \hat f_k \conj{(g, e_k)}
      = \sum_{k = -n}^n \hat f_k \conj{\hat g}_k
      = (f, S_ng)
    \]
    so \(S_n\) is orthogonal.
  \end{proof}
\end{eg}

\begin{corollary}
  Let \(H\) be a Hilbert space and \(S \subseteq H\). Then
  \[
    \cl{\spans S}
    = (\cl{\spans S}^\perp)^\perp
    = (S^\perp)^\perp
  \]
\end{corollary}

\begin{proof}
  First equality follows from uniqueness of orthogonal decomposition and second equality follows from fact on a previous remark. % monad? adjoint?
\end{proof}

\subsection{Orthonormal systems}

\begin{definition}[orthonormal system]\index{orthonormal system}
  Let \(X\) be an inner product space. A set \(\{e_\alpha\}_\alpha \subseteq X\) of unit vectors is an \emph{orthonormal system} if \((e_\alpha, e_\beta) = 0\) for all \(\alpha \neq \beta\). It is called \emph{maximal} if it cannot be extended to a larger orthonormal system.
\end{definition}

\begin{definition}[orthonormal basis]\index{orthonormal basis}
  Let \(H\) be a Hilbert space. Then a maximal orthonormal system is called \emph{complete orthonormal system}, an \emph{orthonormal Hilbert basis} or simply an \emph{orthonormal basis}.
\end{definition}

Note that an orthonormal basis is not a basis in the linear algebra sense.

\begin{fact}
  Let \(H\) be a Hilbert space and \(S\) an orthonormal system. Then \(S\) is an orthonormal Hilbert basis if and only if \(\cl{\spans S} = H\).
\end{fact}

\begin{proof}
  Let \(Y = \cl{\spans S}\). Then \(Y\) is complete so \(H = Y \oplus Y^\perp\). Suppose \(Y^\perp \neq 0\). Then there is \(x \in Y^\perp = S^\perp\), \(\norm x = 1\), i.e.\ \(S \cup \{x\}\) is an orthonormal system. The coverse also holds.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item In \(\ell^2\), let \(e_n = (0, \dots, 0, 1, 0, \dots)\) be the vector with \(1\) at \(n\)th coordinate. Then \(\{e_n\}_n\) is an orthonormal basis.
  \item In \(C(\mathbb T, \C)\) with the usual inner product, let \(e_n(x) = e^{inx}\). Then \(\{e_n\}_{n \in \Z}\) is a maximal orthonormal basis. They are orthonormal and their span is dense by the complex Stone-Weierstrass theorem.
  \end{enumerate}
\end{eg}

\begin{fact}[Gram-Schmidt]\index{Gram-Schmidt}
  Let \(X\) be an inner product space and \(\{x_i\}_{i = 1}^N \subseteq X\) be linearly independent, with \(N = \infty\) allowed. Then there is an orthonormal system \(\{e_i\}\) with \(\spans \{x_i\}_{i = 1}^k = \spans \{x_i\}_{i = 1}^k\) for all \(k \leq N\).
\end{fact}

\begin{proof}[Sketch of proof]
  Let \(e_1 = \frac{x_1}{\norm{x_1}}\) and given \(e_1, \dots, e_k\), set
  \[
    e_{k + 1} = \frac{x_{k + 1} - \sum_{i = 1}^k e_i(x_{k + 1}, e_i)}{\norm*{x_{k + 1} - \sum_{i = 1}^k e_i(x_{k + 1}, e_i)}}.
  \]
\end{proof}

\begin{eg}
  Let \(X = C([-1, 1], \R)\) with \((f, g) = \int_{-1}^1 fg dx\). Then \(1, t, t^2, \dots\) is a sequence with dense linear span by Stone-Weierstrass. Applying Gram-Schmidt, we obtain
  \[
    \frac{1}{\sqrt{2}}, \sqrt{\frac{3}{2}}t, \sqrt{\frac{5}{8}} (3t^2 - 1), \dots
  \]
  These are an example of \emph{orthogonal polynomials}\index{orthogonal polynomial} and called the \emph{normalised Legendre polynomials}. In fact, the \(n\)th one is a multiple of
  \[
    \frac{\mathrm d^n}{\mathrm dt^n}(t^2 - 1)^n.
  \]
\end{eg}

\begin{corollary}
  Let \(H\) be a separable Hilbert space. Then there is a countable orthonormal Hilbert basis.
\end{corollary}

Thus from now on, we will always assume orthonormal basis to be countable if \(H\) is separable.

\begin{proposition}[Bessel's inequality]\index{Bessel's inequality}
  Let \(X\) be an inner product space and \(\{e_i\}_{i = 1}^N\) an orthonormal system, with \(N = \infty\) allowed. Then
  \[
    \sum_{i = 1}^N |(x, e_i)|^2 \leq \norm x^2
  \]
  for all \(x \in X\).

  In particular if \(N = \infty\) then \((x_i) \in \ell^2\) where \(x_i = (x, e_i)\).
\end{proposition}

\begin{proof}
  By taking a limit suffice to prove the case \(N < \infty\). Define
  \[
    Px = \sum_{i = 1}^N (x_i, e_i)e_i.
  \]
  Then \(P^2 = P\) and
  \[
    (Px, y) = \sum_{i = 1}^N (x, e_i) (e_i, y) = \sum_{i = 1}^N (x, e_i) \conj{(y, e_i)} = (x, Py).
  \]
  Thus \(P\) is an orthogonal projection. Thus
  \[
    \sum_{i = 1}^N |(x, e_i)|^2 = \norm{Px}^2 \leq \norm x^2
  \]
  for all \(x \in X\).
\end{proof}

\begin{proposition}[Riesz-Fisher]\index{Riesz-Fisher theorem}
  Let \(H\) be a separable infinite-dimensional Hilbert space with orthonormal basis \(\{e_i\}_{i = 1}^\infty\). Then
  \begin{enumerate}
  \item for any \(x \in X\), set \(x_i = (x_i, e_i) \in \K\). Then \((x_i) \in \ell^2\) and
    \[
      x = \sum_{i = 1}^\infty x_ie_i.
    \]
  \item conversely, if \((x_i) \in \ell^2\) then there is \(x \in H\) such that \((x, e_i) = x_i\) for all \(i\).
  \item Parseval identity\index{Parseval identity}: for any \(x, y \in H\),
    \[
      (x, y) = \sum_{i = 1}^\infty x_i \conj y_i.
    \]
  \end{enumerate}

  In particular the map
  \begin{align*}
    \phi: H &\to \ell^2 \\
    x &\mapsto ((x, e_i))_{i = 1}^\infty
  \end{align*}
  is an isometric isomorphism.
\end{proposition}

% each choice of basis gives an isomorphism?

In fact, the concrete space \(\ell^2\) is the one studied intensively by Hilbert and indeed this theorem shows that it is a prototype for a large class of Hilbert spaces. The term ``Hilbert space'' was coined by von Neumann, in his attempt to formulate quantum mechanics.

\begin{proof}\leavevmode
  \begin{enumerate}
  \item Let \(s_n = \sum_{i = 1}^n x_ie_i\). Then \((s_n)\) is Cauchy: for \(m \geq n\),
    \[
      \norm*{s_m - s_n}^2
      = \norm*{\sum_{i = n + 1}^m x_ie_i}
      = \sum_{i = n + 1}^m |x_i|^2
      \leq \sum_{i = n + 1}^\infty |x_i|^2
      \to 0
    \]
    as \(n \to \infty\) since \((x_i) \in \ell^2\) by Bessel's inequality. By completeneess of \(H\), there is \(s \in H\) such that \(s_n \to s\). Claim that \(s = x\): for any \(i\),
    \[
      (s - x, e_i)
      = \lim_{n \to \infty} (s_n - x, e_i)
      = x_i - x_i
      = 0
    \]
    so
    \[
      s - x \in (\spans \{e_i\})^\perp
      = \cl{\spans \{e_i\}}^\perp
      = H^\perp
      = 0.
    \]
  \item If \((x_i) \in \ell^2\), the sum \(x = \sum_{i = 1}^\infty x_ie_i\) converges by the same argument. Then
    \[
      (x, e_i) = \lim_{n \to \infty} \left( \sum_{j = 1}^i x_je_j, e_i \right) = x_i.
    \]
  \item Similarly,
    \[
      (x, y) = \lim_{n \to \infty} \lim_{m \to \infty} \left( \sum_{i = 1}^n x_ie_i, \sum_{j = 1}^m y_j e_j \right) = \lim_{n \to \infty} \sum_{i = 1}^n x_i \conj y_i
    \]
    since the infinite sum converges absolutely since \((x_i), (y_i) \in \ell^2\).
  \end{enumerate}
\end{proof}

\section{Spectral theory}

Roughly speaking spetral theory studies eigenvalues of operators. From now on Banach and Hilbert spaces are complex.

\subsection{Spectrum and resolvent}

\begin{definition}[spectrum, resolvent]\index{spectrum, resolvent}
  Let \(X\) be a (complex) Banach space and \(T \in B(X) = B(X, X)\).
  \begin{itemize}
  \item The \emph{resolvent set} of \(T\) is
    \[
      \rho(T) = \{z \in \C: T - z = T - z \id \text{ is bijective and } (T - z)^{-1} \in B(X)\}.
    \]
  \item The \emph{spectrum} of \(T\) is
    \[
      \sigma(T) = \C \setminus \rho(T).
    \]
  \item The \emph{resolvent} of \(T\) is the map
    \begin{align*}
      R_T: \rho(T) &\to B(X) \\
      z &\mapsto (T - z)^{-1}
    \end{align*}
  \end{itemize}
\end{definition}

\begin{remark}
  If \(T - z\) is bounded (as in our setting) and bijective the condition \((T - z)^{-1} \in B(X)\) is automatic by open mapping theorem. For unbounded operators, which we do not discuss, it has to be included in the definition.
\end{remark}

\begin{proposition}
  \label{prop:openness of resolvent set}
  Let \(z \in \rho(T)\). Then \(\rho(T)\) contains the disk
  \[
    D = \{z \in \C: |z - z_0| \norm{R_T(z_0)} < 1\}.
  \]
  In particular \(\rho(T)\) is open, \(\sigma(T)\) is closed. Moreover the resolvent map \(R_T\) is analytic (can be represented by an absolutely convergent power series in any small enough disk).
\end{proposition}

\begin{lemma}
  Let \(T\in B(X)\) with \(\norm T \leq 1\). Then the series \(\sum_{n = 1}^\infty T_n\) converges in \(B(X)\) and
  \[
    (1 - T)^{-1} = \sum_{n = 0}^\infty T^n,
    \norm{(1 - T)^{-1}} \leq \frac{1}{1 - \norm T}.
  \]
\end{lemma}

\begin{proof}
  Basically geometric series. Form the partial sums \(S_n = \sum_{k = 0}^n T^k\). Then \((S_n)\) is a Cauchy sequence in \(B(X)\) as for \(m \geq n\),
  \[
    \norm{S_m - S_n}
    \leq \sum_{k = n + 1}^\infty \norm{T^k}
    \leq \sum_{k = n + 1}^\infty \norm T^k
    \to 0
  \]
  as \(n \to \infty\) since \(\norm T < 1\). Since \(B(X)\) is complete the limit \(S = \lim_{n \to \infty} S_n\) exists and by a similar argumet
  \[
    \norm S
    \leq \sum_{k = 0}^\infty \norm T^k
    = \frac{1}{1 - \norm T}.
  \]

  Moreover,
  \[
    S(1 - T)
    = \sum_{k = 0}^\infty T^k = \sum_{k = 0}^\infty T^k - \sum_{k = 1}^\infty T^k = \id.
  \]
\end{proof}

\begin{proof}[Proof of \Cref{prop:openness of resolvent set}]
  For \(z \in D\),
  \[
    T - z
    = (T - z_0) - (z - z_0)
    = (T - z_0) (\id - \underbrace{R_T(z_0) (z - z_0)}_{\norm \cdot \leq \norm{T_R(z_0)} |z - z_0| < 1})
  \]
  so by the lemma
  \[
    (\id - R_T(z_0) (z - z_0))^{-1} = \sum_{n = 0}^\infty (z - z_0)^n R_T(z_0)^n \in B(X).
  \]
  Thus
  \[
    (T - z) = \sum_{n = 0}^\infty (z - z_0)^n R_T(z_0)^{n + 1} \in B(X)
  \]
  so \(z \in \rho(T)\). Thus \(D \subseteq \rho(T)\) and \(R_T\) is analytic on \(\rho(T)\).
\end{proof}

\begin{corollary}
  \(\sigma(T) \neq \emptyset\) and
  \[
    \sigma(T) \subseteq \{z \in \C: |z| \leq \norm T\}.
  \]
\end{corollary}

\begin{proof}
  For any \(|z| \geq \norm T\),
  \[
    - R_T(z) = \frac{1}{z} \frac{1}{1 - T/z} = \frac{1}{z} \sum_{n = 0}^\infty \frac{T^n}{z^n} \in B(X).
  \]
  Thus \(z \in \rho(T)\) and the second claim follows.

  Also \(\norm{R_T(z)} \to 0\) as \(z \to \infty\). Suppose for contradiction \(\sigma(T) = \emptyset\). Then \(R_T: \C \to B(X)\) would be entire so by Liouville's theorem (which holds when the codomain is a Banach space), it would have to be constant, thus \(0\). But this is absurd since, for example, \(-z R_T(z) \to \id\) as \(|z| \to \infty\).
\end{proof}

\subsection{Classification of spectrum}

We would like to underlike why \(T - z\) may fail to be bijective. One reason, as in finite-dimensional case, is that \(\ker(T - z) \neq 0\). But even if the kernel is trivial it may fail to be bijective. We need first a proposition.

\begin{proposition}
  Let \(X\) be a Banach space, \(Y\) a normed space and \(T \in B(X, Y)\). Then \(T^{-1} \in B(Y, X)\) if and only if \(T\) is dense in \(Y\) and \(T\) is bounded below, i.e.\ exists \(\varepsilon > 0\) such that for all \(x \in X\), \(\norm{Tx} \geq \varepsilon \norm x\).
\end{proposition}

% left inverse

\begin{proof}
  The only if direction is immediate. Thus assume that \(T \in B(X, Y)\) is such that \(\im T\) is dense and \(T\) is bounded below. Since \(T\) is bounded below \(T\) is injective so bijective and onto its image. Let \(S: \im T \to X\) be its inverse. Since \(T\) is bounded below, \(S\) is bounded. Since \(\im T\) is dense in \(Y\) and \(X\) is complete, \(S\) extends uniquely to a map \(\tilde S: Y \to X\). Moreover \(\tilde S \in B(Y, X)\) and for any sequence \(y_k \to y, y_k \in \im T\),
  \[
    T \tilde S y = \lim_{k \to \infty} TS y_k = \lim_{k \to \infty} y_k = y
  \]
  so \(\tilde S = T^{-1}\).
\end{proof}











\section{Hahn-Banach theorem*}

When can one extend a bounded linear map defined on some \(Y \subseteq X\) onto \(X\)? Naturally we require the extension of a bounded map to be bounded. In fact we do things slightly more generally.

\begin{definition}[sublinear map]\index{sublinear map}
  Let \(X\) be a real vector space. A map \(\rho: X \to \R\) is \emph{sublinear} if
  \begin{enumerate}
  \item \(\rho(\alpha x) = \alpha \rho(x)\) for all \(x \in X, \alpha \geq 0\).
  \item \(\rho(x + y) \leq \rho(x) + \rho(y)\) for all \(x, y \in X\).
  \end{enumerate}
\end{definition}

\begin{eg}
  Any norm is sublinear.
\end{eg}

\begin{theorem}[Hahn-Banach]\index{Hahn-Banach theorem}
  \label{thm:Hahn-Banach}
  Let \(X\) be a real vector space and \(Y\) a subspace of \(X\). Let \(\rho: X \to \R\) be sublinear, \(g: Y \to \R\) linear such that \(g(x) \leq \rho(x)\) for all \(x, y \in Y\). Then there exists \(f: X \to \R\) linear such that \(f|_Y = g\) and \(f(x) \leq \rho(x)\) for all \(x \in X\).
\end{theorem}

\begin{proof}[Proof if \(Y\) has codimension \(1\) in \(X\)]
  Suppose \(Y\) has codimension \(1\), i.e.\ there exists \(x_1 \in X \setminus Y\) such that
  \[
    X = \spans X \cup \{x_1\} = Y \oplus \R x_1.
  \]

  We'll find \(\alpha \in \R\) such that
  \begin{align*}
    f_\alpha: X &\to \R \\
    x + tx_1 &\mapsto g(x) + t \alpha
  \end{align*}
  where \(x \in Y\), is the required extension. We take
  \[
    \alpha = \sup_{x \in Y} (g(x) - \rho(x - x_1)).
  \]
  and show \(f = f_\alpha\) works. Claim first that \(\alpha < \infty\): by linearity of \(g\) and sublinearity of \(\rho\), for all \(x, y \in Y\),
  \[
    g(x) + g(y) = g(x + y) \leq \rho(x + y) \leq \rho(x - x_1) + \rho(y + x_1).
  \]
  Rearrange,
  \[
    g(x) - \rho(x - x_1) \leq - g(y) + \rho(y + x_1)
  \]
  which in particular implies that \(\alpha < \infty\).

  Note that \(f(x - x_1) \leq \rho(x - x_1)\) for all \(x \in Y\) by choice of \(\alpha\). Also claim that \(f(y + x_1) \leq \rho(y + x_1)\) for all \(y \in Y\):
  \[
    f(y + x_1) = g(y) + \alpha \leq \alpha \underbrace{-(g(x) - \rho(x - x_1))}_{\inf = -\alpha} + \rho(y + x_1)
  \]
  so take infimum over \(x\) and the result follows.

  With this we can extend the boundedness to all scalars: \(f(x + tx_1) \leq \rho(x + tx_1)\) for all \(t \in \R, x \in Y\): by linearity of positive homogeneity of \(\rho\), for all \(t > 0\)
  \[
    f(x \pm tx_1) = tf(\frac{x}{t} \pm x_1) \leq t \rho( \frac{x}{t} \pm x_1) = \rho(x \pm tx_1).
  \]
\end{proof}

Essentially we're done here as we can keep extending \(g\) to a larger space.. However when the codimension is not finite, there is a slight (or enormous, depending on how seriously you treat axiom of choice) issue with tethe termination of this process.

\begin{definition}[total order, maximal element]\index{total order}\index{maximal}
  Let \(P\) be a poset.
  \begin{itemize}
  \item A subset \(T \subseteq P\) is \emph{totally ordered} if for all \(x, y \in T\), either \(x \leq y\) or \(y \leq x\).
  \item An element \(m \in P\) is \emph{maximal} if for all \(x \in P\), \(m \leq x\) implies \(x = m\).
  \end{itemize}
\end{definition}

\begin{proposition}[Zorn's lemma]
  Let \(P \neq \emptyset\) be a poset such that whenever \(T\) is a totally ordered subset then there exists a least upper bound for \(T\). Then there exists a maximal element of \(P\).
\end{proposition}

Note that this easily follows from axiom of choice. For more discussion see IID Logic and Set Theory.

\begin{proof}[Proof of \nameref{thm:Hahn-Banach}]
  Let
  \[
    P = \{(N, h): N \leq X, h: N \to \R \text{ linear}, h|_Y = g, h(x) \leq \rho(x) \text{ for all } x \in N\}.
  \]
  Equip \(P\) with partial order \(\leq\) where \((N, h) \leq (N', h')\) if and only if \(N \subseteq N'\) and \(h'|_N = h\). As \((Y, g) \in P\), \(P\) is nonempty.

  To apply Zorn's lemma we need to check that every totally ordered subset has an upper bound. Let \(\{(N_i, h_i)\}_{i \in I} \subseteq P\) be totally ordered. Then let \(N = \bigcup_{i \in I} N_i\) and \(h(x) = h_i(x)\) if \(x \in N_i\). \(h\) is well-defined. Clearly \(N\) is a subspace of \(X\) and \(h(v) \leq \rho(v)\) for all \(N\) and \(h_N = g\) so \((N, h) \in P\). It is also an upper bound. Thus by Zorn's lemma, \(P\) has a maximal element \((M, f)\). We must have \(M = X\) as otherwise \((M, f)\) would not be maximal by codimension \(1\) argument.
\end{proof}

\begin{corollary}
  Let \(V\) be a normed vector space and \(W \leq V\). Let \(g \in W^*\). Then there exists \(f \in V^*\) such that \(f|_W = g\) and \(\norm f \leq \norm g\).
\end{corollary}

\begin{proof}
  If \(V\) is real then apply Hahn-Banach with \(\rho\) being norm on \(V\). The complex case is similar.
\end{proof}

\begin{corollary}
  Let \(V\) be a normed vector space and \(v \in V\). Then there exists \(f_v \in V^*\) such that \(\norm{f_v} = 1, f_v(v) = \norm v\).

  Such an \(f_v\) is called a \emph{support functional}\index{support functional} for \(f\).
\end{corollary}

In particular this implies that the dual of any nontrivial normed space is nontrivial.

\begin{proof}
  Let \(W\) be the span of \(v\) and define
  \begin{align*}
    g: W &\to \R \\
    tv &\mapsto t \norm v
  \end{align*}
  Then \(\norm g = 1, g(v) = \norm v\). Extend \(g\) to \(f_v\) by Hahn-Banach gives desired element of \(V^*\).
\end{proof}

\begin{corollary}
  Let \(V\) be a normed vector space and \(v \in V\). If \(f(v) = 0\) for all \(f \in V^*\) then \(v = 0\).
\end{corollary}

\printindex
\end{document}

% http://www.statslab.cam.ac.uk/~rb812/teaching/la2018/index.html