\documentclass[a4paper]{article}

\def\npart{IB}

\def\ntitle{Analysis II}
\def\nlecturer{J.\ Rasmussen}

\def\nterm{Michaelmas}
\def\nyear{2017}

\input{header}

\newcommand*{\riem}[1]{\mathcal{#1}}
\newcommand*{\D}{\mathcal{D}}

\theoremstyle{definition}
\newtheorem*{joke}{Joke}

\begin{document}

% TODO: rewrite \norm
% TODO: plot simple functions



\input{titlepage}

\tableofcontents

\setcounter{section}{-1}

\section{Introduction}

In IA Analysis I, the primary space we are interested in is \(\R\) and we studied notions such as continuity, convergence, differentiation, integration and solving equaiton through, for example, Intermediate Value Theorem. In Analysis II, we moved to the study general function space.

\begin{table}[htbp]
  \centering
  \begin{tabular}{|p{0.2\textwidth}|p{0.35\textwidth}|p{0.35\textwidth}|}
    \hline
    & $\mathbb{R}^m$ & Function space \\ \hline
    Convergence \& continuity & $\checkmark$ & $\checkmark$ \\ \hline
    Differentiation & $\checkmark$ & Calculus of variations \\ \hline
    Integration & Probability and measure & ??? (ask physicists) \\ \hline
    Solving equations & inverse function theorem & existence of solutions for ODEs \\ \hline
  \end{tabular}
  \caption{Comparison of Euclidean space and function space}
\end{table}

\section{Normed Vector Spaces}

A motivating example: if $(a_n)$ is a sequence of real numbers, then $(a_n)\to a$ if
\[
  \forall \varepsilon>0,\exists N s.t. \forall n>N, |a_n-a|<\varepsilon.
\]
Now if I replace $\mathbb{R}$ by a real vector space $V$, what do I replace $|\cdot|$ with?

\begin{definition}[Norm]
  If $V$ is a real vector space, a \emph{norm} on $V$ is a function $\|\cdot\|:V\to\mathbb{R}$ satisfying
  \begin{enumerate}
  \item $\forall \V v \in V, \|\V v\| \geq 0$ with equality if and only if $\V v =\V 0$.
  \item $\forall \V v,\forall \lambda \in \R, \|\lambda \V v\| = |\lambda| \|\V v\|$
    \item $\forall \V v,\V w\in V, \|\V v+\V w\| \leq \|\V v\| + \|\V w\|$ (triangle inequality).
  \end{enumerate}
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item $V= \mathbb{R}^m, \V v = (v_1,\ldots,v_m)$,
    \begin{enumerate}
    \item $\|\V v\| = (\sum_{i=1}^m v_i^2)^{1/2}$, the Euclidean norm,
    \item $\|\V v\|_\infty = \max |v_i|$, the max norm,
      \item $\|\V v\|_1 = \sum_{i=1}^m |v_i|$.
    \end{enumerate}
  \item $V=C[0,1]$,
    \begin{enumerate}
    \item $\|f\|_\infty=\max_{x\in[0,1]} |f(x)|$,
    \item $\|f\|_2=(\int_0^1 f(x)^2 dx)^{1/2}$, which comes from $\langle f,g\rangle = \int_0^1f(x)g(x) dx$,
      \item $\|f\|_1=\int_0^1|f(x)| dx$, the $L^1$ norm.
    \end{enumerate}
  \end{enumerate}
\end{eg}

\begin{definition}[Convergence]
  Suppose $(V, \|\cdot\|)$ is a normed vector space and $(\V v_n)$ is a sequence of elements of $V$. We say $(\V v_n)$ \emph{converges} to $\V v\in V$, denoted $(\V v_n)\to \V v$, if $\forall\varepsilon>0,\exists N s.t. \forall n>N, \|\V v_n-\V v\|<\varepsilon$. Equivalently, $(\V v_n)\to \V v$ if $(\|\V v_n-\V v\|)\to 0$.
\end{definition}

\begin{ex}
  Suppose $V=\mathbb{R}^m, (\V v_n) = (v_{n,1},\ldots,v_{n,m})$. Then $(\V v_n)\to \V v$ with respect to $\|\cdot\|_\infty$ means
  \begin{align*}
    & \left( \max_{1\leq i \leq m}|v_{n,i}-v_i| \right) \to 0 \\
    \Longleftrightarrow & (|v_{n,i}-v_i|)\to 0 \text{ for all } 1\leq i\leq m \\
    \Longleftrightarrow & (v_{n,i})\to v_i \text{ for all } 1\leq i\leq m
  \end{align*}

   The convergence with respect to $\|\cdot\|_1$ means
   \begin{align*}
     & \left( \sum_{i=1}^m |v_{n,i}-v_i| \right) \to 0 \\
     \Longleftrightarrow & \left( |v_{n,i}-v_i \right)\to 0 \text{ for all } 1\leq i\leq m \\ 
    \Longleftrightarrow & (v_{n,i})\to v_i \text{ for all } 1\leq i\leq m.
  \end{align*}
\end{ex}

\begin{remark}
  Two different norms, same notion of convergence.
\end{remark}

\begin{convention}
  If I say $(\V v_n)\to \V v$ where $(\V v_n)$ is a sequence in $\mathbb{R}^m$ without specifying the norm, I mean w.r.t. $\|\cdot\|_1,\|\cdot\|_2,\|\cdot\|_\infty$. (all give the same notion for convergence).
\end{convention}

\begin{eg}\label{eg:fdown}
  $V=C[0,1]$,
  \[
    f_n(x) =
    \begin{cases}
      1-nx & x\in[0,1/n] \\
      0 & x\geq 1/n
    \end{cases}
  \]
  Then $\|f_n\|_1=\int_0^1|f_n(x)| dx=\frac{1}{2n}\to 0$ so $(f_n)\to 0$ w.r.t. $\|\cdot\|_1$.

  But $\|f_n\|_\infty=1$ so $(\|f_n\|_\infty) \nto 0$ i.e.\ $(f_n) \nto 0$ w.r.t. $\|\cdot\|_\infty$.
\end{eg}

\begin{remark}
  Two different norms, two different notions of convergence.
\end{remark}

\subsection{Continuity}

\begin{definition}[Continuity]
  Suppose $V$ and $W$ are normed vector spaces. We say a function $f:V\to W$ is \emph{continuous} if
  \[
    (f(\V v_n))\to f(\V v) \text{ in } W \text{ whenever } (\V v_n)\to \V v \text{ in } V.
  \]
  
\end{definition}

\begin{eg}\leavevmode
  \label{eg:continuity}
  \begin{enumerate}
  \item $f:V\to \mathbb{R}^m, f(\V v) = (f_1(\V v), \ldots, f_m(\V v))$ is continuous if and only if $f_i:V\to \mathbb{R}$ is continuous for all $1\leq i \leq m$.
  \item $\rho_i:\mathbb{R}^m\to \mathbb{R}, \rho_i(\V v) =v_i$ is continuous.
  \item $F:C[0,1]\to\mathbb{R}, F(f)=f(0)$,
    \begin{enumerate}
    \item If $(f_n)$ is the sequence from example~\ref{eg:fdown}, then $F(f_n)=1$. Now $(f_n)\to \V 0$ w.r.t. $\|\cdot\|_1$. But $(F(f_n))\nrightarrow 0=F(\V 0)$. So $F$ is not continuous w.r.t. $\|\cdot\|_1$.
      \item If $(g_n)\to g$ w.r.t. $\|\cdot\|_\infty$, then $(\max|g_n(x)-g(x)|)\to 0$ so $(|g_n(0)-g(0))|\to 0$, $(|F(g_n)-F(g)|)\to 0$, so $F(g_n)\to F(g)$.
    \end{enumerate}
    $F$ is continuous w.r.t. $\|\cdot\|_\infty$ but not w.r.t. $\|\cdot\|_1$.
  \item If $f:V_1\to V_2$ and $g:V_2\to V_3$ are continuous then $g\compose f: V_1\to V_3$ are continuous.
    \begin{proof}
      If $(\V v_n) \to (\V v)$ in $V_1$ , then as $f$ is continuous, $(f(\V v_n)) \to (f(\V v))$, then as $g$ is continuous, $(g(f(\V v_n))) \to (g(f(\V v)))$ in $V_3$.
    \end{proof}
  \item $\|\cdot\|: V \to \R$ is continuous.
    \begin{proof}
      If $(\V v_n)\to \V v$, then $(\|\V v_n - \V v\|) \to 0$. Now
    \[
      0 \leq |\|\V v_n\| - \|\V v\|| \leq \|\V v_n - \V v\|
    \]
    by Lemma~\ref{lem:alternate triangle}. So $(|\|\V v_n - \V v\||) \to 0$ by squeeze rule, i.e.\ $\|\V v_n\| \to \|\V v\|$.
  \end{proof}
  \end{enumerate}
\end{eg}

\begin{lemma}[Reverse triangle inequality]
  \label{lem:alternate triangle}
  $\|\V v- \V w\| \geq |\|\V v\| - \|\V w\||$ for all $\V v, \V w \in V$.
\end{lemma}

\begin{proof}
  By triangle inequality, $\|\V v- \V w\| - \|\V w\| \geq \|\V v \|$ so $\|\V v - \V w\| \geq \|\V w - \V v\| \geq \|\V w - \V v\|$.
\end{proof}

More generally, if $X\subseteq V$ is a subset, we say $f:X\to W$ is continuous if
\[
  (f(\V x_n)) \to f(\V x)
\]
in $W$ whenever $(\V x_n) \to \V x$ in $V$ for $\V x$ and all $\V x_n \in X$.

\begin{eg}
  $f:\R \setminus \{0\} \to \R, x \mapsto \frac{1}{x}$ is continuous.
\end{eg}

\subsection{Open and Closed Subsets}

Let $(V, \|\cdot\|)$ be a normed vector space.

\begin{definition}[Open and closed ball]
  If $\V v_0 \in V$ and $r \in \R$,
  \[
    B_r(\V v_0) = \{\V v\in V: \|\V v - \V v_0\| < r \}
  \]
  is the \emph{open ball} of radius $r$ centred at $\V v_0$, and
  \[
    \cl B_r(\V v_0) = \{\V v\in V: \|\V v - \V v_0\| \leq r \}
  \]
  is the \emph{closed ball} of radius $r$ centred at $\V v_0$.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item $(V, \|\cdot\|) = (\R, |\cdot|)$, then
    \begin{align*}
      B_r(a) &= (a-r, a+r) \\
      \cl B_r(a) &= [a-r, a+r] 
    \end{align*}
  \item $V=\R^2$, then $\cl B_1(\V 0)$ with respect to \texttt{to be filled in}.
\item $V = \R^3, \|\cdot\|_2$ is the ``three-dimensional ball''.
\item $(V, \|\cdot\|) = (C[0,1], \|\cdot\|_\infty)$,
  \[
    \cl B_r(f) = \{g\in C[0,1]: f(x)-r \leq g(x) \leq f(x) + r \: \forall x \in [0,1]\}.
  \]
  \end{enumerate}
\end{eg}

\begin{proposition}[Alternate characterisation of continuity]
  $f:V\to W$ is continuous if and only if
  \begin{equation}
    \label{eqn:alternate continuity}
    \forall \V v_0 \in V, \forall \varepsilon>0, \exists \delta>0 s.t. \|\V v- \V v_0\| < \delta \Rightarrow \|f(\V v) - f(\V v_0)\| < \varepsilon
    \tag{$\ast$}
    \end{equation}
  i.e.\ 
  \[
    f(B_\delta(\V v_0)) \subseteq B_\varepsilon(f(\V v_0)).
    \]
\end{proposition}

\begin{proof}
  Suppose \eqref{eqn:alternate continuity} holds. Given $(v_n)\to v$, must show $(f(v_n))\to f(v)$. Given $\varepsilon>0$, pick $\delta$ such that $(f(B_\delta(v))\subseteq B_\epsilon(f(v))$. Since $(v_n)\to (v)$, exists $N$ such that whenever $n>N$, $\|v_n - v\| < \delta$, i.e.\ $v_n \in B_\delta(v)$, so $f(v_n) \in B_\epsilon(f(v))$. In other words, whenever $n>N$, $\|f(v_n)-f(v)\| <\varepsilon$.

  Suppose \eqref{eqn:alternate continuity} does not hold. Then exists some $v \in V$ and $\varepsilon>0$ such that there is no $\delta>0$ with $f(B_\delta(v)) \subseteq B_\varepsilon(f(v))$. In particular $f(B_{1/n}(v)) \nsubseteq B_\varepsilon(f(v))$ for all $n$. Pick $v_n \in B_{1/n}(v)$ with $f(v_n) \notin B_\varepsilon(f(v))$. Then $(v_n)\to v$, but $(f(v_n)) \nto f(v)$, since $\|f(v_n) - f(v) \| \geq \varepsilon$ for all $n$. $f$ is not continuous.
\end{proof}

\begin{definition}[Open subset]
  $U \subseteq V$ is an \emph{open subset} of $V$ if for every $u \in U$ there is some $\varepsilon>0$ with $B_\varepsilon(u) \subseteq U$.
\end{definition}

\begin{proposition}
  If $f:V\to W$ is continuous and $U\subseteq W$ is open then
  \[
    f^{-1}(U) = \{v \in V: f(v) \in V\}
  \]
  is an open subset of $V$.
\end{proposition}

\begin{proof}
  If $v\in f^{-1}(U)$, then $f(v) \in U$. $U$ is open in $W$ so exists $\varepsilon>0$ such that $B_\varepsilon(f(v)) \subseteq U$. $F$ is continuous so exist $\delta>0$ such that $f(B_\delta(v)) \subseteq B_\varepsilon(f(v)) \subseteq U$. So $B_\delta(v) \subseteq f^{-1}(U)$. $f^{-1}(U)$ is open.
\end{proof}

\begin{remark}
  The converse statement is also true: if for any $U \subseteq W$ open $f^{-1}(U)$ open in $V$, then $f$ is continuous.
\end{remark}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item $(0,1)$ is open in $\R$.
    \item The function $h(v) = \|v-v_0\|$ is continuous: $h(v) = g \compose f(v)$ where $f(v) = v-v_0$, and $g(v)=\|v\|$. so $B_r(r) = h^{-1}((-r,r))$ is open in $V$.
  \end{enumerate}
\end{eg}

\begin{definition}[Closed subset]
  $C\subseteq V$ is a \emph{closed subset} of $V$ if $V\setminus C$ is open in $V$.
\end{definition}

\begin{corollary}
  If $f:V\to W$ is continuous and $C\subseteq W$ is closed, then $f^{-1}(C)$ is closed in $V$.
\end{corollary}

\begin{proof}
  \[
    f^{-1}(W\setminus C) = V\setminus f^{-1}(C)
  \]
  so if $C\subseteq W$ is closed, $W\setminus C$ is open, so $f^{-1}(W\setminus C) = V\setminus f^{-1}(C)$ is open. Thus $f^{-1}(C)\subseteq V$ is closed.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item $[a,b]$ is closed in $\R$.
  \item $h(v) = \|v-v_0\|, \cl B_r(v_0) = h^{-1}([0,r])$ so closed ball is closed.
  \item $V, \emptyset$ are both open and closed in $V$.
    \item $\Q \subseteq \R$ is neither open nor closed.
  \end{enumerate}
\end{eg}

\begin{proposition}
  \(C \subseteq V\) is closed if and only if for every sequence \((v_n) \to v\) with all \(v_n \in C\), \(v\in C\).
\end{proposition}

\begin{proof}
  Suppose \(C\) is closed and \((v_n)\to v \notin C\). Then \(v\in V\setminus C\) is open, so \(\exists \varepsilon>0\) with \(B_\varepsilon(v) \subseteq V\setminus C\), i.e.\ \(B_\varepsilon(v) \cap C =\emptyset\). \((v_n)\to v\) so \(\exists N\) such that \(v_n\in B_\varepsilon(v)\) for all \(n>N\). Thus \(v_n \notin C\) for all \(n>N\). In other word, if \((v_n)\to v\), all but finitely many of \(v_n \notin C\).

  Conversely, suppose \(C\) is not closed. Then \(V\setminus C\) is not open so \(\exists c \in V\setminus C\) such that there is no \(\varepsilon>0\) with \(B_\varepsilon(v) \subseteq V\setminus C\). In other words, \(B_\varepsilon(v) \cap V \neq \emptyset\) for all \(\varepsilon>0\). Pick \(v_n\in B_{1/n}(v)\cap C\) for all \(n>0\). Then \(\|v_n-v\|< 1/n\) so \((v_n)\to v\). All \(v_n \in C\) but \(v\in V\setminus C\).
\end{proof}

\begin{eg}
  The set \(X=\{f\in C[0,1]: \forall x, f(x)>0\}\) is not closed with respect to \(\|\cdot\|_1\) or \(\|\cdot\|_\infty\) since \(f_n(x) = \frac{1}{n} \in X\), \((f_n) \to 0\) with respect to either norm but \(0 \notin X\).
\end{eg}

For future use, suppose \(U_\alpha \subseteq V, \alpha\in A\) are open subsets of \(V\). Given \(U = \bigcup_{\alpha\in A}U_\alpha\) and \(f: U \to W\),

\begin{proposition}
  If \(f|_{U_\alpha}:U_\alpha \to W\) is continuous for all \(\alpha \in A\), then \(f: U \to W\) is continuous.
\end{proposition}

\begin{note}
  The hypothesis that \(U_\alpha\) is open is important. For example, let \(f:\R\to\R, f(x) = 1 \text{ if } x\in\Q, f(x)=0\) otherwise, then \(f|_\Q\) and \(f|_{\R\setminus\Q}\) are both continuous but \(f\) is not.
\end{note}

\begin{proof}
  Suppose \(v_n, v\in U\) with \((v_n)\to v\). Must show \((f(v_n))\to f(v)\). \(v\in U\) so \(v\in U_\alpha\) for some \(\alpha\). \(U_\alpha\) is open so \(\exists \varepsilon >0\) with \(B_\varepsilon(v) \subseteq U_\alpha\), \((v_n)\to v\) so \(\exists N\) with \(v_n \in B_\varepsilon(v)\) for all \(n>N\). Let \(u_i=v_{N+1}\), then \(u_i\in U_\alpha\) and \((u_i)\to v\). Since \(f|_{U_\alpha}\) is continuous, \((f(u_i))\to f(v)\) which implies that \((f(v_n)) \to f(v)\).
\end{proof}

\subsection{Lipschitz Equivalence}

Recall from the introduction of norms that \(\|\cdot\|_1, \|\cdot\|_2, \|\cdot\|_\infty\) on \(\R^n\) all induce the same notion of convergence. We want to generalise this idea.

Suppose \(\|\cdot\|\) and \(\|\cdot\|'\) are two norms on \(V\). Consider
\begin{align*}
  \id_V:(V,\|\cdot\|) &\to (V,\|\cdot\|') \\
  v &\mapsto v
\end{align*}

\begin{proposition}
  \label{prop:continuity of id}
  \(\id_V\) as above is continuous if and only if \(\exists C \in \R\) with \(\|v\|' \leq C \|v\|\) for all \(v \in V\).
\end{proposition}

\begin{proof}
  Suppose \(\|v\|' \leq C \|v\|\) for all \(v\). To show \(\id_V\) is continuous, must show \((v_n)\to v\) with respect to \(\|\cdot\|'\) whenever \((v_n)\to v\) with respect to \(\|\cdot\|\).

  If \((v_n)\to v\) with respect ot \(\|\cdot\|\), then \((\|v_n-v\|)\to 0\) so \((C\|v_n-v\|)\to 0\). We know
  \[
    0 \leq \|v_n-v\|' \leq C \|v_n-v\|,
  \]
  so by squeeze rule \(\|v_n-v\|\to 0\). Thus \((v_n)\to v\) with respect to \(\|\cdot\|'\).

  Conversely, suppose \(\id_V\) is continuous. There exist \(\delta>0\) such that
  \[
    \id_V(B_\delta(0, \|\cdot\|) \subseteq B_1(0, \|\cdot\|')
  \]
  Given \(v \in V, v \neq 0\), exists \(K\in\R\) with \(\|Kv\| = \delta/2\) (take \(K=\frac{\delta}{2 \|v\|}\)). Then \(Kv \in B_\delta(0,\|\cdot\|) \Rightarrow Kv\in B_1(0,\|\cdot\|')\), i.e.\ \(\|Kv\| = \delta/2, \|Kv\|' < 1\), so \(\|Kv\|' \leq \frac{2}{\delta}\|Kv\| \Rightarrow K \|v\|' \leq \frac{2}{\delta}K \|v\|\). Let \(C = \frac{2}{\delta}\).
\end{proof}

\begin{joke}
  {\raggedright
    \texttt{The joke about a mathematician going for a firefighter interview... Well you should know it by now if you are a mathematician.}
    \par}
\end{joke}

\begin{definition}[Lipschitz equivalence]
  \label{def:Lipschitz equivalence}
  If \(\|\cdot\|\) and \(\|\cdot\|'\) are two norms on \(V\), they are said to be \emph{Lipschitz equivalent} if
  \begin{align*}
    & \exists C>0 s.t. \forall v \in V, \frac{1}{C}\|v\| \leq \|v\|' \leq C \|v\| \\
    \Longleftrightarrow & \exists C_1,C_2 s.t. \|v\|' \leq C_1 \|v\|, \|v\| \leq C_2 \|v\|' \\
    \Longleftrightarrow & \id_V:(V,\|\cdot\|)\to (V,\|\cdot\|') \text{ and } \id_V:(V,\|\cdot\|')\to (V,\|\cdot\|) \\
    & \text{are both continuous.}
  \end{align*}
\end{definition}

\begin{corollary}
  If \((V, \|\cdot\|)\) and \((V, \|\cdot\|')\) are Lipschitz equivalent, then
  \begin{enumerate}
  \item \((v_n)\to v\) with respect to \(\|\cdot\|\) if and only if with respect to \(\|\cdot\|'\),
  \item \(f:V\to W\) is continuous with respect to \(\|\cdot\|\) if and only if with respect to \(\|\cdot\|'\),
  \item \(F:W\to V\) is continuous with respect to \(\|\cdot\|\) if and only if with respect to \(\|\cdot\|'\).
  \end{enumerate}
\end{corollary}

\begin{proof}
  Example proof: if \(f:(V, \|\cdot\|)\to W\) is continuous, \(f:(V,\|\cdot\|')\to W = f:(V, \|\cdot\|)\to W \compose \id_V:(V, \|\cdot\|) \to (V, \|\cdot\|')\).
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(V=\R^n\), \(\|v\|_\infty \leq \|v\|_2 \leq \|v\|_1 \leq n \|v\|_\infty\) so all three are Lipschitz equivalent.
  \item \(V=C[0,1]\), \(\id_V:(V, \|\cdot\|_\infty)\to (V,\|\cdot\|_1)\) is continuous but \(\id_V:(V, \|\cdot\|_1)\to (V,\|\cdot\|_\infty)\) is not so not Lipschitz equivalent.
  \end{enumerate}
\end{eg}

\section{Uniform Convergence}

\subsection{Notions of Convergence}

Suppose \(A\subseteq \R, f, f_n: A\to \R\). We say \(f\) is \emph{continuous} if given \(x\in A\) and \(\varepsilon>0\), \(\exists \delta>0\) such that \(|f(x)-f(y)| < \varepsilon\) whenever \(y\in A\) and \(|x-y| < \delta\). We say \(f\) is \emph{bounded} if exists \(M\) such that \(|f(x)| \leq M\) for all \(x\in A\). Define
\begin{itemize}
\item \(C(A) = \{f: A\to \R: f \text{ is continuous}\}\),
\item \(B(A) = \{f:A\to \R: f \text{ is bounded}\}\),
\end{itemize}
which are both vector space.

\begin{eg}
  \(C[0,1] \subseteq B[0,1]\) by Maximum Value Theorem. \(g(x) = \frac{1}{x} \in C(0,1]\) so \(C(0,1] \nsubseteq B(0,1]\).
\end{eg}

\begin{definition}[Pointwise Convergence]
  \((f_n) \to f\) \emph{pointwise} if
  \[
    (f_n(x)) \to f(x) \text{ for all } x\in \R.
    \]
\end{definition}

\begin{definition}[Uniform norm]
  The \emph{uniform norm} on \(B(A)\) is given by
  \[
    \|f\|_\infty = \sup_{x\in A} |f(x)|.
  \]
\end{definition}

\begin{definition}[Uniform convergence]
  If \(f, f_n: A\to \R\), we say \(f(x) \to f\) \emph{uniformly on \(A\)} if \((f_n-f) \in B(A)\) for all \(n\) and \((\|f_n-f\|_\infty)\to0\).
\end{definition}
    In other words,
    \begin{itemize}
    \item \((f_n)\to f\) pointwise means: you give me \(x\in A\) and \(\varepsilon >0\), I have to find \(N\) such that \(|f_n(x) - f(x)| < \varepsilon\) whenever \(n> N\). \emph{This \(N\) only has to work for that particular value of \(x\).}
    \item \((f_n)\to f\) uniformly means: you give me \(\varepsilon>0\), I have to find \(N\) such that \(|f_n(x) - f(x)|<\varepsilon\) for all \(x\in A\) and \(n>N\). \emph{Same \(N\) works for all \(x\in A\).}
\end{itemize}

\begin{ex}
  If \((f_n)\to f \) uniformly, then \((f_n)\to f\) pointwise. The converse is false.
\end{ex}

\begin{eg}\leavevmode
  \begin{itemize}
  \item Suppose \(A=\R,f_n(x)=x+\frac{1}{n},f(x)=x\). Then \(f_n(x)-f(x)=\frac{1}{n}\) so \((f_n)\to f\) uniformly.
  \item Let \(g_n(x) = (x+\frac{1}{n})^2, g(x) = x^2\). Then \((g_n)\to g\) pointwise but \(g_n(x) - g(x) = \frac{2x}{n} + \frac{1}{n^2}\) is not even bounded. So \((g_n)\nto g\) uniformly on \(\R\).
  \end{itemize}
\end{eg}

\begin{theorem}
  Suppose \(f_n \in C(A)\) for all \(n\) and \((f_n)\to f\) uniformly on \(A\). Then \(f\in C(A)\) as well.
\end{theorem}

\begin{slogan}
  The uniform limit of continuous functions is continuous.
\end{slogan}

\begin{proof}
  Suppose \(f_n\) are continuous and \((f_n)\to f\) uniformly. Given \(x\in A\) and \(\varepsilon>0\), must find \(\delta>0\) such that \(|f(x)-f(y)| < \varepsilon\) whenever \(y\in A\) and \(|x-y|<\delta\).

  Since \((f_n)\to f\) uniformly, there exists \(N\) such that \(|f_n(x)-f(x)|< \varepsilon/4\) for all \(x\in A\) and \(n\geq N\). Since \(f_N\) is continuous, exists \(\delta>0\) such that \(|f_N(x)-f_n(y)|<\varepsilon/2\) whenever \(y\in A\) and \(|x-y|<\delta\). Then if \(|x-y| < \delta\),
  \begin{align*}
    |f(x)-f(y)| &\leq |f(x)-f_N(x)| + |f_N(x)-f_N(y)| + |f_N(y)-f(y)| \\
    &\leq \varepsilon/4 + \varepsilon/2 + \varepsilon/4 \\
    &= \varepsilon
  \end{align*}
\end{proof}

\begin{eg}
  Take \(A=[0,1]\),
  \begin{itemize}
  \item \(f_n(x)=x^n, f(x) = 1\text{ if } x=1, f(x)=0 \text{ if } x\neq 1\). Then \((f_n)\to f\) pointwise on \([0,1]\) but \(f_n\in C[0,1], f\notin C[0,1]\) so \((f_n)\nto f\) uniformly on \([0,1]\).
  \item \(g_n(x) = x^n(1-x), g(x) =0\). Then \((g_n)\to g\) uniformly.
\begin{proof}
  given \(\varepsilon>0, 1-\varepsilon<1\) so \((1-\varepsilon)^n\to 0\). Pick \(N\) such that \((1-\varepsilon)^n < \varepsilon\) for all \(n> N\). Then \(|f_n(x)| = |(1-x)x^n| \leq 1\cdot(1-\varepsilon)^n < \varepsilon\) for \(x\in[0,1-\varepsilon]\) and \(|f_n(x)| = |(1-x)x^n| < \varepsilon\cdot1^n=\varepsilon\) for \(x\in (1-\varepsilon,1]\). Thus \(|f_n(x)| < \varepsilon\) for all \(x\in[0,1]\).
\end{proof}
  \end{itemize}
\end{eg}

\begin{note}
  The converse, at least when taken literally, is false. See example sheet 1 Q11.
\end{note}

\begin{remark}
  Everything I have said so far works fine for \(A\subseteq V, f: A\to W\), where \(V, W\) are normed vector spaces.
\end{remark}

\begin{joke}
  A mathematician named Cliff measured his room for painting. His wife went off to the paint store and told the counter how much paint she needed. The counter said: ``Thats a lot of paint. Are you sure you want that much?'' To which the wife answered: ``Well my husband is a mathematician. I'm sure he gets the numbers correct.''

  She arrived back home with really a lot of paint. Cliff moved all the paint in the house and suddenly said:

  ``Oh, damn! I measured the volumn instead of the area!''
  \end{joke}

Recall that if \(f\in C[a,b]\) then \(\|f\|_1=\int_a^b|f(x)|dx\). 

\begin{definition}[Convergence in measure]
  \(f_n\) converges \emph{in measure} to \(f\) if \((f_n)\to f\) with respect to \(\|\cdot\|_1\), 
\end{definition}

\begin{lemma}
  If \((f_n)\in C[a,b]\) and \((f_n)\to f\) uniformly then \((f_n)\to f\) in measure.
\end{lemma}

\begin{proof}
  Given \(\varepsilon>0\), pick \(N\) such that \(|f_n(x)-f(x)|<\varepsilon/2(b-a)\) for all \(x\in [a,b]\). Then
  \begin{align*}
    \|f_n-f\| &= \int_a^b |f_n(x)-f(x)| dx \\
              &\leq \int_a^b\varepsilon/2(b-a) dx \\
              &= (\varepsilon/2(b-a))(b-a) \\
              &= \varepsilon/2.
\end{align*}
\end{proof}

Equivalently, the map \(\id: (C[a,b], \|\cdot\|_\infty)\to (C[a,b], \|\cdot\|_1)\) is continuous.

\begin{eg}
  Let \(A=[0,1]\),
  \begin{enumerate}
  \item \(f(x) =
      \begin{cases}
        nx & x\in [0,1/n] \\ 2-nx & x\in [1/n,2/n] \\0 & x\geq2/n
      \end{cases}
  \)
  Then \((f_n)\to 0\) pointwise and in measure but not uniformly.
\item \(g_n(x) =
    \begin{cases}
      n^2 x & x\in [0,1/n]\\
      2n-n^2 x& x\in[1/n, 2/n] \\
      0 & x \geq 2/n
    \end{cases}
  \)
  Then \((g_n)\to 0\) pointwise but \((g_n)\nto 0\) in measure or uniformly.
  \end{enumerate}
\end{eg}

\subsection{Power Series}

\begin{question}
  Given
  \[
    f(x) = \sum_{i=0}^{\infty} \frac{x^i}{i!},
  \]
  how do I know if \(f(x)\) is continuous or differentiable?
\end{question}

Recall some facts about series from IA Analysis I:
\begin{enumerate}
\item The series \(\sum_{i=0}^{\infty}c_i = c\in\C \) means that \((\sum_{i=0}^{\infty})\to c\), as real vector space \((\C, \|\cdot\|) \cong (\R^2, \|\cdot\|)\).
\item \(\sum_{i=0}^{\infty}c_i \) converges if and only if there exists \(N\in\N\) such that \(\sum_{i=N}^{\infty}c_i \) converges.
\item Geometric series: \(\sum_{i=k}^{\infty}\alpha^i = \frac{\alpha^k}{1-\alpha} \) for \(|\alpha|<1\).
\item If \(\sum_{i=0}^{\infty}c_i \) converges then \((c_i)\to 0\).
\item Comparison test: if \(0 \leq a_i \leq b_i\) for all \(i\) and \(\sum_{i=0}^{\infty}b_i \) converges then \(\sum_{i=0}^{\infty}a_i \) converges and \(\sum_{i=0}^{\infty}a_i \leq \sum_{i=0}^{\infty}b_i \).
\item Absolute convergence: if \(\sum_{i=0}^{\infty}|c_i| \) converges then \(\sum_{i=0}^{\infty}c_i \) converges and \(|\sum_{i=0}^{\infty}c_i| \leq \sum_{i=0}^{\infty}|c_i| \).
\end{enumerate}

\begin{lemma}
  If \(0 \leq |c_i| \leq b_i \) for all \(i\) and \(\sum_{i=0}^{\infty}b_i \) converges then \(\sum_{i=0}^{\infty}c_i \) converges.
\end{lemma}

\begin{proof}
  Combine property 5 and 6.
\end{proof}

\begin{definition}[Power series]
A series of the form
\[
\sum_{i=0}^{\infty}a_i(z-c)^i,
\]
where \(a_i,z,c\in C\) is called a \emph{power series}. \(C\) is the \emph{centre}.
\end{definition}

\begin{proposition}[Pointwise convergence]
  \label{prop:pointwise convergence of series}
  If
  \[
    \sum_{i=0}^{\infty}a_i(z_0-c)^i
  \]
  converges then
  \[
    \sum_{i=0}^{\infty}a_i(z-c)^i
  \]
  converges whenever
  \[
|z-c| < |z_0-c|.
  \]
\end{proposition}

\begin{proof}
  By property 4 \((a_i(z_0-c)^i)\to 0\). Pick \(N\) such that \(|a_i(z_0-c)^i|<1\) for all \(i\geq N\). By Property 2 it suffices to show that
  \[
    \sum_{i=N}^{\infty}a_i(z-c)^i
  \]
  converges. Now for \(i\geq N\),
  \[
    \label{eqn:fundamental est}
    \boxed{
    |a_i(z-c)^i| = |a_i(z_0-c)^i| \cdot \Big| \frac{z-c}{z_0-c} \Big|^i < 1\cdot \alpha^i
    }
    \tag*{Fundamental Estimate for Power Series}
    \]
  where \(\alpha = |\frac{z-c}{z_0-c}|\). So if \(|z-c| < |z_0-c|,\alpha<1\), \(\sum_{i=N}^{\infty}\alpha^i \) converges by property 3.

  In summary, we have
  \[
|a_i(z-c)^i| < \alpha^i
\]
for all \(i\geq N\) and \(\sum_{i=N}^{\infty}\alpha^i \) converges. By the lemma \(\sum_{i=N}^{\infty}a_i(z-c)^i \) converges.
\end{proof}

\begin{definition}[Radius of convergence]
  \[
    R := \sup \{ |z-c|: \sum_{i=0}^{\infty}a_i (z-c)^i \text{ converges}\}
  \]
  is the \emph{radius of convergence} of \(\sum_{i=0}^{\infty}a_i(z-c)^i \).
\end{definition}

Proposition~\ref{prop:pointwise convergence of series} implies that if \(z\in B_R(c)\) then \(\sum_{i=0}^{\infty}a_i(z-c)^i \) converges. In other words, if we define
\begin{align*}
  f: B_R(c) &\to \C \\
  z &\mapsto \sum_{i=0}^{\infty} a_i(z-c)^i \\
  P_n: B_R(c) &\to \C \\
  z &\mapsto \sum_{i=0}^{n} a_i(z-c)^i
\end{align*}

Proposition~\ref{prop:pointwise convergence of series} says that \((P_n)\to f\) pointwise on \(B_R(c)\). As \(P_n\) are polynomials so they are continuous. A natural question is, is \(f\) continuous as well? We know this answer will be yes if we can prove that the convergence is uniform. How do we do that?

\begin{theorem}
  With notations as above,
  \[
(P_n)\to f
\]
uniformly on \(\cl B_r(c)\) whenever \(r<R\).
\end{theorem}

\begin{note}
  Equivalently, we can say \((P_n)\to f\) uniformly on \(B_r(c)\) for \(r<R\). The closed ball \(\cl B_r(c)\) is just a convention when talking about uniform convergence on a compact set.
\end{note}

\begin{proof}
  Define
  \[
    E_n(z) = f(z) - P_n(z) = \sum_{i=n+1}^{\infty}a_i(z-c)^i. 
  \]
  Fix \(r< R\). Given \(\varepsilon>0\), need to find \(N \) such that \(|E_n(z)| < \varepsilon\) whenever \(n\geq N\) and \(z\in \cl B_r(c)\).

  Choose \(z_0\) with \(r< |z_0-c| < R\) as in the proof of Proposition~\ref{prop:pointwise convergence of series}, pick \(N_0\) such that \(|a_i(z_0-c)|^i<1\) for \(i\geq N_0\). Now we use \ref{eqn:fundamental est}. For \(i\geq N_0\), we have \(|a_i(z-c)^i| < \alpha(z)^i\) where \(\alpha(z) = |\frac{z-c}{z_0-c}|\). For \(z\in \cl B_r(c)\),
  \[
    \alpha(z) = \Big| \frac{z-c}{z_0-c} \Big| \leq \frac{r}{|z_0-c|} = \alpha_0 < 1
  \]
  since \(r < |z_0-c|\). Hence for \(n>N_0\),
  \[
    |E_n(z)| \leq \sum_{i=n+1}^{\infty}|a_i(z-c)^i| \leq \sum_{i=n+1}^{\infty}\alpha_0^i = \frac{\alpha_0^{n+1}}{1-\alpha_0}.
  \]
  As \(\alpha_0 < 1\), \((\alpha_0^i)\to 0\). Pick \(N\geq N_0\) such that
  \[
\alpha_0^i < \varepsilon (1-\alpha_0)
  \]
  for \(i\geq N\). So for \(n>N\),
  \[
    |E_n(z)| < \frac{\varepsilon (1-\alpha_0)}{1-\alpha_0} = \varepsilon
  \]
  for all \(z\in \cl B_r(c)\).
  This is what we wanted.
\end{proof}

\begin{note}
  It need not be true that \((P_n)\to f\) uniformly on \(B_R(c)\). For example,
  \[
    \sum_{i=0}^{\infty}z^i
  \]
  does not converge uniformly on \(B_1(0)\).
\end{note}

\begin{corollary}
  \(f\) as above is continuous on \(B_R(c)\).
\end{corollary}

\begin{proof}
  Let \(U_r = B_r(c), r<R\). Then \(U_r\) is open in \(\C\). \((P_n)\to f\) uniformly on \(U_r\) for \(r< R\). Since the \(P_n\) are continuous \(f|_{U_r}\) is continuous. By gluing lemma \(f\) is continuous on
  \[
    U = \bigcup_{r<R} U_r = B_R(c).
  \]
\end{proof}

To summarise, power series are continuous on domain of convergence \(B_R(c)\).

\subsection{Integration \& Differentiation}

Recall from IA Analysis I that
\begin{theorem}[Fundamental Theorem of Calculus]
  \label{thm:FTC}
  Suppose \(f\in C[a,b]\), \(c\in [a,b]\), then
  \[
    F(x) = \int_{c}^{x} f(y) dy
  \]
  is well-defined for \(x\in[a,b]\) and
  \[
    F'(x) = f(x).
  \]
\end{theorem}
and the following properties of (Riemann) integral:
\begin{enumerate}
\item If \(f(x) \leq g(x) \) for \(x\in[a,b]\), \(\int_{a}^{b} f(x) dx \leq \int_{a}^{b} g(x) dx \).
\item \(\big|\int_{a}^{b} f(x) dx \big| \leq \int_{a}^{b} |f(x)| dx \).
\item If \(b<a\), \(\int_{a}^{b} f(x) dx = - \int_{b}^{a} f(x) dx \).
\end{enumerate}

\begin{lemma}
  If \(|f(x)|\leq C\) for all \(x\in[a,b]\) then
  \[
    \Big| \int_{c}^{x} f(t) dt \Big| \leq C|x-c|.
  \]
\end{lemma}

\begin{proof}
  If \(x\geq c\) then
  \[
    \Big| \int_{c}^{x} f(t) dt \Big| \leq \int_{c}^{x} |f(t)| dt \leq \int_{c}^{x} C dt = C(x-c).
  \]
  If \(x\leq c\) then
   \[
    \Big| \int_{c}^{x} f(t) dt \Big| \leq \int_{c}^{x} |-f(t)| dt \leq C|x-c|.
  \]
\end{proof}

Now suppose \(f_n\in C[a,b]\) and \((f_n)\to f\) uniformly on \([a,b]\) so \(f\in C[a,b]\). Define
\begin{align*}
  F_n(x) &= \int_{c}^{x} f_n(t) dt \\
  F(x) &= \int_{c}^{x} f(t) dt
\end{align*}

\begin{proposition}
  \label{prop:power series integral convergence}
  With notations above,
  \[
    (F_n) \to F
  \]
  uniformly on \([a,b]\).
\end{proposition}

\begin{proof}
  Given \(\varepsilon>0\), there exists \(N\) such that \(|f_n(x) - f(x)| < \varepsilon/(b-a)\) for all \(n\geq N\) and \(x\in[a,b]\). Then
  \begin{align*}
    |F_n(x) - F(x)| &= \Big| \int_{c}^{x} f_n(t) dt - \int_{c}^{x} f(t) dt \Big| \\
                    &\leq \Big| \int_{c}^{x} \big( f_n(t) - f(t) \big) dt \Big| \\
                    &\leq |x-c| \cdot\frac{\varepsilon}{b-a} \text{ by lemma} \\
                    &= \varepsilon
  \end{align*}
  since \(x,c\in[a,b]\), \(|x-c|\leq b-a\). Thus \((F_n)\to F\) uniformly on \([a,b]\).
\end{proof}

Now suppose \(f(x) = \sum_{i=0}^{\infty}a_i(x-c)^i \) is a real power series with radius of convergence \(R\). Then for \(r< R\) and \(P_n(x) = \sum_{i=0}^{n}a_i(x-c)^i \), \((P_n)\to f\) uniformly on \(\cl B_r(c) = [c-r,c+r]\).

\begin{corollary}
  \[
    \int_{c}^{x} f(t) dt = \sum_{i=0}^{\infty}\frac{a_i}{i+1}(x-c)^{i+1}
  \]
  for \(x\in (c-R,c+R)\).
\end{corollary}

\begin{proof}
  Given \(x\), choose \(r\) with \(|x-c| < r < R\). Then \((P_n)\to f\) on \([c-r, c+r]\) so by Proposition~\ref{prop:power series integral convergence}
  \[
    (\mathbf{P}_n) \to \int_{c}^{x} f(t) dt
  \]
  uniformly on \([c-r, c+r]\) where
  \[
    \mathbf{P}_n(x) = \int_{c}^{x} \sum_{i=0}^{n}a_i(t-c)^i dt = \sum_{i=0}^{n} \frac{a_i}{i+1} (x-c)^{i+1}
  \]
  Since uniform convergence implies pointwise convergence,
  \[
    \sum_{i=0}^{\infty}\frac{a_i}{i+1}(x-c)^{i+1} = \int_{c}^{x} f(t) dt.
  \]
\end{proof}

\begin{question}
  If \((f_n)\to f\) uniformly on \([a,b]\) and \(f_n\) are differentiable, what can we say about \((f_n')\)?
\end{question}

The answer is, surprisingly, \emph{absolutely nothing}.

\begin{eg}
  Let \(f(x) = \frac{1}{n}\sin nx\). Then \((f_n)\to \V 0\) uniformly on \([0,\pi]\). But \(f_n'(x) = \cos nx\) does not even converge for any \(x\neq 0\).
\end{eg}

Nevertheless, if \(f(x) = \sum_{i=0}^{\infty}a_i(x-c)^i \) has radius of convergence \(R\), we still have

\begin{proposition}
  \(f\) is differentiable on \((c-R, c+R)\) and
  \[
    f'(x) = \sum_{i=1}^{\infty}i a_i(x-c)^{i-1}. 
  \]
\end{proposition}

In other words, power series can be differentiated term-by-term.

\begin{lemma}
  \(g(x) = \sum_{i=1}^{\infty}i a_i(x-c)^{i-1} \) converges for all \(y\in(c-R,c+R)\).
\end{lemma}

\begin{proof}
  Given \(x\in(c-R,c+R)\), pick \(x_0\) with \(|x-c| < |x_0-c| < R\). Then \(\sum_{i=0}^{\infty}a_i(x_0-c)^i \) converges, so by \ref{eqn:fundamental est}, there exists \(N\) such that
  \[
    |a_i(x-c)^i| \leq \alpha^i
  \]
  for all \(i\geq N\), where \(\alpha = \frac{|x-c|}{|x_0-c|}<1\). Then
  \[
    b_i:= |i a_i (x-c)^{i-1}| \leq \Big| \frac{i a_i}{x-c}\cdot(x-c)^i \Big| \leq \frac{i}{|x-c|}\alpha^i
  \]
  where we assume \(y\neq c\). Now
  \[
    \lim_{i\to\infty} \frac{b_{i+1}}{b_i} = \lim_{i\to\infty} \frac{i+1}{i}\cdot\alpha = \alpha<1
  \]
  so \(\sum_{i=1}^{\infty}\frac{i}{|x-c|}\alpha^i \) converges by ratio test. Since
  \[
    |i a_i(x-c)^{i-1}| \leq \frac{i}{|x-c|}\alpha^i,
  \]
  \(\sum_{i=1}^{\infty}i a_i(x-c)^{i-1} \) converges by comparison test. If \(x=c\) then the convergence is obvious.
\end{proof}

\begin{proof}[Proof of proposition]
  \(g(x) = \sum_{i=1}^{\infty}i a_i (x-c)^{i-1} \) converges on \((c-R,c+R)\), so by term-by-term integration
  \[
    \int_{c}^{x} g(t) dt = \sum_{i=1}^{\infty}a_i(x-c)^i = f(x) - f(c).
  \]
  Now \(g(x)\) is continuous on \((c-R, c+R)\) so we can apply~\ref{thm:FTC} so \(f'(x) = g(x)\) for all \(x\in(c-R,c+R)\).
\end{proof}

\begin{application}
  Power series solutions of ODEs are legit as long as you check the radius of convergence.
\end{application}

\section{Compactness}

\subsection{Compact subsets of \texorpdfstring{\(\R^n\)}{R\^{}n}}

Let \((V, \norm \cdot)\) be a normed vector space. If \((v_n)\) is a sequence in \(V\) and \((n_j)\) is an increasing sequence of positive integers (i.e.\ \(n_{j+1}>n_j\)) then \((v_{n_j})\) is a \emph{subsequence} of \((v_n)\).

\begin{ex}
  if \((v_n)\to v\) in \(v\) then any subsequence \((v_{n_j})\) converges to \(v\) as well.
\end{ex}

\begin{definition}[Boundedness]
  \(A \subseteq V\) is bounded if there exists \(m\) such that \(\norm v \leq m \) for all \(v\in A\).
\end{definition}

\begin{remark}
  if \(\norm \cdot\) and \(\norm \cdot'\) are Lipschitz equivalent then \(A\) is bounded with respect to \(\norm \cdot\) if and only if with respect to \(\norm \cdot'\). It follows that boundedness in \(\R^n\) means with respect to any one of \(\norm \cdot_1, \norm \cdot_2, \norm \cdot_\infty\).
\end{remark}

Recall from IA Analysis I:
\begin{theorem}[Bolzano-Weierstrass]
  A bounded sequence in \(\R\) has a convergent subsequence.
\end{theorem}

\begin{corollary}[Bolzano-Weierstrass for \(\R^m\)]
  A bounded sequence in \(\R^m\) has a convergent subsequence.
\end{corollary}

\begin{proof}
  Inducton on \(m\): if \(m=1\) then done by Bolzano-Weierstrass. Suppose it holds for \(\R^{m-1}\) and let \((v_n)\) be a bounded sequence in \(\R^m\). Write \(v_n = (v_{n,1},\dots,v_{n,n}) = (w_n,v_{n,m})\) for some \(w_n\in \R^{m-1}\). \(\norm{w_n}\) and \(|v_{n,m}| \leq \norm{v_n}\) so \((v_n)\) is bounded implies that \((w_n)\) and \((v_{n,m})\) are bounded. By induction \((w_n)\) has a subsequence \((w_{n_j}) \to w \in \R^{m-1}\). Now consider \((v_{n_j,m})\). This is a bounded sequence in \(\R\) so by Bolzano-Weierstrass there is a subsequence \((v_{n_{j_k},m}) \to v \in\R\). By Exercise \((w_{n_{j_k}}) \to w\) so
  \[
    (v_{n_{j_k}}) = ((w_{n_{j_k}},v_{n_{j_k},m})) \to (w, v) \in \R^m.
  \]
\end{proof}

\begin{definition}[Sequential compactness]
  \(C \subseteq V\) is \emph{sequentially compact} if any sequence \((v_n)\) in \(C\) has a convergent subsequence \((v_{n_j}) \to v \in C\).
\end{definition}

\begin{remark}
  There is another (topological) definition of compactness using open covers. For metric spaces, in particular subspaces of normed spaces, these two are equivalent.
\end{remark}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(\R\) is not compact as \((n)\) has no convergent subsequence.
  \item \((0,1]\) is not compact as \((1/n) \to 0\) but \(0 \notin A\).
  \end{enumerate}
\end{eg}

\begin{theorem}[Heine-Borel]
  \(A \subseteq \R^m\) is compact if and only if \(A\) is closed and bounded.
\end{theorem}

\begin{proof}\leavevmode
  \begin{itemize}
  \item \(\Leftarrow\): Suppose \(A\) is closed and bounded. Given a sequence \((v_n)\) with \(v_n\in A\), must find a convergent subsequence. Since \(A\) is bounded, \((v_n)\) is bounded so by Bolzano-Weierstrass there is a convergent subsequence \((v_{n_j})\to v \in \R^m\). As \(A\) is closed and \(v_{n_j}\in A\), \((v_{n_j})\to v\) implies that \(v \in A\).
  \item \(\Rightarrow\): If \(A\) is not closed or not bounded, we will find a sequence \((v_n)\) with \(v_n \in A\) with no convergent subsequence:
  \begin{itemize}
  \item if \(A\) is not closed, there is a sequence \((v_n)\to v\) with \(v_n \in A\) but \(v \notin A\). Suppose \((v_{n_j}) \to w\) is a convergent subsequence. Then by Exercise \((v_{n_j})\to v\). By uniqueness of limits \(v = w \notin A\).
  \item if \(A\) is not bounded, then for each \(n > 0\) there exists \(v_n \in A\) with \(\norm{v_n} \geq n\). Consider the sequence \((v_n)\). Suppose there is a subsequence \((v_{n_j})\to v\). Then we can find \(J\) such that \(\norm{v_{n_j}-v} < 1\) for all \(j\geq J\). Pick \(K\geq \max(J,\norm v + 1)\). Then for \(j\geq K\),
    \[
      \norm{v_{n_j}} \leq \norm{v_{n_j}-v} + \norm v \leq 1+ \norm v \leq K \leq n_j
    \]
    since \(n_j \geq j \geq K\). So \(\norm{v_{n_j}} < n_j\) for \(j\geq K\), contradiction.
  \end{itemize}
  \end{itemize}
\end{proof}

\begin{eg}
  \((V, \norm \cdot) = (C[0,1], \norm \cdot_\infty)\). Consider \(f_n(x) = \begin{cases} 1-nx & x\in[0,1/n] \\ 0 & x\geq 1/n \end{cases}\). Note if \(f(x) = \begin{cases} 1 & x=0 \\ 0 & x>0 \end{cases}\) then \((f_n) \to f\) pointwise. Claim \((f_n)\) has no convergent subsequence with respect to \(\norm \cdot_\infty\).

  \begin{proof}
    Suppose \((f_{n_j})\to g\) uniformly. Then \((f_{n_j})\to g\) pointwise. But we know from Exercise \((f_{n_j})\to f\) pointwise so \(f=g\). But \(f_n\) is continuous so \(g\) is continuous. Contradition.
  \end{proof}

  \begin{note}
    \(f_n\in \cl B_1(0) \subseteq V\).
  \end{note}
\end{eg}

\begin{corollary}
  \(\cl B_1(0)\) is closed and bounded in \((C[0,1], \norm \cdot_\infty)\) but is not compact.
\end{corollary}

\begin{proposition}[Continuous image of compact set]
  Suppose \(C \subseteq V\) is compact and \(f:C\to W\) is continuous then \(f(C)\) is also compact.
\end{proposition}

\begin{proof}
  Suppose \((w_n)\) is a sequence in \(f(C)\). Pick \(v_n \in C\) with \(f(v_n) = w_n\). \(C\) is compact so \((v_n)\) has a convergent subsequence \((v_{n_j})\to v \in C\). \(f\) is continuous so
  \[
    (w_{n_j}) = (f(v_{n_j})) \to f(v) \in f(C).
  \]
\end{proof}

\begin{joke}
  \texttt{There is no joke today.}
\end{joke}

\subsubsection{Application I: Maximum Value Theorem}

\begin{lemma}
  If \(\emptyset \neq A \subseteq \R \) is compact then \(\sup A \in A\).
\end{lemma}

\begin{proof}
  \(A\) is closed and bounded so \(\alpha = \sup A\in \R\). For each \(n>0\), exists \(a_n \in A\) such that \(\alpha-1/n \leq a_n \leq \alpha\). Then \((a_n)\to \alpha\). Since \(A\) is closed and \(a_n \in A\), \(\alpha\in A\) as well.
\end{proof}
 
\begin{theorem}
  Suppose \(f:C\to \R\)  is continuous and \(C\) is compact and nonempty. Then exists \(v\in C\) such that \(f(v) \geq f(v')\) for all \(v' \in C\).
\end{theorem}

\begin{proof}
  \(f(C)\) is compact and nonempty by the Proposition, so Lemma implies that \(\alpha = \sup f(C)\) exists and \(\alpha\in f(C)\). Pick \(v\in C\) with \(f(v) = \alpha\). If \(v'\in C\) then \(f(v') \in f(C)\) so \(f(v') \leq \alpha = f(v)\).
\end{proof}

\begin{corollary}
  Let \(f\) and \(C\) be as above. Then there exists \(v_-\in C\) with \(f(v_-) \leq f(v')\) for all \(v' \in C\).
\end{corollary}

\begin{proof}
  Apply Theorem to \(-f\).
\end{proof}

\subsubsection{Application II: Equivalence of Norms on \texorpdfstring{\(\R^n\)}{R\^{}n}}

Let \(\norm \cdot\) be some norm on \(\R^m\).
  
\begin{lemma}
  The map \(\id: (\R^m, \norm \cdot_1) \to (\R^m, \norm \cdot)\) is continuous.
\end{lemma}

\begin{proof}
  By the criterion in Proposition~\ref{prop:continuity of id} it suffices to show that there is a constant \(C\) such that \(\norm v \leq C \norm v_1\) for all \(v\in \R^m\). Let \(v = (v_1,\dots,v_m) = \sum_{i=1}^{m}v_ie_i \) where \(e_i\) is the standard basis vector. Take \(C = \max_{1\leq i\leq m}\norm{e_i}\). Then
  \[
    \norm v \leq \sum_{i=1}^{m}\norm{v_ie_i} = \sum_{i=1}^{m}|v_i| \norm{e_i} \leq C \sum_{i=1}^{m}|v_i| = C \norm v_1
  \]
\end{proof}

\begin{corollary}
  The map \(f:(\R^m, \norm \cdot_1) \to (\R, |\cdot|)\) given by \(f(v) = \norm v\) is continuous.
\end{corollary}

\begin{proof}
  \(f = g\compose \id\) where \(g\) is the continuous map from \(\R^m\) to \(\R\) in Example~\ref{eg:continuity}.
\end{proof}

Recall that two norms \(\norm \cdot\) and \(\norm \cdot'\) on \(V\) are Lipschitz equivalent if there exists \(C\) such that
\[
  C\norm v \leq \norm v' \leq C \norm v
\]
for all \(v\in V\).

\begin{remark}
  This is trivially true if \(v=0\) so suffices to check for \(v\neq0\).
\end{remark}

\begin{theorem}
  If \(\norm \cdot\) is a norm on \(\R^m\) then it is Lipschitz equivalent to \(\norm \cdot_1\).
\end{theorem}

\begin{proof}
  Let \(S = \{v\in \R^m: \norm v_1 = 1 \}\). Claim \(S\) is compact with respect to \(\norm \cdot_1\): \(S\) is clearly bounded. Consider \(g:(\R^m, \norm \cdot_1) \to (\R, |\cdot|), v\mapsto \norm v_1\). \(g\) is continuous and \(S = g^{-1}(\{1\})\). As \(\{1\} \subset \R\) is closed \(S\) is closed. So by Heine-Borel \(S\) is compact.

  By Corollary \(f:(S, \norm \cdot_1) \to (\R, |\cdot|)\) given by \(f(v) = \norm v\) is continuous. By the Maximum Value Theorem there exists \(v_\pm\in S\) with
  \[
    f(v_-) \leq f(v') \leq f(v_+)
  \]
  for all \(v' \in S\). Let \(C_\pm = f(v_\pm)\). Notice that
  \[
    v_\pm\in S \Rightarrow \norm{v_\pm}_1 = 1 \Rightarrow v_\pm \neq0 \Rightarrow C_-=\norm{v_\pm} \neq 0.
  \]
  Let \(C = \max(C_+,1/C_-)\). Then
  \[
    \frac{1}{C} \leq C_- \leq f(v) = \norm{v} \leq C_+ \leq C
  \]
  for all \(v \in S\).

  Finally, if \(v \in \R^m\setminus\{0\}\) then \(v/\norm v_1 \in S\) so
  \[
    \frac{1}{C} \leq \norm*{\frac{v}{\norm v_1}} \leq C
  \]
  and Lipschitz equivalence condition follows.
\end{proof}

\begin{corollary}
  Any two norms on \(\R^m\) are Lipschitz equivalent.
\end{corollary}

\begin{proof}
  Lipschitz equivalence is an equivalence relation.
\end{proof}

\subsection{Completeness}

Let \(V\) be a normed vector space.

\begin{definition}[Cauchy sequence]
  A sequence \((v_n)\) in \(V\) is \emph{Cauchy} if for any \(\varepsilon>0\), there exists \(N\) such that for all \(n,m\geq N\), \(\norm{v_n-v_m} < \varepsilon\).
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item If \((v_n)\to v\) then \((v_n)\) is Cauchy.
    \begin{proof}
      Given \(\varepsilon>0\), pick \(N\) such that \(\norm{v_n-v} < \varepsilon/2\) for \(n\geq N\). Then for \(n,m \geq N\),
      \[
        \norm{v_n-v_m} \leq \norm{v_n-v}+ \norm{v-v_m} < \varepsilon.
      \]
    \end{proof}
  \item If \((\sum_{i=1}^{n}1/i )\) is not Cauchy since for any fixed \(N\), \(\sum_{i=N}^{m}1/i \to \infty \) as \(m\to \infty\).
  \end{enumerate}
\end{eg}

Informally, a Cauchy sequence \emph{wants} to converge: given \(\varepsilon>0\), pick \(N\) such that \(\norm{v_n-v_m}< \varepsilon\) for all \(n,m\geq N\). Then \(\norm{v_n-v_N} < \varepsilon\) for all \(n\geq N\) so \(v_n \in B_\varepsilon(v_N)\).

But there may \emph{not} be anything for it to converge to!

\begin{eg}
  \(V = C[0,1]\) with \(\norm \cdot_1\). Let \(f_n(x) =
  \begin{cases}
    0 & x\in[0,1/2] \\
    n(x-1/2) & x\in[1/2,1/2+1/n] \\
    1 & x\geq 1/2+1/n
  \end{cases}
  \) Then \((f_n)\) is Cauchy but does not converge to any \(f\in C[0,1]\).
\end{eg}
%TODO: add a plot

\begin{eg}[(Not quite an) Example]
  Let \((V, \norm \cdot) = (\Q, \norm \cdot)\), let \(v_n\) be the first \(n\)-decimal place expansion of \(\pi\). Then \((v_n)\) is Cauchy but does not converge to any \(v\in \Q\).
\end{eg}

\begin{definition}[Completeness]
  A normed vector space \((V, \norm \cdot)\) is \emph{complete} if whenever \((v_n)\) is a Cauchy sequence in \(V\), there exists \(v\in V\) such that \((v_n) \to v\).
\end{definition}

\begin{eg}
  \((C[0, 1], \norm \cdot_1)\) is not complete.
\end{eg}

\begin{theorem}[Completeness of Euclidean Space]
  \label{thm:completeness of R}
  \(\R^m\) is complete.
\end{theorem}

The proof uses two lemmas about Cauchy sequences: suppose \(V\) is a normed vector space and \((v_n)\) is Cauchy, then

\begin{lemma}[Boundedness of Cauchy sequence]
  \label{lem:boundedness of Cauchy}
  \((v_n)\) is bounded.
\end{lemma}

\begin{proof}
  Example sheet.
\end{proof}

\begin{lemma}
  \label{lem:subsequence of Cauchy}
  If there exists a subsequence \((v_{n_j}) \to v \in V\) then \((v_n) \to v\).
\end{lemma}

\begin{proof}
  Given \(\varepsilon > 0\), pick \(N\) such that for all \(n, m \geq N\), \(\norm{v_n - v_m} < \varepsilon/2\). Since \((v_{n_j}) \to v\), exists \(J\) such that whenever \(j \geq J\), \(\norm{v_{n_j} - v} < \varepsilon/2\). Pick \(j \geq J\) such that \(n_j \geq N\). Then for all \(n\geq N\),
  \[
    \norm{v_n - v} \leq \norm{v_n - v_{n_j}} + \norm{v_{n_j} - v} < \varepsilon/2 + \varepsilon/2 = \varepsilon.
  \]
\end{proof}

\begin{proof}[Proof of Theorem~\ref{thm:completeness of R}]
  Suppose \((v_n)\) is a Cauchy sequence in \(\R^n\). By Lemma~\ref{lem:boundedness of Cauchy}, \((v_n)\) is bounded. By Bolzano-Weierstrass, it has a convergent subsequence \((v_{n_j}) \to v \in \R^n\). By Lemma~\ref{lem:subsequence of Cauchy} \((v_n) \to v \in \R^n\). So any Cauchy sequence in \(\R^n\) converges to \(v\in \R^n\). \(\R^n\) is complete.
\end{proof}

We saw before that \((C[0, 1], \norm \cdot_\infty)\) does not have Bolzano-Weierstrass property. Nevertheless, it is complete:

\begin{theorem}
  Let \([a, b]\) be a bounded interval in \(\R\), then \(C[a, b]\) is complete with respect to \(\norm \cdot_\infty\).
\end{theorem}

\begin{proof}
  Suppose \((f_n)\) is Cauchy in \(C[a, b]\). We must find \(f\in C[a, b]\) such that \((f_n) \to f\) uniformly on \([a, b]\).

  Give \(\varepsilon > 0\), pick \(N\) such that whenever \(n,m \geq N\),
  \begin{equation}
    \label{eqn:Cauchy uniform}
    |f_n(x) - f_m(x)| \leq \max_{x \in [a,b]}|f_n(x) - f_m(x)| = \norm{f_n - f_m}_\infty < \varepsilon/2
    \tag{\(\ast\)}
  \end{equation}
  i.e.\ for all \(x \in [a, b]\), the sequence \((f_n(x))\) is Cauchy in \(\R\). Since \(\R\) is complete, \(\lim_{n \to \infty}f_n(x)\) exists. Now define \(f(x) = \lim_{n \to \infty}f_n(x)\). Claim \((f_n) \to f\) uniformly on \([a, b]\): given \(\varepsilon > 0\), choose \(N\) as in~\eqref{eqn:Cauchy uniform}. Given \(x\), choose \(M\) such that \(|f_n(x) - f(x)| < \varepsilon/2\) for \(n \geq M\). Let \(m' = \max\{M, N\}\). Then for \(n \geq N\),
  \[
    |f_n(x) - f(x)| \leq |f_n(x) - f_{m'}(x)| + |f_{m'}(x) - f(x)| < \varepsilon/2 + \varepsilon/2 = \varepsilon.
  \]
  Since the uniform limit of continuous functions is continuous, \((f_n) \to f \in C[a, b]\). \((C[a, b], \norm \cdot_\infty)\) is complete.
\end{proof}

\begin{definition}[Normed subspace]
  Let \((V, \norm \cdot)\) and \((V', \norm \cdot')\) be two normed vector spaces. We say \(V\) is a \emph{normed vector subspace} of \(V'\) if
  \begin{enumerate}
  \item \(V \leq V'\) as a vector space,
  \item \(\norm v = \norm v'\) for all \(v \in V\).
  \end{enumerate}

\end{definition}

\begin{remark}\leavevmode
  \begin{enumerate}
  \item If \(V \subseteq V'\), \(V\) is complete then \(V\) is a closed subset of \(V'\).
    \begin{proof}
      Suppose \((v_n)\) is a sequence in \(V\) and \((v_n) \to v' \in V'\). Then \((v_n)\) is Cauchy in \(V\) so \((v_n) \to v \in V\). By uniqueness of limits \(v = v' \in V\) so \(V \subseteq V\) is closed.
    \end{proof}
  \item If \((V, \norm \cdot)\) is a normed space then there exists a complete normed pace \((\cl V, \norm \cdot)\) which contains \(V\) as a dense subspace (dense means that any \(v \in V\) is a limit of sequence in \(V\)). This \(\cl V\) is the \emph{completion} of \(V\) and is unique up to isomorphism of normed space.
  \end{enumerate}
\end{remark}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(\R\) is the completion of \(\Q\) with \(|\cdot|\).
  \item The completion of \((C[0, 1], \norm \cdot_1)\) is the space of Lebesgue integrable functions on \([0, 1]\).
    \end{enumerate}
\end{eg}

\subsection{Uniform Continuity}

Suppose \(V\) and \(W\) are normed spaces and \(X \subseteq V\),

\begin{definition}[Uniform continuity]
  \(f: W \to W\) is \emph{uniformly continuous} if
  \[
    \forall \varepsilon>0, \, \exists \delta>0 \, \forall v, w \in X, \, \norm{v - w} < \delta \Rightarrow \norm{f(v) - f(w)} < \varepsilon.
  \]
\end{definition}

\begin{note}\leavevmode
  \begin{itemize}
  \item \(f\) is continuous means that if I give you \(\varepsilon > 0\) and \(v \in X\), you find \(\delta > 0\) such that \(\norm{f(v) - f(w)} < \varepsilon\) whenever \(\norm{v - w} < \delta\).
  \item \(f\) is uniformly means that if I give you \(\varepsilon > 0\), you find \(\delta > 0\) which works for all \(v \in X\).
  \end{itemize}
\end{note}

Clearly uniform convergence imples convergence but the converse is false.

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(f: \R \to \R, f(x) = x^2\) is not uniformly continuous since \(f(x + \delta/2) - f(x) = x \delta + \delta^2/4 > 1\) if \(x > 1/\delta\).
  \item Suppose \(a, b \in \R\), \(f: (a, b) \to \R\) is uniformly continuous, then \(f\) is bounded on \((a, b)\):
    \begin{proof}
      Suppose \(|f(x) - f(y)| < 1\) whenever \(|x - y| < 2 \delta\), then
      \[
        |f(x) - f(y)| \leq \left| f(x) - f(\frac{x+y}{2}) \right| + \left| f(\frac{x+y}{2}) - f(y) \right| < 1 + 1 = 2
      \]
      Similarly \(|x - y| < n \delta\) implies that \(|f(x) - f(y)| < n\) so \(f\) is bounded on \((a, b)\).
    \end{proof}
    \item \(f:(0, 1) \to \R, f(x) = 1/x\) is continuous but not bounded so not uniformly continuous.
    \item \(f:(0, 1) \to \R, f(x) = \sin(1/x)\) is not unifornly continuous since for any \(\delta > 0\), there exists \(x, x' \in(0, \delta)\) with \(f(x) = 1, f(x') = -1\).
  \end{enumerate}
\end{eg}

\begin{theorem}
  If \(C \subseteq V\) is compact and \(f: C \to W\) is continuous then \(f\) is uniformly continuous.
\end{theorem}

\begin{proof}
  By contradiction. Suppose \(f\) satisfies the hypotheses but is not uniformly continuous, i.e.\ \(\exists a > 0\) such that there is no \(\delta > 0\) with \(\norm{f(v) - f (w)} < a\) whenever \(\norm{v - w} < \delta\). Thus \(\forall n > 0\), \(\exists v_n, w_n\) such that \(\norm{v_n - w_n} < 1/n\) but \(\norm{f(v_n) - f(w_n)} \geq a\). Since \(C\) is compact, \((v_n)\) has a convergent subsequence \((v_{n_j}) \to v \in C\). Claim \((w_{n_j}) \to v\):
  \begin{proof}
    \((v_{n_j}) \to  v\) so \(\lim_{j\to \infty}\norm{v_{n_j} - v} = 0\). \(\norm{v_n - w_n} < 1/n\) so \(\lim_{j\to \infty}\norm{v_{n_j} - w_{n_j}} = 0\). Then
    \[
      0 \leq \norm{w_{n_j} - v} \leq \norm{w_{n_j} - v_{n_j}} + \norm{v_{n_j} - v}
  \]
  so by squeeze rule \(\lim_{j\to \infty} \norm{w_{n_j} - v} = 0\).
  \end{proof}
  Now we claim \(\lim_{j\to \infty} \norm{f(v_{n_j}) - f(w_{n_j})} = 0\):
    \begin{proof}
      \((v_{n_j}) \to v\), \(f\) is continuous so \((f(v_{n_j})) \to f(v)\).
      Similarly \((w_{n_j}) \to v\), so \((f(w_{n_j})) \to f(v)\) as well. Then
      \[
        0 \leq \norm{f(v_{n_j}) - f(w_{n_j})} \leq \norm{f(v_{n_j}) - f(v)} + \norm{f(w_{n_j}) - f(v)}
      \]
      and the result follows by squeeze rule.
    \end{proof}
    Now choose \(J\) such that \(\norm{f(v_{n_j}) - f(w_{n_j})} < a\) whenver \(j \geq J\). Then let \(N = n_J\), \(\norm{f(v_n) - f(w_n)} < a\) whenever \(n \geq N\). However, this contradicts the fact that \(\norm{f(v_n) - f(w_n)} \geq a > 0\) for all \(n\).
\end{proof}

\subsubsection{Application: Riemann Integral}

Recall from IA Analysis I: \(g: [a, b] \to \R \) is \emph{piecewise constant} if \(\exists a = a_0 < a_1 < \dots < a_n = b\) such that \(g(x) = c_i\) for all \(x\in (a_{i-1}, a_i)\). Let
\[
  P[a, b] = \{g: [a, b] \to \R: g \text{ is piecewise continuous} \}
\]

\begin{notation}
  \(f \leq g\) means for all \(x \in [a, b]\), \(f(x) \leq g(x)\).
\end{notation}

If \(g \in P[a, b]\), define
\[
  I(g) = \sum_{i=1}^{n}c_i(a_i - a_{i-1})
\]
to be the signed area under the graph of \(g\).

\begin{lemma}
  If \(f,g \in P[a, b]\), then
  \begin{enumerate}
  \item \(f + \lambda g \in P[a, b]\) and \(I(f + \lambda g) = I(f) + \lambda I(g)\).
  \item If \(f \geq 0\) then \(I(f) \geq 0\).
  \item If \(f \geq g\) then \(I(f) \geq I(g)\).
  \end{enumerate}
\end{lemma}


If \(f \in B[a, b]\), define
\begin{align*}
  \riem U(f) &= \{ g \in P[a, b]: g \geq f\} \\
  \riem L(f) &= \{ g \in P[a, b]: g \leq f\}
\end{align*}
Now define
\begin{align*}
  U(f) &= \{ I(g): g \in \riem U(f) \} \\
  L(f) &= \{ I(g): g \in \riem L(f) \}
\end{align*}
so given \(g_+ \in \riem U(f), g_- \in \riem L(f)\), \(g_- \leq f \leq g_+\) so \(I(g_-) \leq I(g_+)\). Now define
\begin{align*}
  u(f) &= \inf U(f) \\
  l(f) &= \sup L(f)
\end{align*}

\begin{definition}[Riemann integral]
  \(f\) is \emph{Riemann integrable} if \(u(f) = l(f)\). In this case define
  \[
    \int_{a}^{b} f(x) dx = u(f) = l(f).
  \]
\end{definition}

\begin{theorem}
  If \(f \in C[a, b]\) then \(f\) is Riemann integrable.
\end{theorem}

\begin{proof}
  By Maximum Value Theorem \(f \in B[a, b]\). Claim given \(\varepsilon > 0\), \(\exists g_+ \in \riem U(f), g_- \in \riem L(f)\) such that \(I(g_+) - I(g_-) < \varepsilon\):
  \begin{proof}
    Since \([a, b]\) is compact, \(f\) is uniformly continuous. Choose \(\delta > 0 \) such that \(|f(x) - f(y)| < \varepsilon/(b-a)\) whenever \(|x - y| < \delta\).
    
    Choose \(a = a_0 < \dots < a_n = b\) such that \(a_i - a_{i-1} < \delta\) for all \(i\). Define
    \begin{align*}
      c_i^+ &= \max_{x \in [a_{i-1}, a_i]} f(x) \\
      c_i^- &= \min_{x \in [a_{i-1}, a_i]} f(x) \\
    \end{align*}
    If \(x, y \in [a_{i-1}, a_i]\), \(|x - y| < \delta\) so \(c_i^+ - c_i^- < \varepsilon/(a_{i-1}, a_i)\). Now take \(g_\pm(x) = c_i^\pm\) if \(x \in [a_{i-1}, a_i]\). By construction for \(x \in [a_{i-1}, a_i]\),
    \[
      g_+(x) \geq c_i^+ = \max_{x \in [a_{i-1}, a_i]}f(x) \geq f(x)
    \]
    so \(g_+ \geq f\). Similar for \(g_-\). It follows that \(I(g_+) - I(g_-) < \varepsilon\).
  \end{proof}

  With this result, the proof of the theorem is almost apparent: since
  \[
    I(g_-) \leq l(f) \leq u(f) \leq I(g_+),
  \]
  \(0 \leq u(f) - l(f) \leq I(g_+) - I(g_-) \leq \varepsilon\) for all \(\varepsilon > 0\). Thus \(u(f) = l(f)\) and \(f\) is Riemann integrable.
\end{proof}

\section{Differential Calculus on \texorpdfstring{\(\R^n\)}{R\^{}n}}

\subsection{Derivative, First Attempt}

It is natural to ask what is the generalisation of differentiation on \(\R\) to higher dimension. More specifically,

\begin{question}\leavevmode
  \begin{enumerate}
  \item What does it mean for \(F: \R^2 \to \R\) to be differentiable?
  \item If \(F\) is differentiable, what is its derivative?
  \end{enumerate}
\end{question}

Recall from multivariate calculus the partial derivative
\begin{align*}
  \frac{\partial F}{\partial x_1} \Big|_{(a_1, a_2)} &= \D_1 F|_{(a_1, a_2)} \\
                                                     &= \left( \frac{d}{dt} F(a_1 + t, a_2) \right) \big|_{t = 0} \\
                                                     &= \lim_{h \to 0} \frac{F(a_1 + h, a_2) - F(a_1, a_2)}{h}
\end{align*}
Similar for \(\frac{\partial F}{\partial x_2}\).

\begin{note}
  Just becuase \(\frac{\partial F}{\partial x_i}\) exists does not mean that \(F\) is differentiable at \(a = (a_1, a_2)\):

  \begin{eg}\leavevmode
    \begin{itemize}
    \item \[
      F(x_1, x_2) =
      \begin{cases}
        0 & \text{ if } x_1 = 0 \text{ or } x_2 = 0 \\
        1 & \text{ otherwise}
      \end{cases}
    \]
    Then \(\frac{\partial F}{\partial x_1} = \frac{\partial F}{\partial x_2} = 0\) at \((0, 0)\) but \(F\) is not even continuous. Heuristically, a good definition of differentiability should not allow this (as this is not compatible with the old definition of differentiability).
  \item If one insists that differentiability does not imply continuity (by whatever means) and declare \(F\) as differentiable whenever \(\frac{\partial F}{\partial x_i}\) exists, then consier \(G(x_1, x_2) = F(x_1 + x_2, x_1 - x_2)\), then \(\frac{\partial G}{\partial x_1}\) does not eve exist. This is even worse: the composition of differentiable functions is not differentiable!
  \end{itemize}
  \end{eg}
\end{note}

The existence of partial derivatives is not stron enough as \(\frac{\partial F}{\partial x_i}\) merely tells us about restriction of \(F\) to coordinate axes.

To answer Q1, recall that \(f: \R \to \R\), \(f'(a) = c\) means that
\[
  \lim_{h \to 0} \frac{f(a+h) - f(a)}{h} = c.
\]
Graphically, \(y = T(x)\) is the tangent line to \(y = f(x)\) at \((a, f(a))\) where \(T(x) = f(a) + c(x - a)\). In other words,
\begin{align*}
  \lim_{h \to 0} \frac{f(a + h) - T(a + h)}{h} &= \lim_{h \to 0} \left( \frac{f(a + h) - f(a)}{h} - \frac{ch}{h} \right) \\
                                               &= f'(a) -c \\
                                               &= c - c \\
                                               &= 0
\end{align*}
so \(f\) is differentiable at \(a\) if and only if \(f\) is well-approximately by its tangent line near \(a\) in the sense that
\[
  \lim_{h \to 0} \frac{f(a + h) - T(a + h)}{h} = 0.
\]

\begin{answer}[Answer to Q1]
  \(F: \R^2 \to \R\) is differentiable at \(a\) if it is well-approximated by its tangent plane \(z = T(x_1, x_2)\) at \((a, F(a))\) in the sense that
  \begin{equation}
    \label{eqn:derivative}
    \lim_{h \to 0} \frac{F(a + h) - T(a + h)}{\norm h} = 0
    \tag{\(\ast\)}
  \end{equation}
  where the limit will be made rigorous later.
\end{answer}

Now we have to ask: what is the tangent plane? It is the equation
\begin{align*}
  z &= T(x_1, x_2) \\
    &= F(a_1, a_2) +c_1(x_1 - a_1) + c_2(x_2 - a_2)
\end{align*}
for some \(c_1\) and \(c_2\) so
\[
  T(a + h) = F(a_1, a_2) + c_1h_1 + c_2h_2 = F(a_1, a_2) + L(h)
\]
where \(h = (h_1, h_2)\) and \(L: \R^2 \to \R\) is a linear map.

\begin{answer}[Answer to Q2]
  The derivative \(\D F|_a\) is the linear map \(L\).
\end{answer}

What should \(c_1\) and \(c_2\) that we used to parameterise \(T\) be? Equation~\eqref{eqn:derivative} says that
\[
  \lim_{h \to 0} \frac{F(a + h) - F(a_1, a_2) - c_1h_1 - c_2h_2}{\norm h} = 0
\]
Taking \(h = (h_1, 0)\) gives
\begin{align*}
  0 &= \lim_{h \to 0} \frac{F(a + h) - F(a_1, a_2) - c_1h_1}{h_1} \\
    &= \lim_{h_1 \to 0} \left( \frac{F(a_1 + h, a_2) - F(a_1, a_2)}{h_1} - c_1 \right) \\
    &= \frac{\partial F}{\partial x} \Big|_{(a_1, a_2)}
\end{align*}
so \(c_1 = \frac{\partial F}{\partial x_1}|_{(a_1, a_2)}\). Similar for \(c_2\). So
\begin{align*}
    \D F|_a &= \frac{\partial F}{\partial x_1} h_1 + \frac{\partial F}{\partial x_2} h_2 \\
            &= \left( \frac{\partial F}{\partial x_1} \quad \frac{\partial F}{\partial x_2} \right) \binom{h_1}{h_2}
\end{align*}
i.e.\ as a map \(\D F|_a\) is given by the matrix
\[
  (\D_1 F|_a \quad \D_2 F|_a ).
\]

\begin{eg}
  Define \(F\) as in the previous example. \(\frac{\partial F}{\partial x_i} = 0\) so if there were a tangent plane at 0 it would be given by
  \[
    z = T(x_1, x_2) = 0 + 0 \cdot x_1 + 0 \cdot x_2 = 0
  \]
  What a terrible approximation to \(F\)! No wonder \(F\) is not differentiable at \(0\).
\end{eg}

More generatlly,

\begin{definition}[Differentiability]
  Given \(F: \R^n \to \R^m\), \(F\) is \emph{differentiable} at \(a\) if there is a linear function \(L: \R^n \to \R^m\) such that
  \[
    \lim_{h \to 0} \frac{F(a + h) - F(a) - L(h)}{\norm h} = 0.
  \]
  If so, say \(\D F|_a = L\) is the \emph{derivative} of \(F\) at \(a\).
\end{definition}

If \(F = (F_1, \dots, F_m)\) is differentiable at \(a\), the derivative is given by the matrix
\[
  \D F|_a =
  \begin{pmatrix}
    \D_1F_1|_a & \cdots & \D_nF_1|_a \\
    \vdots & \ddots & \vdots \\
    \D_1F_m|_a & \cdots & \D_nF_m|_a
  \end{pmatrix}
\]
  

\begin{eg}
  If \(\gamma: \R \to \R^n\),
  \[
    \D \gamma|_t =
    \begin{pmatrix}
      \gamma_1'(t) \\
      \vdots \\
      \gamma_m'(t)
    \end{pmatrix}
  \]
  Recall the chain rule: given \(F: \R^m \to \R\),
  \begin{align*}
    \frac{d}{dt} F(\gamma(t)) &= \sum_{i = 1}^{m} \frac{\partial F}{\partial x_i} \Big|_{\gamma(t)} \gamma'_i(t) \\
                              &=
                                  \left( \frac{\partial F}{\partial x_1}  \cdots \frac{\partial F}{\partial x_m} \right)
                                \begin{pmatrix}
                                  \gamma_1'(t) \\
                                  \vdots \\
                                  \gamma_m'(t)
                                \end{pmatrix} \\
                              &= [C]
  \end{align*}
  As matrix multiplication is composition of linear maps,
  \[
    \D( F \compose \gamma)|_t = \D F|_{\gamma(t)} \compose \D \gamma|_t.
  \]
\end{eg}

Similarly for \(F: \R^n \to \R^m\), \(G: \R^m \to \R^l\) differentiable, we will show that
\[
    \D( F \compose G) = \D F \compose \D G.
\]

\subsection{Limits}

Suppose \(V\) and \(W\) are normed spaces, \(U \subseteq V\) open, and \(v_0 \in U\), \(f: U \setminus \{v_0\} \to W\),

\begin{definition}[Limit]
  We say the \emph{limit} of \(f\) at \(v_0\) is \(w\), denoted by
  \[
    \lim_{v \to v_0} f(v) = w,
  \]
  if for every \(\varepsilon > 0\), exists \(\delta > 0\) such that \(\norm{f(v) - w} < \varepsilon\) whenever \( 0 < \norm{v - v_0} < \delta\) and \(v \in U\).
\end{definition}

\begin{note}\leavevmode
  \begin{enumerate}
  \item \(\lim_{v \to v_0} f(v) = w\) if and only if \(\lim_{v \to v_0} \norm{f(v) - w} = 0\).
  \item \(\lim_{v \to v_0} f(v) = w\) if and only if for every sequence \((x_i)\) in \(U\setminus\{v_0\}\) which converges to \(v_0\), the sequence \((f(x_i)) \to w\).
  \item If \(\norm \cdot_V\) and \(\norm \cdot_V'\) are Lipschitz equivalent on \(V\) and \(\norm \cdot_W\) and \(\norm \cdot_W'\) are Lipschitz equivalent on \(W\) then \(\lim_{v \to v_0} f(v) = w\) with respect to \(\norm \cdot_V\) and \(\norm \cdot_W\) if and only if with respect to \(\norm \cdot_V'\) and \(\norm \cdot_W'\). In particular if \(V = \R^n\), \(W = \R^m\) then the limit is unambiguously defined without specifying any norms.
  \end{enumerate}
\end{note}

\begin{proposition}[Properties of limits]\leavevmode
  \begin{enumerate}
  \item \(\lim_{v \to v_0} (f(v) + \lambda g(v)) = \lim_{v \to v_0} f(v) + \lambda \lim_{v \to v_0} g(v)\).
  \item If \(\lambda: U \setminus \{v_0\} \to \R\) then
    \[
      \lim_{v \to v_0} \lambda(v)f(v) = \lim_{v \to v_0}\lambda(v) \lim_{v \to v_0} f(v)
    \]
    if both limits on RHS exist.
  \item Squeeze rule: if \(\norm{f(v) - w} \leq \norm{g(v) -w}\) and \(\lim_{v \to w_o}g(v) = w\) then \(\lim_{v \to v_0} f(v) = w\).
  \item If \(f: U\setminus\{v_0\} \to \R^m, f(v) = (f_1(v), \dots, f_m(v))\), \(w = (w_1, \dots, w_m)\) then \(\lim_{v \to v_0} f(v) = w\) if and only if \(\lim_{v \to v_0} f_i(v) = w_i\) for all \(1 \leq i \leq m\).
  \item If \(\lim_{v \to 0} f(v) = w\) and \(x \in V\setminus\{0\}\) then \(\lim_{t \to 0} f(t x) = w\).
  \end{enumerate}
\end{proposition}

\begin{proof}
  The first three are the same as the real case in IA Analysis I.
  
  For (4), \((f(x)) \to w\) if and only if \((f_i(x_n)) \to w_i\) for all \(i\) so the result follows from sequential characterisation of limits.

  For (5), given \(\varepsilon > 0\), exists \(\delta > 0\) such that \(\norm{f(v) - w} < \varepsilon\) whenever \(0 < \norm v < \delta\). Then for \(0 < |t| < \delta/\norm x\), \(0 < \norm{t x} < \delta\) so \(\norm{f(t x) - w} < \varepsilon\) so \(\lim_{t \to 0} f(t x) = w\).
\end{proof}

\begin{note}
  \(\lim_{t \to 0} f(t x) = w\) for all \( x \in V\setminus \{0\}\) does not imply that \(\lim_{v \to 0} f(v) = w\).
\end{note}

\begin{eg}
  Let
  \begin{align*}
    f: \R^2\setminus\{0\} &\to \R \\
    f(x_1, x_2) &=
                  \begin{cases}
                    \frac{x_1^2}{x_2^2}(x_1^2 + x_2^2) & x_2 \neq 0 \\
                    0 & x_2 = 0
                  \end{cases}
  \end{align*}
  Then if \(x = (x_1, x_2)\) with \(x_2 \neq 0\),
  \[
    \lim_{t \to 0} f(t x) = \lim_{t \to 0} \frac{x_1^2}{x_2^2}(x_1^2 + x_2^2) t^2 = 0
  \]
  If \(x = (x_1, 0)\) with \(x_1 \neq 0\) then \(\lim_{t \to 0} f(t x) = \lim_{t \to 0} 0 = 0\). But
  \[
    f(t, t^2) = \frac{t^2}{t^4}(t^2 + t^4) = 1 + t^2 \geq 1
  \]
  for \(t \neq 0\) so taking \(t = \frac{1}{n}\), we find points \((1/n, 1/n^2)\) arbitrarily close to \((0, 0)\) with \(f(1/n, 1/n^2) \geq 1\) so \(\lim_{v \to 0} f(v) \neq 0\).
\end{eg}

\begin{definition}[Continuity]
  \(f: U \to W\) is \emph{continuous} at \(v_0\) if
  \[
    \lim_{v \to v_0} f(v) = f(v_0).
  \]
\end{definition}

\begin{lemma}
  \(f\) is continuous at \(v_0\) if and only if \((f(x_i)) \to f(v_0)\) whenever \((x_i)\) is a sequence in \(U\) converging to \(v_0\).
\end{lemma}

\begin{proof}
  Sequential characterisation of limit.
\end{proof}

Recall that previously we have defined continuity of a function \emph{on a domain}. Here we define continuity of a function \emph{at a point}. Fortunately, these two notions of continuity are compatible:

\begin{corollary}
  \(f\) is continuous if and only if \(f\) is continuous at every \(v \in U\).
\end{corollary}

\begin{proof}
  \(f\) is continuous at every \(v \in U\) if and only if \((x_i) \to v \in U \Rightarrow (f(x_i)) \to f(v)\) if and only if \(f\) is continuous.
\end{proof}

\subsection{Derivative, Formal Version}

Suppose \(U \subseteq \R^n\) is open, \(f: U \to \R^m\) and \(a \in U\).

\begin{definition}[Differentiability]
  \(f\) is \emph{differentiable} at \(a\) if there is a linear function \(L: \R^n \to \R^m\) such that
  \begin{equation}
    \label{eqn:derivative2}
    \lim_{h \to 0} \frac{f(a + h) - f(a) - L(h)}{\norm h} = 0
    \tag{\(\ast\)}
  \end{equation}
  in which case we say \(\D f|_a = L\) is the \emph{derivative} of \(f\) at \(a\).
\end{definition}

\begin{note}\leavevmode
  \begin{enumerate}
  \item Equivalently, \(f(a + h) = f(a) + L(h) + \norm h \alpha(h)\) where \(\lim_{h \to 0}\alpha(h) = 0\).
  \item If~\eqref{eqn:derivative2} holds for two linear functions \(L, L': \R^n \to \R^m\) then \(L = L'\) so \(\D f|_a\) is well-defined.
    \begin{proof}
      Subtraction gives
      \[
        \lim_{h \to 0} \frac{L(h) - L'(h)}{\norm h} = 0
      \]
      which implies that for any \(v \in \R^n\setminus\{0\}\),
      \[
        0 = \lim_{t \to 0^+} \frac{L(t v) - L'(t v)}{\norm{tv}} = \lim_{t \to 0^+} \frac{L(v) - L'(v)}{\norm{v}} = \frac{L(v) - L'(v)}{\norm{v}}
      \]
      so \(0 = L(v) - L'(v) = (L - L')(v)\) for all \(v \neq 0\). They certainly agree at \(0\).
    \end{proof}
  \item The definition of derivative does not depend on the norm used.
  \end{enumerate}
\end{note}

\end{document}
