\documentclass[a4paper]{article}

\def\npart{III}

\def\ntitle{Category Theory}
\def\nlecturer{P.\ T.\ Johnstone}

\def\nterm{Michaelmas}
\def\nyear{2018}

\input{header}

\renewcommand{\c}[1]{\mathbf{#1}}
\DeclareMathOperator{\ob}{ob}
\DeclareMathOperator{\mor}{mor}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\cod}{cod}

\newcommand{\Set}{{\c{Set}}}
\newcommand{\Top}{{\c{Top}}}
\newcommand{\Rel}{{\c{Rel}}}

\newcommand{\mono}{\rightarrowtail}
\newcommand{\epi}{\twoheadrightarrow}

\newcommand{\adjoint}{\dashv}

\begin{document}

\input{titlepage}

\tableofcontents

\section{Definitions and examples}

\begin{definition}[category]\index{category}
  A \emph{category} \(\c C\) consists of
  \begin{enumerate}
  \item a collection \(\ob \c C\) of \emph{objects} \(A, B, C, \dots\),
  \item a collection \(\mor \c C\) of \emph{morphisms} \(f, g, h, \dots\),
  \item two operations \(\dom\) and \(\cod\) assigning to each \(f \in \mor \c C\) a pair of objects, its \emph{domain} and \emph{codomain}. We write \(A \xrightarrow{f} B\) to mean \(f\) is a morphism and \(\dom f = A, \cod f = B\),
  \item an operation assigning to each \(A \in \ob \c C\) a morhpism \(A \xrightarrow{1_A} A\),
  \item a partial binary operation \((f, g) \mapsto fg\) on morphisms, such that \(fg\) is defined if and only if \(\dom f = \cod g\) and let \(\dom fg = \dom g, \cod fg = \cod f\) if \(fg\) is defined
  \end{enumerate}
  satisfying
  \begin{enumerate}
  \item \(f 1_A = f = 1_B f\) for any \(A \xrightarrow{f} B\),
  \item \((fg) h = f(gh)\) whenever \(fg\) and \(gh\) are defined.
  \end{enumerate}
\end{definition}

\begin{remark}\leavevmode
  \begin{enumerate}
  \item This definition is independent of any model of set theory. If we're given a particuar model of set theory, we call \(\c C\) \emph{small}\index{category!small} if \(\ob \c C\) and \(\mor \c C\) are sets.
  \item Some texts say \(fg\) means \(f\) followed by \(g\) (we are not).
  \item Note that a morphism \(f\) is an identity if and only if \(fg = g\) and \(hf = h\) whenever the compositions are defined so we could formulate the definitions entirely in terms of morphisms.
  \end{enumerate}
\end{remark}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item The category \(\Set\) has all sets as objects and all functions between sets as morphisms (strictly, morphisms \(A \to B\) are pairs \((f, B)\) where \(f\) is a set theoretic function).
  \item The category \(\c{Gp}\) where objects are groups, morphisms are group homomorphisms. Similarly \(\c{Ring}\) is the category of rings and \(\c{Mod}_R\) is the category of \(R\)-modules.
  \item The category \(\Top\) has all topological spaces as objects and continuous functions as morphisms. Similarly \(\c{Unif}\) the category of uniform spaces with uniformly continuous functions and \(\c{Mf}\) the category of manifolds with smooth maps.
  \item The cateogry \(\c{Htpy}\) has same objects as \(\Top\) but morphisms are homotopy classes of continuous functions.

    More generally, given \(\c C\) we call an equivalence relation \(\simeq\) on \(\mor \c C\) a \emph{congruence} if \(f \simeq g\) implies \(\dom f = \dom g, \cod f = \cod g\) and \(fh \simeq gh\) and vice versa. % ?
    Then we have a set \(\c C / \simeq\) with the same objects as \(\c C\) but congruence classes as morphisms.
  \item Given \(\c C\), the \emph{opposite category}\index{category!opposite} \(\c C^{\text{op}}\) has the same objects and morphisms as \(\c C\), but domain and codomain interchanged and \(fg\) in \(\c C^{\text{op}}\) is \(gf\) in \(\c C\).

    This leads to \emph{duality principle}: if \(P\) is a valid statement about categories so is \(P^*\) attained by reversing all the arrows.
  \item A small category with one object is a \emph{monoid}, i.e.\ a semigroup with \(1\). In particular, a group is a small category with one object, in which every morphism is an isomorphism (i.e.\ for all \(f\) there exists \(g\) such that \(fg\) and \(gf\) are identities).
  \item A \emph{groupoid} is a category in which every morphism is an isomorphism. For example, for a topological space \(X\), the \emph{fundamental groupoid} \(\pi(X)\) has all points of \(X\) as objects and morphisms \(x \to y\) as homotopy classes rel \({0, 1}\) of paths \(\gamma: [0, 1] \to X\) with \(\gamma(1) = y\).
  \item A \emph{discrete}\index{category!discrete} category is one whose only morphisms are identities. A \emph{preorder} is a category \(\c C\) in which for any pair \((A, B)\) there exists at most one morphism \(A \to B\). A small preorder is a set equipped with a binary relation which is reflexive and transitive. In particular a partially ordered set is a partially ordered set is a small preorder in which the only isomorphisms are identities.
  \item The category \(\Rel\) has the same objects as \(\Set\) but morphisms \(A \to B\) are arbitrary relations. Given \(R \subseteq A \times B, S \subseteq B \times C\), we define
    \[
      S \compose R = \{(a, c) \in A \times C: \exists b \in B \text{ s.t. } (a, b) \in R, (b, c) \in S\}.
    \]
    The identity \(1_A: A \to A\) is \(\{(a, a): a \in A\}\). Similarly, the category \(\c{Part}\) of sets and partial functions (i.e.\ relations such that for all \((a, b), (a, b') \in R\), \(b = b'\)) can be defined.
  \item Let \(K\) be a field. The category \(\c{Mat}_K\) has natural numbers as objects and morphisms \(n \to p\) are \((p \times n)\) matrices with entries from \(K\). Composition is matrix multiplication.
  \end{enumerate}
\end{eg}

\begin{definition}[functor]\index{functor}
  Let \(\c C, \c D\) be categories. A \emph{functor} \(F: \c C \to \c D\) consists of
  \begin{enumerate}
  \item a mapping \(A \mapsto F(A)\) from \(\ob \c C\) to \(\ob \c D\),
  \item a mapping \(f \mapsto F(f)\) from \(\mor \c C\) to \(\mor \c D\) such that
    \begin{align*}
      \dom(F(f)) &= F(\dom f), \cod (Ff) = F \cod(f) \\
      1_{F(A)} &= F(1_A), (F(f))(F(g)) = F(fg)
    \end{align*}
    wherever \(fg\) is defined.
  \end{enumerate}
\end{definition}

\begin{eg}
  We write \(\c{Cat}\) for the category whose objects are all small categories and whose morphisms are functors between them.
\end{eg}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item We have \emph{forgetful functors}\index{functor!forgetful} \(U: \c{Gp} \to \Set, \c{Ring} \to \Set, \Top \to \Set \dots\) and \(\c{Ring} \to \c{AbGp}\) (forget multiplication), \(\c{Ring} \to \c{Mon}\) (forget addition).
  \item Given \(A\), the free group \(F(A)\) has the property given any group \(G\), any \(A \xrightarrow{f} U G\), there is a unique homomorphism \(FA \xrightarrow{\tilde f} G\) extending \(f\).

    \(F\) is a functor \(\Set \to \c{Gp}\): given any \(A \xrightarrow{f} B\), we define \(F(f)\) to be the unique homomorphism extending \(A \xrightarrow{f} B \embed U FB\). Functoriality follows from uniqueness: given \(B \xrightarrow{g} C\), \(F(gf)\) and \((Fg)(Ff)\) are both homomorphisms extending
    \[
      A \xrightarrow{f} B \xrightarrow{g} C \embed U F C.
    \]
  \item Given a set \(A\), we write \(PA\) for the set of all subsets of \(A\). We can make \(P\) into a functor \(\Set \to \Set\): given \(A \xrightarrow{f} B\), we define
    \[
      Pf(A') = \{f(a): a \in A'\}
    \]
    for \(A' \subseteq A\).

    But we also have a functor \(P^*: \Set \to \Set^{\text{op}}\) defined by
    \[
      P^*f(B') = \{a \in A: f(a) \in B'\}
    \]
    for \(B' \subseteq B\).
  \item By a \emph{contravariant functor}\index{functor!contravariant} \(\c C \to \c D\) we mean a functor \(\c C \to \c D^{\text{op}}\) (or \(\c C^{\text{op}} \to \c D\). (A \emph{covariant functor} is one that doesn't reverse arrows)

    Let \(K\) be a field. We have a functor \(\cdot^*: \c{Mod}_K \to \c{Mod}^{\text{op}}_K\) defined by
    \[
      V^* = \{\text{linear maps } V \to K\}
    \]
    and if \(V \xrightarrow{f} W\), \(f^*(\theta) = \theta f\).
  \item We have a functor \(\cdot^\text{op}: \c{Cat} \to \c{Cat}\) which is the identity on morphisms. (note that this is \emph{covariant})
  \item A functor between monoids is a monoid homomorphism.
  \item A functor between posets is an order-preserving map.
  \item Let \(G\) be a group. A functor \(F: G \to \Set\) consists of a ast \(A = F*\) together with an action of \(G\) on \(A\), i.e.\ permutation representation of \(G\). Similarly a functor \(G \to \c{Mod}_K\) is a \(K\)-linear representation of \(G\).
  \item The construction of the fundamental gropu \(\pi_1(X, x)\) of a space \(X\) with basepoint \(x\) is a functor
    \[
      \Top_* \to \c{Gp}
    \]
    where \(\Top_*\) is the category of spaces with a chosen basepoint.

    Similarly, the fundamental groupoid is a functor
    \[
      \Top \to \c{Gpd}
    \]
    where \(\c{Gpd}\) is the category of groupoids and functors between them.
  \end{enumerate}
\end{eg}

\begin{definition}[natural transformation]\index{natural transformation}
  Let \(\c C, \c D\) be categories and \(F, G: \c C \to \c D\) be two functors. A \emph{natural transformation} \(\alpha: F \to G\) consists of an assignment \(A \mapsto \alpha_A\) from \(\ob \c C\) to \(\mor \c D\) such that \(\dom \alpha_A = FA, \cod \alpha_A = GA\) for all \(A\), and for all \(A \xrightarrow{f} B\) in \(\c C\), the square
  \[
    \begin{tikzcd}
      FA \ar[r, "Ff"] \ar[d, "\alpha_A"] & FB \ar[d, "\alpha_B"] \\
      GA \ar[r, "Gf"] & GB
    \end{tikzcd}
  \]
  commutes, i.e.\ \(\alpha_B(Ff) = (Gf)\alpha_A\).
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Given categories \(\c C, \c D\), we write \([\c C, \c D]\) for the category whose objects are functors \(\c C \to \c D\) and whose morphisms are natural transformations.
  \item Let \(K\) be a field and \(V\) a vector space over \(K\). There is a linear map \(\alpha_V: V \to V^{**}\) given by
    \[
      \alpha_V(v)(\theta) = \theta(v)
    \]
    for \(\theta \in V^*\). This is the \(V\)-component of a natural transformation
    \[
      1_{\c{Mod}_K} \to \cdot^{**}: \c{Mod}_K \to \c{Mod}_K.
    \]
  \item For any set \(A\), we have a mapping \(\sigma_A: A \to PA\) sending \(a\) to \(\{a\}\). If \(f: A \to B\) then \(Pf(\{a\}) = \{f(a)\}\). So \(\sigma\) is a natural transformation \(1_\Set \to P\).
  \item Let \(F: \Set \to \c{Gp}\) be the free group functor and \(U: \c{Gp} \to \Set\) the forgetful functor. The inclusions \(A \to UFA\) is a natural transformation \(1_\Set \to UF\).
  \item Let \(G, H\) be groups and \(f, g: G \to H\) be two homomorphisms. Then a natural tranformation \(\alpha: f \to g\) corresponds to an element \(h = \alpha_*\) such that \(h f(x) = g(x) h\) for all \(x \in G\), or equivalently \(f(x) = h^{-1} g(x) h\), i.e.\ \(f\) and \(g\) are conjugate group homomorphisms.
  \item Let \(A\) and \(B\) be two \(G\)-sets, regarded as functors \(G \to \Set\). A natural transformation \(A \to B\) is a function \(f\) satisfying \(f(g . a) = g. f(a)\) for all \(a \in A\), i.e.\ a \(G\)-equivariant map.
  \end{enumerate}
\end{eg}

When we say ``natural isomorphism'', it is ambiguous and can formally mean two different things: one could mean there is a natural transformation going the other way which when composed produces identity, or each component is an isomorphism. It turns out they coincide:

\begin{lemma}
  Let \(F, G: \c C \to \c D\) be two functors and \(\alpha: F \to G\) a natural transformation. Then \(\alpha\) is an isomorphism in \([\c C, \c D]\) if and only if each \(\alpha_A\) is an isomorphism in \(\c D\).
\end{lemma}

\begin{proof}
  Only if is trivial. For if, suppose each \(\alpha_A\) has an inverse \(\beta_A\). We need to prove the \(\beta\)'s satisfy the naturality condition: give \(f: A \to B\) in \(\c C\), we need to show that
  \[
    \begin{tikzcd}
      GA \ar[r, "Gf"] \ar[d, "\beta_A"] & GB \ar[d, "\beta_B"] \\
      FA \ar[r, "Ff"] & FB
    \end{tikzcd}
  \]
  commutes. But
  \[
    (Ff) \beta_A = \beta_B \alpha_B(Ff) \beta_A
    = \beta_B (GF) \alpha_A \beta_A
    =\beta_B (Gf)
  \]
  by naturality of \(\alpha\).
\end{proof}

In study of algebraic theories (for example), we are interested in isomorphisms of objects and investigate the properties of objects ``up to isomorphism''. However, in category theory a weaker notion of isomorphism is often more useful:

\begin{definition}[equivalence]\index{equivalence}
  Let \(\c C\) and \(\c D\) be categories. By an \emph{equivalence} between \(\c C\) and \(\c D\) we mean a pair of functors \(F : \c C \to \c D, G: \c D \to \c C\) together with natural isomorphisms \(\alpha: 1_{\c C} \to GF, \beta: FG \to 1_{\c D}\). We write \(\c C \simeq \c D\) if \(\c C\) and \(\c D\) are equivalent.

  We say a property \(P\) of categories is a \emph{category propery} if whenever \(\c C\) has \(P\) and \(\c C \simeq \c D\) then \(\c D\) has \(P\).
\end{definition}

For example, being a groupoid or a preorder are categorical properies, but being a group or a partial order are not.

\begin{eg}\leavevmode
  \begin{enumerate}
  \item The category \(\c{Part}\) is equivalent to the category \(\Set_*\) of pointed sets (and basepoint preserving functions). We define
    \begin{align*}
      F: \Set_* &\to \c{Part} \\
      (A, a) &\mapsto A \setminus \{a\} \\
    \end{align*}
    and if \(f: (A, a) \to (B, b)\) then \(Ff(x) = f(x)\) if \(f(x) \neq b\) and undefined otherwise, and
    \begin{align*}
      G: \c{Part} &\to \Set_* \\
      A &\mapsto A^+ = (A \cup \{A\}, A)
    \end{align*}
    and if \(f: A \to B\) is a partial function , we define
    \[
      x \mapsto
      \begin{cases}
        f(x) & \text{if } x \in A \text{ and } f(x) \text{ defined} \\
        B & \text{otherwise}
      \end{cases}
    \]
    Then \(FG\) is the identity on \(\c{Part}\) but \(GF\) is not. However there is an isomorphism
    \[
      (A, a) \to ((A \setminus \{a\})^+, A \setminus \{a\})
    \]
   sending \(a\) to \(A \setminus \{a\}\) and everything else to itself. This is natural. 

   Note that there can be no isomorphism \(\Set_* \to \c{Part}\) since \(\c{Part}\) has a \(1\)-element isomorphism class \(\{\emptyset\}\) and \(\Set_*\) doesn't.
 \item The category \(\c{fdMod}_K\) of finite-dimensional vector spaces over \(K\) is equivalent to \(\c{fdMod}_K^{\text{op}}\):  the functors in both directions are \(\cdot^*\) and both isomorphisms are the natural transformations given by double dual.
 \item \(\c{fdMod}_K\) is also equivalent to \(\c{Mat}_K\): we write \(F: \c{Mat}_K \to \c{fdMod}_K\) by \(F(n) = K^n\), and \(F(A)\) is the map represented by \(A\) with respect to the standard basis. To define functor \(G\) the other way, choose a basis for each finite-dimensional vector space and define
   \begin{align*}
     G(V) &= \dim V \\
     G(V \xrightarrow{f} W) &= \text{ matrix representing \(f\) w.r.t.\ chosen bases}
   \end{align*}
   \(GF\) is the identity, provided we choose the standard bases for the space \(K^n\). \(FG \neq 1\) but the chosen bases give isomorphisms \(FG(V) = K^{\dim V} \to V\) for each \(V\), which form a natural isomorphism.
  \end{enumerate}
\end{eg}

Example 3 illustrates a general principle: when constructing a pair of functors between equivalent categories, ususally one is ``canonical'' and the other requires some choice, and a clever choice results in a particularly simple form for one way of composition. The next theorem abstracts away the ``choice'' and tells us when a functor is part of an equivalence purely by its properties.

The criterion is stated in term of ``bijectivity'' of functors, informally. It is generally a bad idea to look at sur/injectivity of functors on objects. Instead the correct way is to look at their behaviour on morphisms.

\begin{definition}[faithful, full, essentially surjective]\index{functor!faithful}\index{functor!full}\index{functor!essentially surjective}
  Let \(\c C \xrightarrow{F} \c D\) be a functor.
  \begin{enumerate}
  \item \(F\) is \emph{faithful} if given \(f, f' \in \mor \c C\) with \(\dom f = \dom f', \cod f = \cod f'\) and \(Ff = Ff'\) then \(f = f'\). 
  \item \(F\) is \emph{full} if given \(FA \xrightarrow{g} FB\) in \(\c D\) then there exists \(A \xrightarrow{f} B\) in \(\c C\) with \(Ff = g\).
  \item \(F\) is \emph{essentially surjective} if for every \(B \in \ob \c D\) there exists \(A \in \ob \c C\) and an isomorphism \(FA \to B\) in \(\c D\).
  \end{enumerate}
\end{definition}

\begin{definition}
  A subcategory \(\c C' \subseteq \c C\) is \emph{full} if the inclusion \(\c C' \to \c C\) is a full functor.
\end{definition}

\begin{eg}
  \(\c{Gp}\) is a full subcategory of \(\c{Mon}\) but \(\c{Mon}\) is not a full subcategory of the category \(\c{SGp}\) of semigroups.
\end{eg}

\begin{lemma}
  Assuming the axiom of choice. A functor \(F: \c C \to \c D\) is part of an equivalence \(\c C \simeq \c D\) if and only if it's full, faithful and essentially surjective.
\end{lemma}

\begin{proof}
  Suppose given \(G, \alpha, \beta\) as in the definition of equivalence of categories. Then for each \(B \in \ob \c D\), \(\beta_B\) is an isomorphism \(FGB \to B\) so \(F\) is essentially surjective.

  Given \(A \xrightarrow{f} B\) in \(\c C\), we can recover \(f\) from \(Ff\) as the via conjugation by \(\alpha\):
  \[
    \begin{tikzcd}
      GFA \ar[r, "GFf"] & GFB \\
      A \ar[u, "\alpha_A"] \ar[r, "f"] & B \ar[u, "\alpha_B"]
    \end{tikzcd}
  \]
  Hence if \(A \xrightarrow{f'} B\) satisfies \(Ff = Ff'\) then \(f = f'\).

  Similarly there is a natural preimage given a morphism in \(\c D\). Given \(FA \xrightarrow{g} FB\), define \(f\) to be the composite
  \[
    \begin{tikzcd}
      GFA \ar[r, "Gg"] & GFB \\
      A \ar[u, "\alpha_A"] \ar[r, dashed] & B \ar[u, "\alpha_B"]
    \end{tikzcd}
  \]
  Then \(GFf = \alpha_B f \alpha_A^{-1} = Gg\). As \(G\) is faithful for the same reasons as \(F\), \(Ff = g\).

  Conversely, for each \(B \in \ob \c D\), choose \(GB \in \ob \c C\) and an isomorphism \(\beta_B: FGB \to B\) in \(\c D\). Given \(B \xrightarrow{g} B'\), define \(Gg: GB \to GB'\) to be the unique morphism whose image under \(F\) is the composition
  \[
    \begin{tikzcd}
      B \ar[r, "f"] & B' \\
      FGB \ar[u, "\beta_B"] \ar[r, dashed] & FGA \ar[u, "\beta_{B'}"]
    \end{tikzcd}
  \]
  Faithfulness implies functoriality: given \(B' \xrightarrow{g'} B''\), \((Gg') (Gg)\) and \(G(g'g)\) have the same image under \(F\) so they are equal.

  By construction, \(\beta\) is a natural transformation \(FG \to 1_{\c D}\).

  Given \(A \in \ob \c C\), define \(\alpha_A: A \to GFA\) to be the unique morphism whose image under \(F\) is
  \[
    FA \xrightarrow{\beta_{FA}^{-1}} FGFA.
  \]
  \(\alpha_A\) is an isomorphism since \(\beta_{FA}\) also has a unique preimage under \(F\). Finally \(\alpha\) is a natural transformation, since any naturality square for \(\alpha\) is mapped by \(F\) to a commutative square (corresponding to naturality square for \(\beta\)) and \(F\) is faithful.
\end{proof}

Note that axiom of choice is only used in the if part. The lemma is useful as it saves us from making explicit choices when showing an equivalence by exhibiting inverses. However note that the choice is always required.

\begin{definition}[skeleton]\index{skeleton}\index{category!skeletal}
  By a \emph{skeleton} of a category \(\c C\) we mean a full subcategory \(\c C_0\) containing one object from each isomorphism class. We say \(\c C\) is \emph{skeletal} if it's a skeleton of itself.
\end{definition}

\begin{eg}
  \(\c{Mat}_K\) is skeletal and the image of \(F: \c{Mat}_K \to \c{fdMod}_K\) is a skeleton of \(\c{fdMod}_K\) (essentially because \(F\) is full and faithful).
\end{eg}

\begin{remark}
  Almost any assertion about skeletons is equivalent to the axiom of choice. See example sheet 1 Q2. This is one reason why we should not restrict out attention to skeletal categories.
\end{remark}

\begin{definition}[monomorphism, epimorphism]\index{monomorphism}\index{epimorphism}
  Let \(A \xrightarrow{f} B\) be a morphism in \(\c C\).
  \begin{enumerate}
  \item We say \(f\) is a \emph{monomorphism} or \emph{monic} if given any pair \(g, h: C \to A\), \(fg = fh\) implies \(g = h\).
  \item We say \(f\) is a \emph{epimorphism} or \emph{epic} if it is a monomorphism in \(\c C^{\text{op}}\), i.e.\ given any pair \(g, h: B \to C\), \(gf = hf\) implies \(g = h\).
  \end{enumerate}

  We denote monomorphisms by \(f: A \mono B\) and epimorphisms by \(f: A \epi B\).
\end{definition}

Any isomorphism is monic and epic. More generally if \(f\) has a left inverse then it's monic. We call such monomorphisms \emph{split}\index{monomorphism!split}.

\begin{definition}[balanced]\index{category!balanced}
  We say \(\c C\) is a \emph{balanced} category if any morphism which is both monic and epic is an isomorphism.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item In \(\Set\), monomorphism is precisely an injection (one direction is easy and for the other direction take \(C = 1 = \{*\}\)) and epimorphism is precisely a surjection (use morphisms \(B \to 2 = \{0, 1\}\)). Thus \(\Set\) is balanced.
  \item In \(\c{Gp}\), monomorphism is precisely an injection (use homomorphism from the free group with one generator, i.e.\ \(\Z \to A\)) and epimorphism is precisely a surjection (use free product with amalgamation). Thus \(\c{Gp}\) is balanced.
  \item In \(\c{Rng}\), monomorphism is precisely an injection (similarly to free group) but the inclusion \(\Z \to \Q\) is an epimorphism, since if \(f, g: \Q \to R\) agree on all integers they agree everywhere. So \(\c{Rng}\) is not balanced.
  \item In \(\Top\), monomorphism is precisely an injection and epimorphism is precisely a precisely surjection (same argument as \(\Set\)) but \(\c{Top}\) is not balanced since a continuous bijection need not to have a continuous inverse.
  \end{enumerate}
\end{eg}

\section{The Yoneda lemma}

It may seem weird to devote an entire chapter to a lemma. However, although the Yoneda lemma is indeed a lemma, with a simple statement and straightforward proof, it is much more than a normal lemma and underlies the entire category theory.

Here is a little story about Yoneda lemma. It is named after Nobuo Yoneda, who is better known as a computer scientist than a mathematician. The result is likely not due to him and he wasn't the first person to write it down. In fact, he never actually wrote down the lemma, as opposed to some books claiming the lemma was first to be found in one of Yoneda's papers. The story, according to Saunders Mac Lane, is that after a conference he met Yoneda on a train platform. While exchanging conversations Yoneda told him the result, which Mac Lane was not aware of at that moment but immediately recognised its importance. Mac Lane later attributed the lemma to Yoneda and because of his standing in category theory, the name retains. Perhaps this is the first and only result in mathematics to be enunciated on a train platform!

\begin{definition}[locally small category]\index{category!locally small}
  We say a category \(\c C\) is \emph{locally small} if, for any two objects \(A, B\), the morphisms \(A \to B\) in \(\c C\) form a set \(\c C(A, B)\).
\end{definition}

If we fix \(A\) and let \(B\) vary, the assignment \(B \mapsto \c C(A, B)\) becomes a functor \(\c C(A, -): \c C \to \Set\): given \(B \xrightarrow{f} C\), \(\c C(A, f)\) is the mapping \(g \mapsto fg\). Similarly, \(A \mapsto \c C(A, B)\) defines a functor \(\c C(-, B): \c C^{\text{op}} \to \Set\).

\begin{lemma}[Yoneda lemma]\index{Yoneda lemma}
  \label{lem:Yoneda}
  Let \(\c C\) be a locally small category, \(A \in \ob \c C\) and \(F: \c C \to \Set\) is a functor. Then natural transformations \(\c C(A, -) \to F\) are in bijection with elements of \(FA\).

  Moreover, this bijection is natural in both \(A\) and \(F\).
\end{lemma}

\begin{proof}
  We prove the first part now. The second part follows very easily once we have gained some intuitions so we'll come back to it later. Given \(\alpha: \c C(A, -) \to F\), we define
  \[
    \Phi(\alpha) = \alpha_A(1_A) \in FA.
  \]
  Conversely, given \(x \in FA\), we define \(\Psi(x): \c C(A, -) \to F\) by
  \[
    \Psi(x)_B (A \xrightarrow{f} B) = Ff(x) \in FB
  \]
  which is natural: given \(g: B \to C\), we have
  \begin{align*}
    \Psi(x)_C \c C(A, g)(f) &= \Psi(x)_C (gf) = F(gf) (x) \\
    (Fg) \Psi(x)_B (f) &= (Fg) (Ff)(x) = F(gf) (x)
  \end{align*}
  \[
    \begin{tikzcd}
      \c C(A, B) \ar[rrr, "{\c C(A, g)}"] \ar[ddd, "\Psi(x)_B"] &&& \c C(A, C) \ar[ddd, "\Psi(x)_C"] \\
      & f \ar[r, mapsto] \ar[d, mapsto] & gf \ar[d, mapsto] \\
      & Ff(x) \ar[r, mapsto] & F(gf)(x) \\
      FB \ar[rrr, "Fg"] &&& FC
    \end{tikzcd}
  \]
  by functoriality of \(F\). Now left to show they are inverses to each other.
  \begin{align*}
    \Phi\Psi(x) &= \Psi(x)_A(1_A) = F(1_A) (x) = x \\
    \Psi\Phi(\alpha)_B(f) &= \Psi (\alpha_A(1_A))_B (f) = Ff (\alpha_A(1_A)) = \alpha_B \c C(A, f) (1_A) = \alpha_B(f)
  \end{align*}
  so \(\Psi \Phi(\alpha) = \alpha\).
\end{proof}

\begin{corollary}[Yoneda embedding]\index{Yoneda embedding}
  The assignment \(A \mapsto \c C(A, -)\) defines a full faithful functor \(\c C^{\text{op}} \to [\c C, \Set]\).
\end{corollary}

\begin{proof}
  Put \(F = \c C(B, -)\) in the above proof, we get a bijection between \(\c C(B, A)\) and morphisms \(\c C(A, -) \to \c C(B, -)\) in \([\c C, \Set]\). We need to verify that this is functorial. But it sends \(f: B \to A\) to the natural transformation \(g \mapsto gf\). So functoriality follows from associativity.
\end{proof}

We call this functor (or the functor \(\c C \to [\c C^{\text{op}}, \Set]\) sending \(A\) to \(\c C(-, A)\)) the \emph{Yoneda embedding} of \(\c C\) and typically denote it by \(Y\). At first glance, \([\c C, \Set]\) seems like a much more complicated entity and is much more unwieldy. However, it stands out as being more concrete and thus easier to deal with. It is in analogy with group representation: instead of an abstract group, we consider its action on a set, which is more explicit and concrete. We'll come back to this point in a minute.

Now return to the second part of the lemma. Suppose for the moment that \(\c C\) is small, so that \([\c C, \Set]\) is locally small. Then we have two functors \(\c C \times [\c C, \Set] \to \Set\): one sends \((A, F)\) to \(FA\), and the other is the composite
\[
  \c C \times [\c C, \Set]
  \xrightarrow{Y \times 1} [\c C, \Set]^{\text{op}} \times [\c C, \Set]
  \xrightarrow{[\c C, \Set] (-, -)} \Set
\]
where the last map maps a pair of functors to the set of natural transformations between them, and the naturality in the statement of Yoneda lemma says that these are naturally isomorphic. We can translate this into an elementary statement, making sense even when \(\c C\) isn't small: given \(A \xrightarrow{f} B\) and \(F \xrightarrow{\alpha} G\), there two ways of producing an element of \(GB\) from a natural transformation. For example, given \(\beta: \c C(A, -) \to F\), the two ways give the same result, namely
\[
  \alpha_B(Ff) \beta_A (1_A) = (Gf)\alpha_A \beta_A (1_A)
\]
which is equal to \(\alpha_B\beta_B(f)\).
\[
  \begin{tikzcd}
    {[\c C, \Set](\c C(A, -), F)} \ar[rrr] \ar[ddd] \ar[dr, "\Phi_{A, F}"] &&& {[\c C, \Set](\c C(B, -), F)} \ar[ddd] \ar[dl, "\Phi_{B, F}"] \\
    & FA \ar[r, "Ff"] \ar[d, "\alpha_A"] & FB \ar[d, "\alpha_B"] \\
    & GB \ar[r, "Gf"] & GB \\
    {[\c C, \Set](\c C(A, -), G)} \ar[rrr] \ar[ur, "\Phi_{A, G}"] &&& {[\c C, \Set](\c C(B, -), G)} \ar[ul, "\Phi_{B, G}"] \\
  \end{tikzcd}
\]

\begin{definition}[representable functor, representation]\index{functor!representable}\index{universal element}
  We say a functor \(F: \c C \to \Set\) is \emph{representable} if it's isomorphic to \(\c C(A, -)\) for some \(A\).

  By a \emph{representation} of \(F\), we mean a pair \((A, x)\) where \(x \in FA\) is such that \(\Psi(x)\) is an isomorphism. We also call \(x\) a \emph{universal element} of \(F\).
\end{definition}

\begin{corollary}
  If \((A, x)\) and \((B, y)\) are both representations of \(F\), then there is a unique isomorphism \(f: A \to B\) such that \((Ff)(x) = y\).
\end{corollary}

\begin{proof}
  Consider the composite
  \[
    \c C(B, -) \xrightarrow{\Psi(y)^{-1}} F \xrightarrow{\Psi(x)} \c C(A, -),
  \]
  By Yoneda embedding, this is of the form \(Y(f)\) for a unique isomorphism \(f: A \to B\) and the diagram
  \[
    \begin{tikzcd}
      \c C(B, -) \ar[rr, "Y(f)"] \ar[dr, "\Psi(y)"'] & & \c C(A, -) \ar[dl, "\Psi(x)"] \\
      & F
    \end{tikzcd}
  \]
  commutes if and only if \((Ff) (x) = y\).
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item The forgetful functor \(\c{Gp} \to \Set\) is representable by \((\Z, 1)\). Similarly the forgetful functor \(\c{Rng} \to \Set\) is representable by \((\Z[x], x)\). The forgetful functor \(\Top \to \Set\) is representable by \((\{*\}, *)\).
  \item The functor \(P^*: \Set^{\text{op}} \to \Set\) is representable by \((\{0, 1\}, \{1\})\). This is the bijection between subsets and characteristic functions.
  \item Let \(G\) be a group. The unique (up to isomorphism) representable functor \(G(*, -): G \to \Set\) is the \emph{Cayley representation} of \(G\), i.e.\ the set \(UG\) with \(G\) acting by left multiplication.
  \item Let \(A\) and \(B\) be two objects of a locally small category \(\c C\). Then we have a functor \(\c C^{\text{op}} \to \Set\) sending \(C\) to \(\c C(C, A) \times \c C(C, B)\) (note that it is a purely categorical product and require only cartesian product of the morphism sets). A representation of this, if it exists, is called a (categorical) \emph{product}\index{product} of \(A\) and \(B\), and denoted
    \[
      \begin{tikzcd}
        & A \times B \ar[dl, "\pi_1"'] \ar[dr, "\pi_2"] \\
        A & & B
      \end{tikzcd}
      %(A \times B, (A \times B \xrightarrow{\pi_1} A, A \times B \xrightarrow{\pi_2} B)).
    \]
    This pair has the property that, for any pair \((C \xrightarrow{f} A, C \xrightarrow{g} B)\), there is a unique \(C \xrightarrow{h} A \times B\) with \(\pi_1 h = f\) and \(\pi_2 h = g\).
    \[
      \begin{tikzcd}
        & A \times B \ar[dl, "\pi_1"'] \ar[dr, "\pi_2"] \\
        A & C \ar[l, "f"] \ar[r, "g"] \ar[u, "h", dashed] & B
      \end{tikzcd}
      %(A \times B, (A \times B \xrightarrow{\pi_1} A, A \times B \xrightarrow{\pi_2} B)).
    \]
 
    Products exist in many categories of interest: in \(\Set, \c{Gp}, \c{Rng}, \Top, \dots\) they are ``just'' cartesian products. In posets they are binary meets.

    Dually, we have the notion of \emph{coproduct}\index{coproduct}
    \[
      \begin{tikzcd}
        & A + B \\
        A \ar[ur, "\nu_1"] & & B \ar[ul, "\nu_2"']
      \end{tikzcd}
      %(A + B, A \xrightarrow{\nu_1} A + B, B \xrightarrow{\nu_2} A + B).
    \]
    These also exist in many categories of interest.
  \item Let \(f, g: A \to B\) be morphisms in a locally small category \(\c C\). We have a functor \(F: \c C^{\text{op}} \to \Set\) defined by
    \[
      F(C) = \{n \in \c C(C, A): fh = gh\},
    \]
    which is a subfunctor of \(\c C(-, A)\). A representation of \(F\), if it exists, is called an \emph{equaliser}\index{equaliser} of \((f, g)\). It consists of an object \(E\) and a morphism \(E \xrightarrow{e} A\) such that \(fe = ge\) and every \(h\) with \(fh = gh\) factors uniquely through \(e\). In \(\Set\), we take \(E = \{x \in A: f(x) = g(x)\}\) and \(e\) to be inclusion. Similar constructions work in \(\c{Gp}, \c{Rng}, \Top, \dots\)
    \[
      \begin{tikzcd}
        E \ar[r, "e"] & A \ar[r, "f", shift left] \ar[r, "g"', shift right] & B \\
        C \ar[u, dashed] \ar[ur, "h"]
      \end{tikzcd}
    \]

    Dually we have the notion of \emph{coequaliser}\index{coequaliser}.
  \end{enumerate}
\end{eg}

\begin{remark}
  If \(e\) occurs as an equaliser then it is a monomorphism, since any \(h\) factors through it in at most one way. We say a monomorphism is \emph{regular}\index{monomorphism!regular} if it occurs as an equaliser.

  Split monomorphisms are regular (see example sheet 1 Q6 (i)). Note that a regular mono that is also epic implies isomorphism: if the equaliser \(e\) of \((f, g)\) is epic then \(f = g\) so \(e \cong 1_{\cod e}\).
\end{remark}

% generating family
% warning: nonstandard terminology

\begin{definition}[separating/detecting family, seperator, detector]\index{separating family}\index{detecting family}\index{separator}\index{detector}
  Let \(\c C\) be a category, \(\mathcal G\) a class of objects of \(\c C\).
  \begin{enumerate}
  \item  We say \(\mathcal G\) is a \emph{separating family} for \(\c C\) if, given \(f, g: A \to B\) such that \(fh = gh\) for all \(G \xrightarrow{h} A\) with \(G \in \mathcal G\) then \(f = g\). (i.e.\ the functor \(\c C(G, -)\) where \(G \in \mathcal G\) are collectively faithful)
  \item We say \(\mathcal G\) is a \emph{detecting family}  for \(\c C\) if, given \(A \xrightarrow{f} B\) such that every \(G \xrightarrow{h} B\) with \(G \in \mathcal G\) factors uniquely through \(f\), then \(f\) is an isomorphism.
  \end{enumerate}

  If \(\mathcal G = \{G\}\) then we call \(G\) a \emph{separator} or \emph{detector}.
\end{definition}

\begin{lemma}\leavevmode
  \begin{enumerate}
  \item If \(\c C\) is a balanced category then any separating family is detecting.
  \item If \(\c C\) has equalisers (i.e.\ every pair has an equaliser) then any detecting family is separaing.
  \end{enumerate}
\end{lemma}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item Suppose \(\mathcal G\) is separating and \(A \xrightarrow{f} B\) satisfies condition in definition 2.
    If \(g, h: B \to C\) satisfy \(gf = hf\), then \(gx = hx\) for every \(G \xrightarrow{x} B\), so \(g = h\), i.e.\ \(f\) is epic.

    Similarly if \(k, \ell: D \to A\) satisfy \(fk = f\ell\) then \(ky = \ell y\) for any \(G \xrightarrow{y} D\), since both are factorisations of \(fky\) through \(f\). So \(k = \ell\), i.e.\ \(f\) is monic.
  \item Suppose \(\mathcal G\) is detecting and \(f, g: A \to B\) satisfy definition 1. Then the equaliser \(E \xrightarrow{e} A\) of \((f, g)\) is isomorphism so \(f = g\).
  \end{enumerate}
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item In \([\c C, \Set]\) the family \(\{\c C(A, -): A \in \ob \c C\}\) is both separating and detecting. This is just a restatement of Yoneda lemma.
  \item In \(\Set\), \(1 = \{*\}\) is both a separator and a detector since it represents the identity functor \(\Set \to \Set\). Similarly \(\Z\) is both in \(\c{Gp}\) since it represents the forgetful functor \(\c{Gp} \to \Set\).

    Dually, \(2 = \{0, 1\}\) is a coseparator and a codetector in \(\Set\) since it represents \(P^*: \Set^{\text{op}} \to \Set\).
  \item In \(\Top\), \(1 = \{*\}\) is a separator since it represents the forgetful functor \(\Top \to \Set\), but not a detector. In fact \(\Top\) has no detecting \emph{set} of objects: for any infinite cardinality \(\kappa\), let \(X\) be a discrete space of cardinality \(\kappa\), and \(Y\) the same set with ``co-\(\kappa\)'' topology, i.e.\ \(F \subseteq Y\) closed if and only if \(F = Y\) or \(F\) has cardinality smaller \(\kappa\). The identity map \(X \to Y\) is continuous but not a homomorphism. So if \(\{G_i: i \in I\}\) is any set of spaces, taking \(\kappa\) larger than cardinality of \(G_i\) for all \(i\) yields an exmaple to show that the set is not detecting.
  \item Let \(\c C\) be the category of pointed conntected CW-complexes and homotopy classes of (basepoint-preserving) continuous maps. J.\ H.\ C.\ Whitehead proved that if \(X \xrightarrow{f} Y\) in this category induces isomorphisms \(\pi_n(X) \to \pi_n(Y)\) for all \(n\) then it is an isomorphism in \(\c C\). This says that \(\{S^n: n \geq 1\}\) is a detecting set for \(\c C\). But P.\ J.\ Freyd showed there is no faithful functor \(\c C \to \Set\), so no separating \emph{set}: if \(\{G_i: i \in I\}\) were separating then
    \[
      X \mapsto \coprod_{i \in I} \c C(G_i, X)
    \]
    would be faithful.
  \end{enumerate}
\end{eg}

Note that any functor of the form \(\c C(A, -)\) preserves monos, but they don't preserve epis. We give a name to those special functors.

\begin{definition}[projective, injective]\index{projective}\index{injective}
  We say an object \(P\) is \emph{projective} if given
  \[
    \begin{tikzcd}
      & P \ar[d, "f"] \ar[dl, "g"', dashed] \\
      A \ar[r, "e", twoheadrightarrow] & B
    \end{tikzcd}
  \]
  there exists \(P \xrightarrow{g} A\) with \(eg = f\). If \(\c C\) is locally small, this says \(\c C(P, -)\) preserves epimorphisms.

  Dually an \emph{injective} object of \(\c C\) is a projective object of \(\c C^{\text{op}}\).

  Given a class \(\mathcal E\) of epimorphisms, we say \(P\) is \emph{\(\mathcal E\)-projective} if it satisfies the condition for all \(e \in \mathcal E\).
\end{definition}

\begin{lemma}
  Representable functors are (pointwise) projectives in \([\c C, \Set]\).
\end{lemma}

\begin{proof}
  Suppose given
  \[
    \begin{tikzcd}
      & \c C(A, -) \ar[d, "\beta"] \ar[dl, "\gamma"', dashed]\\
      F \ar[r, "\alpha"] & G
    \end{tikzcd}
  \]
  where \(\alpha\) is pointwise surjective. By Yoneda, \(\beta\) corresponds to some \(y \in GA\) and we can find \(x \in FA\) with \(\alpha_A(x) = y\). Now if \(\gamma: \c C(A, -) \to F\) corresponds to \(x\), then naturality of the Yoneda bijection yields \(\alpha\gamma = \beta\).
\end{proof}

\section{Adjunctions}

\begin{definition}[adjunction]\index{adjunction}
  Let \(\c C\) and \(\c D\) be two categories and \(F: \c C \to \c D, G: \c D \to \c C\) be two functors. By an \emph{adjunction} between \(F\) and \(G\) we mean a bijection between morphisms \(\hat f: FA \to B\) in \(\c D\) and \(f: A \to GB\) in \(\c C\), which is natural in \(A\) and \(B\), i.e.\ given \(A' \xrightarrow{g} A\) and \(B \xrightarrow{h} B'\), \(h \hat f(Fg) = \widehat{(Gh) fg}: FA' \to B'\)
  \[
    \begin{tikzcd}
      FA \ar[r, "\hat f"] & B \ar[d, "h"] \\
      FA' \ar[u, "Fg"] \ar[r, dashed] & B'
    \end{tikzcd}
    \qquad
    \begin{tikzcd}
      A \ar[r, "f"] & GB \ar[d, "Gh"] \\
      A' \ar[u, "g"] \ar[r, dashed] & GB'
    \end{tikzcd}
  \]
  We say \(F\) is \emph{left adjoint} to \(G\) and write \(F \adjoint G\).
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item The functor \(F: \Set \to \c{Gp}\) is left adjoint to the forgetful functor \(U: \c{Gp} \to \Set\) since any function \(f: A \to UB\) extends uniquely to a group homomorphism \(\hat f: FA \to B\) and any homomorphism induces a set function. Naturality in \(B\) is easy and naturality in \(A\) follows from the definition of \(F\) as a functor. Similar for \(\c{Rng}, \c{Mod}_K, \dots\)
  \item The forgetful funcotr \(U: \Top \to \Set\) has a left adjoint \(D\) which equips any set with the discrete topology and a right adjoint \(I\) which equips any set with the indiscrete topology so \(D \adjoint U \adjoint I\).
  \item The functor \(\ob: \c{Cat} \to \Set\) (recall that \(\c{Cat}\) is the category of small categories) has a left adjoint \(D\) sending \(A\) to the discrete category with \(\ob(DA) = A\) and only identity morphisms, and a right adjoint \(I\) sending \(A\) to the category with \(\ob(IA) = A\) and one morphism \(x \to y\) for each \((x, y) \in A \times A\). In this case \(D\) in turn has a left adjoint \(\pi_0\) sending a small category \(\c C\) to its set of \emph{connected components}, i.e.\ the quotient of \(\ob \c C\) by the smallest equivalence relation identifying \(\dom f\) with \(\cod f\) for all \(f \in \mor \c C\). So \(\pi_0 \adjoint D \adjoint \ob \adjoint I\).
  \item Let \(M\) be the monoid \(\{1, e\}\) with \(e^2 = e\). An object of \([M, \Set]\) is a pair \((A, e)\) where \(e: A \to A\) satisfying \(e^2 = e\). We have a functor \(G: [M, \Set] \to \Set\) sending \((A, e)\) to
    \[
      \{x \in A: e(x) = x\} = \{e(x): x \in A\}
    \]
    and a functor \(F: \Set \to [M, \Set]\) sending \(A\) to \((A, 1_A)\). Claim that
    \[
      F \adjoint G \adjoint F.
    \]
    Given \(f: (A, 1_A) \to (B, e)\), it must take values in \(G(B, e)\) and any \(g: (B, e) \to (A, 1_A)\) is determined by its values on the image of \(e\). In some way this is due to the two ways in which the fixed point of \(e\) can be written.
  \item Let \(\c 1\) be the discrete category with one object \(*\). For any \(\c C\), there is a unique functor \(\c C \to \c 1\). A left adjoint for this picks out an \emph{initial object}\index{initial object} of \(\c C\), i.e.\ an object \(I\) such that there exists a unique \(I \to A\) for each \(A \in \ob C\). Dually a right adjoint for \(\c C \to \c 1\) corresponds to a \emph{terminal object}\index{terminal object} of \(\c C\).
  \item Let \(A \xrightarrow{f} B\) be a morphism in \(\Set\). We can regard \(PA\) and \(PB\) as posets, and we have functors \(Pf: PA \to PB\) and \(P^*f: PB \to PA\). I claim
    \[
      Pf \adjoint P^*f:
    \]
    We have \(Pf(A') \subseteq B'\) if and only if \(f(x) \in B'\) for all \(x \in A'\), if and only if \(A' \subseteq P^*f(B')\).
  \item Galois connection: suppose givens sets \(A\) and \(B\) and a relation \(R \subseteq A \times B\). We define mappings \(\cdot^\ell, \cdot^r\) between \(PA\) and \(PB\)  by
    \begin{align*}
      S^r &= \{y \in B: \forall x \in S, (x, y) \in R\}, S \subseteq A \\
      T^\ell &= \{x \in A: \forall y \in T, (x, y) \in R\}, T \subseteq B
    \end{align*}
    These mappings are order-reversing, i.e.\ contravariant functors, and \(T\subseteq S^r\) if and only if \(S \times T \subseteq R\), so by symmetry if and only if \(S \subseteq T^\ell\). We say \(\cdot^r\) and \(\cdot^\ell\) are \emph{adjoint on the right}\index{adjoints on the right}.
  \item The functor \(P^*: \Set^{\text{op}} \to \Set\) is self-adjoint on the right since a function \(A \to PB\) corresponds bijectively to subsets of \(A \times B\), and hence by symmetry to functions \(B \to PA\). % IID Logic and set
  \end{enumerate}
\end{eg}

\begin{theorem}
  \label{thm:unit-counit characterisation of adjunction}
  Let \(G: \c D \to \c C\) be a functor. Then specifying a left adjoint functor for \(G\) is equivalent to specifying an initial object of \((A \downarrow G)\) for each \(A \in \ob \c C\) where \((A \downarrow G)\) has objects pairs \((B, f)\) with \(A \xrightarrow{f} GB\) and morphisms \((B, f) \to (B', f')\) are morphisms \(B \xrightarrow{g} B'\) such that the following diagram commutes
  \[
    \begin{tikzcd}
      A \ar[r, "f"] \ar[dr, "f'"'] & GB \ar[d, "Gg"] \\
      & GB'
    \end{tikzcd}
  \]
\end{theorem}

\begin{proof}
  Suppose given \(F \adjoint G\). Consider the morphism \(\eta_A: A \to GFA\) corresponding to \(FA \xrightarrow{1} FA\). Then \((FA, \eta_A)\) is an object of \((A \downarrow G)\). Moreover, given \(g: FA \to B\) and \(f: A \to GB\), the diagram
  \[
    \begin{tikzcd}
      A \ar[r, "\eta_A"] \ar[dr, "f"'] & GFA \ar[d, "Gg"] \\
      & GB
    \end{tikzcd}
  \]
  commutes if and only if
  \[
    \begin{tikzcd}
      FA \ar[r, "1_A"] \ar[dr, "\hat f"'] & FA \ar[d, "g"] \\
      & B
    \end{tikzcd}
  \]
  commutes by naturality condition in adjunction, i.e.\ \(g = \hat f\). So \((FA, \eta_A)\) is initial to \((A \downarrow G)\).

  Conversely, suppose given an initial object \((FA, \eta_A)\) for each \((A \downarrow G)\). Given \(f: A \to A'\), we define \(Ff: FA \to FA'\) to be the unique morphism making
  \[
    \begin{tikzcd}
      A \ar[r, "\eta_A"] \ar[d, "f"] & GFA \ar[d, "GFf"] \\
      A' \ar[r, "\eta_{A'}"] & GFA'
    \end{tikzcd}
  \]
  commutes. Functoriality follows from uniqueness: given \(f': A' \to A''\), both \(F(f'f)\) and \((Ff')(Ff)\) are both morphisms \((FA, \eta_A) \to (FA'', \eta_{A''}f'f)\) in \((A \downarrow G)\). To show \(F \adjoint G\): given \(A \xrightarrow{f} GB\), we define \(\hat f: FA \to B\) to be the unique morphism \((FA, \eta_A) \to (B, f)\) in \((A \downarrow G)\). This is a bijection with inverse
  \[
    (FA \xrightarrow{g} B) \mapsto (A \xrightarrow{\eta_A} GFA \xrightarrow{Gg} GB).
  \]
  The latter mapping is natural in \(B\) since \(G\) is a functor, and in \(A\) since by construction \(\eta\) is a natural transformation \(1_{\c C} \to GF\).
\end{proof}

\begin{corollary}
  If \(F\) and \(F'\) are both left adjoint to \(G: \c D \to \c C\) then they are naturally isomorphic.
\end{corollary}

\begin{proof}
  It basically follows from the fact that initial object in any category, if exists, is unique up to isomorphism. For any \(A\), \((FA, \eta_A)\) and \((F'A, \eta'_A)\) are both initial in \((A \downarrow G)\) so there is a unique isomorphism
  \[
    \alpha_A: (FA, \eta_A) \to (F'A, \eta'_A).
  \]
  In any naturality square for \(\alpha\), the two ways round are both morphisms in \((A \downarrow G)\) whose domain is initial, so they're equal.
\end{proof}

\begin{lemma}
  \label{lem:composition of adjoints}
  Given
  \[
    \begin{tikzcd}
      \c C \ar[r, "F", shift left] & \c D \ar[l, "G", shift left] \ar[r, "H", shift left] & \c E \ar[l, "K", shift left]
    \end{tikzcd}
  \]
  with \(F \adjoint G\) and \(H \adjoint K\), we have
  \[
    HF \adjoint GK.
  \]
\end{lemma}

\begin{proof}
  We have bijections between morphisms \(A \to GKC\), morphisms \(FA \to KC\) and morphisms \(HFA \to C\), which are both natural in \(A\) and \(C\).
\end{proof}

\begin{corollary}
  Given a commutative square
  \[
    \begin{tikzcd}
      \c C \ar[r] \ar[d] & \c D \ar[d] \\
      \c E \ar[r] &\c F
    \end{tikzcd}
  \]
  of categories and functors, if the functors all have left adjoints, then the diagram of left adjoints commutes up to natural isomorphsms.
\end{corollary}

\begin{proof}
  By \Cref{lem:composition of adjoints}, both ways round the diagram of left adjoints are left adjoint to the composite \(\c C \to \c F\), so by \Cref{thm:unit-counit characterisation of adjunction} they are isomorphic.
\end{proof}

Actually, we didn't use the full strength of \Cref{lem:composition of adjoints}: if we require merely instead that the original commutative diagram is only up to natural isomorphism, then we'll get the same conclusion. In practice, however, the weaker version stated above will usually suffice.

\begin{definition}[unit, counit]\index{unit}\index{counit}
  Given an adjunction \(F \adjoint G\), the natural transformation \(\eta: 1_{\c C} \to GF\) emerging in the proof of \Cref{thm:unit-counit characterisation of adjunction} is called the \emph{unit} of the adjunction.

  Dually we have a natural transformation \(\varepsilon: FG \to 1_{\c D}\) suc that \(\varepsilon_B: FGB \to B\) corresponds to \(GB \xrightarrow{1_{GB}} GB\), is called the \emph{counit}.
\end{definition}

\begin{theorem}
  Given \(F: \c C \to \c D, G: \c D \to \c C\), specifying an adjunction \(F \adjoint G\) is equivalent to specifying two natural transformations
  \begin{align*}
    \eta: 1_{\c C} &\to GF \\
    \varepsilon: FG &\to 1_{\c D}
  \end{align*}
  satisfying the commutative diagrams
  \[
    \begin{tikzcd}
      F \ar[r, "F\eta"] \ar[dr, "1_F"'] & FGF \ar[d, "\varepsilon_F"] \\
      & F
    \end{tikzcd}
    \qquad
    \begin{tikzcd}
      G \ar[r, "\eta_G"] \ar[dr, "1_G"'] & GFG \ar[d, "G\varepsilon"] \\
      & G
    \end{tikzcd}
  \]
  which are called the \emph{triangular identities}.\index{triangular identities}
\end{theorem}

\begin{proof}
  First suppose given \(F \adjoint G\). Define \(\eta\) and \(\varepsilon\) as in \Cref{thm:unit-counit characterisation of adjunction} and its dual. Now consider the composite
  \[
    FA \xrightarrow{F\eta_A} FGFA \xrightarrow{\varepsilon_{FA}} FA.
  \]
  Under the adjunction this corresponds to
  \[
    A \xrightarrow{\eta_A} GFA \xrightarrow{1_{GFA}} GFA
  \]
  but this also corresponds to \(1_{FA}\) so \(\varepsilon_{FA} F\eta_A = 1_{FA}\). The other identity is dual.

  Conversely, suppose \(\eta\) and \(\varepsilon\) satisfying the trianglular identities. Given \(A \xrightarrow{f} GB\), let \(\Phi(f)\) be the composite
  \[
    FA \xrightarrow{Ff} FGB \xrightarrow{\varepsilon_B} B
  \]
  and given \(FA \xrightarrow{g} B\), let \(\Psi(g)\) be
  \[
    A \xrightarrow{\eta_A} GFA \xrightarrow{Gg} GB.
  \]
  Then both \(\Phi\) and \(\Psi\) are both natural. Need to show that \(\Phi\Psi\) and \(\Psi\Phi\) are identity mappings. But
  \begin{align*}
    &\Psi\Phi(A \xrightarrow{f} GB) \\
    =& A \xrightarrow{\eta_A} GFA \xrightarrow{GFf} GFGB \xrightarrow{G \varepsilon_B} GB \\
    =& A \xrightarrow{f} GB \xrightarrow{\eta_{GB}} GFGB \xrightarrow{G\varepsilon_B} GB \\
    =& A \xrightarrow{f} GB
  \end{align*}
  where the second equality is naturality of \(\eta\) and the third equality is triangular equation. Dually \(\Phi\Psi(g) = g\).
\end{proof}

Sometimes this is taken to be the definition of adjunction.

Obviously two inverse functors form an adjunction. We have seen before a weaker notion of inverse, namely a pair of functors forming an equivalence of categories. The question is, do they always from an adjunction? The answer is yes, but sometimes we can't see it since we've chosen the wrong isomorphism.

\begin{lemma}
  Given functors \(F: \c C \to \c D, G: \c C \to \c C\) and natural isomorphisms
  \begin{align*}
    \alpha: 1_{\c C} &\to GF \\
    \beta: FG &\to 1_{\c D}
  \end{align*}
  there are isomorphism
  \begin{align*}
    \alpha': 1_{\c C} &\to GF \\
    \beta': FG &\to 1_{\c D}
  \end{align*}
  which satisfy the triangular identities so \(F \adjoint G\) and \(G \adjoint F\).
\end{lemma}

This is often summarised by ``every equivalence is an adjoint equivalence.''

\begin{proof}
  We fix \(\alpha' = \alpha\) and modify \(\beta\). We have to change the domain and codomain of \(\beta\), done so by conjugation.

  Let \(\beta'\) be the composite
  \[
    FG \xrightarrow{(GF\beta)^{-1}} FGFG \xrightarrow{(F\alpha_G)^{-1}} FG \xrightarrow{\beta} 1_{\c D}.
  \]
  Note that \(FG\beta = \beta_{FG}\) since
  \[
    \begin{tikzcd}
      FGFG \ar[r, "GF\beta"] \ar[d, "\beta_{FG}"] & FG \ar[d, "\beta"] \\
      FG \ar[r, "\beta"] & 1_{\c D}
    \end{tikzcd}
  \]
  commmutes by naturality of \(\beta\) and \(\beta\) is monic.

  Now \((\beta'_F)(F\alpha')\) is the composite
   \begin{align*}
     &F \xrightarrow{F\alpha} FGF \xrightarrow{(\beta_{FGF})^{-1}} FGFGF \xrightarrow{(F\alpha_{GF})^{-1}} FGF \xrightarrow{\beta_F} F \\
     =& F \xrightarrow{(\beta_F)^{-1}} FGF \xrightarrow{FGF\alpha} FGFGF \xrightarrow{(F\alpha_{GF})^{-1}} FGF \xrightarrow{\beta_F} F \\
     =& F \xrightarrow{(\beta_F)^{-1}} FGF \xrightarrow{\beta_F} F \\
     =& 1_F
   \end{align*}
  since \(FA \alpha = \alpha_{GF}\). Similarly \((G\beta')(\alpha'_G)\) is
  \begin{align*}
    &G \xrightarrow{\alpha_G} GFG \xrightarrow{(GFG\beta)^{-1}} GFGFG \xrightarrow{(GF\alpha_G)^{-1}} GFG \xrightarrow{G\beta} G \\
    =& G \xrightarrow{(G\beta)^{-1}} GFG \xrightarrow{\alpha_{GFG}} GFGFG \xrightarrow{(GF\alpha_G)^{-1}} GFG \xrightarrow{G\beta} G \\
    =& G \xrightarrow{(G\beta)^{-1}} GFG \xrightarrow{G\beta} G \\
    =& 1_G
  \end{align*}
\end{proof}

\begin{lemma}
  Suppose \(G: \c D \to \c C\) has a left adjoint \(F\) with counit \(\varepsilon: FG \to 1_{\c D}\), then
  \begin{enumerate}
  \item \(G\) is faithful if and only if \(\varepsilon\) is pointwise epic,
  \item \(G\) is full and faithful is and only if \(\varepsilon\) is an isomorphism.
  \end{enumerate}
\end{lemma}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item Given \(B \xrightarrow{g} B'\), \(Gg\) corresponds under the adjunction to the composite
    \[
      FGB \xrightarrow{\varepsilon_B} B \xrightarrow{g} B'.
    \]
    Hence the mapping \(g \mapsto Gg\) is injective on morphisms with domain \(B\) (and specified codomain) if and only if \(g \mapsto g\varepsilon_B\) is injective, if and only if \(\varepsilon_B\) is epic.
  \item Similarly, \(G\) is full and faithful if and only if \(g \mapsto g\varepsilon_B\) is bijective. If \(\alpha: B \to FGB\) is such that \(\alpha\varepsilon_B = 1_{FGB}\), i.e.\ \(\alpha\) is left inverse of \(\varepsilon_B\), then
    \[
      \varepsilon_B\alpha \varepsilon_B = \varepsilon_B,
    \]
    whence \(\varepsilon_B\alpha = 1_B\). So \(\varepsilon_B\) is an isomophism. Thus \(\varepsilon\) is an isomorphism.
  \end{enumerate}
\end{proof}




\printindex
\end{document}
