\documentclass[a4paper]{article}

\def\npart{III}

\def\ntitle{Algebra}
\def\nlecturer{C.\ Brookes}

\def\nterm{Michaelmas}
\def\nyear{2019}

\input{header}

\DeclareMathOperator{\Ann}{Ann} % annihilator
\newcommand{\nilrad}[1]{\mathcal{N}({#1})} % nilradical
\newcommand{\jac}[1]{\operatorname{Jac}({#1})} % nilradical
\iffalse
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Innder}{Innder}
\DeclareMathOperator{\gr}{gr}
\fi

\begin{document}

\input{titlepage}

\tableofcontents

\setcounter{section}{-1}

\section{Brief history \& Introduction}

David Hilbert published a series of papers in 1980s about invariant theory. The primary example is as follow. let \(k\)  be a field and consider the polynomial \(k[x_1, \dots, x_n]\) over \(k\). The symmetric group \(\Sigma_n\) acts on the variables and this induces an action on \(k[x_1, \dots, x_n]\): If \(g \in \Sigma_n\) then
\[
  g(f(x_1, \dots, x_n) = f(x_{g(1)}, \dots, x_{g(n)}).
\]
These are ring automorphisms.

Consider the polynomials fixed under this action, which are called \emph{symmetric polynomials}. We have elemetary symmetric polynomials
\begin{align*}
  f_1(x_1, \dots, x_n) &= x_1 + \dots x_n \\
  f_2(x_1, \dots, x_n) &= \sum_{i < j} x_i x_j \\
  \cdots & \\
  f_n(x_1, \dots, x_n) &= x_1x_2 \cdots x_n
\end{align*}
The ring of symmetric polynomials is generated by \(f_1, \dots, f_n\) and is in fact isomorphic to the polynomial algebra \(k[Y_1, \dots, Y_n]\) where \(f_i\) corresponds to \(Y_i\).

Hilbert considered a lot of other groups, such as the alternating group. Along the way, he proved four big theorems:
\begin{enumerate}
\item basis theorem,
\item Nullstellensatz,
\item polynomial nature of a certain function, which is called nowdays Hilbert function,
\item syzygy theorem.
\end{enumerate}
If you are taking this course you should be familiar with 1. 2 is a famous result in algebraic geometry. 3 marks the beginning of dimension theory and 4 starts the subject of homological algebra.

Emmy Noether (1921) abstracted from Hilbert's work the crucial property behind the basis theorem: a commutative ring \(R\) is \emph{Noetherian} if all its ideals are finitely generated. In this language,

\begin{theorem}[basis theorem]
  If \(R\) is Noetherian then so is \(R[X]\).
\end{theorem}
As a corollary, \(R[X_1, \dots, X_n]\) is also Noetherian.

Noether went on to develop the theory of ideals in Noetherian rings. One has primary decomposition of ideals, which is a weak version of prime factorisation.

Most of the course is from 1920 to 1950.

A word on the link between commutative algebra and algebraic geometry. The fundamental theorem of algebra says that a polynomial \(f \in \C[x]\) is determined up to scalars by its zeros up to multiplicity. More generally, for a subset \(I\) of polynomials in \(\C[x_1, \dots, x_n]\), we define the set of common zeros
\[
  Z(I) = \{(a_1, \dots, a_n) \in \C^n: f(a_1, \dots, a_n) = 0 \text{ for all } f \in I\}.
\]
\(Z(I)\)'s are called \emph{(affine) algebraic sets} and form the closed subsets of \(\C^n\) under Zariski topology. Note that one can replace \(I\) by the ideal generated by \(I\) without changing \(Z(I)\).

On the other hand, if we have \(\mathcal S \subseteq \C^n\) then we define
\[
  I(\mathcal S) = \{f \in \C[x_1, \dots, x_n]: f(a_1, \dots, a_n) = 0 \text{ for all } (a_1, \dots, a_n) \in \mathcal S\}.
\]
It is easy to see that it is an ideal of \(\C[x_1, \dots, x_n]\) and in fact a \emph{radical} one.

One form of Nullstellensatz says that there is a bijective correspondence
\begin{align*}
  \{\text{radical ideals of } \C[x_1, \dots, x_n]\} &\leftrightarrow \{\text{algebraic subsets of } \C^n\} \\
  I &\mapsto Z(I) \\
  I(\mathcal S) &\mapsfrom \mathcal S
\end{align*}

As for the third major theorem proved by Hilbert, we'll spend quite a bit of time talking about dimension. In commutative algebra there are at least three approaches
\begin{enumerate}
\item by lengths of chains of prime ideals (Krull dimension),
\item by growth rate -- degree of the Hilbert function,
\item by transcendence degree of the field of fraction of integral domains.
\end{enumerate}
For finitely generated commutative algebra they all give the same answer.

Dimension \(0\) rings are important and Noetherian dimesion \(0\) rings are called \emph{Artinian rings}. For example, fields or rings that are finitely dimensional as vector spaces. In this case we talk about the non-commutative rings.

Dimesion \(1\) rings also have special properties. They arise naturally in number theory and algebraic curves. See III Algebraic Number Theory.

At the end of the course, we will learn differential operators which lead into Hochschild cohomology, the cohomology theory for associative algebras.

\section{Examples, Localisation \& Tensor products}

Throughout this chapter \(R\) is a commutative ring with a unit.

\begin{lemma}
  Let \(M\) be a (left) \(R\)-module. Then the following are equivalent:
  \begin{enumerate}
  \item every submodule of \(M\) (including itself) is finitely generated.
  \item there does not exist an infinite strictly ascending chain of submodules (ascending chain condition)\index{ascending chain conditions}\index{ACC}.
  \item every non-empty set of submodules of \(M\) contains at least one maximal member.
  \end{enumerate}
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

\begin{definition}[Noetherian module]\index{Noetherian}
  An \(R\)-module \(M\) is \emph{Noetherian} if it satisfies any of the conditions above.
\end{definition}

\begin{definition}[Noetherian ring]\index{Noetherian}
  A commutative ring is \emph{Noetherian} if it is Noetherian as a (left) module.
\end{definition}

\begin{remark}
  Submodules of a ring are the ideals.
\end{remark}

\begin{lemma}
  Let \(N\) be a submodule of \(M\). Then \(M\) is Noetherian if and only if \(N\) and \(M/N\) are Noetherian.
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

\begin{remark}\leavevmode
  \begin{enumerate}
  \item Images of Noetherian modules are Noetherian.
  \item Ring images of Noetherian rings are Noetherian.
  \end{enumerate}
\end{remark}

\begin{lemma}
  Let \(R\) be a Noetherian ring. The finitely generated \(R\)-modules are Noetherian.
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Fields are Noetherian.
  \item Principal ideal domains, e.g.\ \(\Z, k[x]\) and fields, are Noetherian.
  \item \(\{q \in \Q: q \text{ of the form } \frac{m}{n}, m, n \in \Z, n \neq 0\, p \ndivides n\}\) is Noetherian. This is an example of a localisation of \(\Z\). In general, localisations of Noetherian rings are Noetherian.
  \item \(k[x_1, \dots, x_n], \Z[x_1, \dots, x_n]\) are Noetherian from basis theorem.
  \item \(\k[x_1, x_2, \dots]\) with infinitely many variables is not Noetherian as
    \[
      (x_1) \subseteq (x_1, x_2) \subseteq \cdots
    \]
    is an infinite strictly ascending chain of ideals.
  \item A finitely generated commutative ring \(R\) (there exists a set \(\{a_1, \dots, a_n\}\) such that there is a surjective ring homomorphism \(\Z[x_1, \dots, x_n] \to R, x_i \mapsto a_i\)) is Noetherian.
  \item \(k[[x]]\), formal power series ring, is Noetherian (proof shortly).
  \end{enumerate}
\end{eg}

\begin{theorem}[basis theorem]
  Let \(R\) be a Noetherian ring then \(R[x]\) is Noetherian.
\end{theorem}

\begin{proof}[sketch]
  We prove every ideal \(I\) of \(R[x]\) is finitely generated. Define \(I(n)\) to be elements of \(I\) of degree \(\leq n\). \(I(n) \neq \emptyset\) as \(0 \in I(n)\) and we have
  \[
    I(0) \subseteq I(1) \subseteq I(2) \subseteq \cdots
  \]
  Define \(R(n)\) to be the set of all (leading) coefficients of \(x^n\) for all elements of \(I\) of degree \(\leq n\). Then \(R(n)\) is an ideal of \(R\) and
  \[
    R(0) \subseteq R(1) \subseteq R(2) \subseteq \cdots
  \]
  As \(R\) is Noetherian, we must have \(R(n) = R(N)\) for all \(n \geq N\) for some \(N\). Each \(R(n) = R a_{n1} + \dots + R a_{n m_n}\) say. There are polynomials \(f_{nj}(x) = a_{nj} x^n + \text{ lower terms} \in I\). The set
  \[
    \{f_{ij}(x): 1 \leq i \leq N, 1 \leq j \leq m_i\}
  \]
  is finite. Claim that they generate \(I\) as an ideal, which is left as an exercise.
\end{proof}

\begin{remark}
  In computation it's usually important to be dealing with generating sets without too much redundancy. Such set are GrÃ¶bner basis and underlie a lot of algorithms in computer algebra and computational algebraic geometry.
\end{remark}

\begin{theorem}
  If \(R\) is Noetherian then \(R[[x]]\) is Noetherian.
\end{theorem}

We can either use a proof similar to that of the basis theorem but using trailing coefficients instead of leading coefficients, which is left as an exercise, or we can use a more interesting prooof. We use the following two results

\begin{theorem}[Cohn]\index{Cohn's theorem}
  \label{thm:Cohn}
  A ring is Noetherian if and only if all its prime ideals are finitely generated. 
\end{theorem}

\begin{lemma}
  \label{lem:prime ideals of R[[x]]}
  Let \(P\) be a prime ideal of \(R[[x]]\) and \(\theta: R[[x]] \to R\) be the ring homomorphism ``taking the constant term''. Then \(P\) is a finitely generated ideal if and only if \(\theta(P)\).
\end{lemma}

\begin{proof}[Proof of \Cref{thm:Cohn}]
  Suppose \(R\) is not Notherian and so there are non-finitely generated ideals. Consider the eset of all such. It is non-empty by supposition. We can partially order the set by inclusion. The union of a chain of such ideals is also non-finitely generated. By Zorn's lemma, this set has maximal members. Let \(P\) be one such (note it is proper). Claim \(P\) is prime:

  \begin{proof}
    Suppose \(P\) is not prime, so there exist \(a, b\) with \(ab \in P, a \notin P, b \notin P\). Then \(P + Ra\) is an ideal strictly containing \(P\) so by maximality of \(P\), \(P + Ra\) is finitely generated, say by \(p_1 + r_1 a, \dots , p_n + r_n a\). Set
    \[
      J = \{r \in R: ra \in P\} \supseteq P + Rb \supsetneq P
    \]
    so \(J\) is a finitely generated ideal. We show \(P = Rp_1 + \dots Rp_n + Ja\) and so \(P\) is finitely generated, a contradiction: take \(t \in P \subseteq P + Ra\). Then
    \[
      t = u_1(p_1 + r_1a) + \dots + u_n(p_n + r_na)
    \]
    for some \(u_i \in R\). Hence
    \[
      u_1r_1 + \dots + u_nr_n \in J
    \]
    and so \(P\) is of the required form.
  \end{proof}
\end{proof}

\begin{proof}[Proof of \Cref{lem:prime ideals of R[[x]]}]
  If \(P\) is finitely generated then \(\theta(P)\) certainly is. Conversly, suppose \(\alpha_1, \dots, \alpha_n\) generate \(\theta(P)\). There are two cases:
  \begin{enumerate}
  \item if \(x \in P\) then \(P\) is generated by \(x, \alpha_1, \dots, \alpha_n\).
  \item If \(x \notin P\), let \(f_1, \dots, f_n\) be power series in \(P\) with constant terms \(\alpha_1, \dots, \alpha_n\). Claim \(f_1, \dots, f_n\) generate \(P\):

    \begin{proof}
      Take \(g \in P\). Then \(g = a + \text{ higher terms}\) when \(a = \sum a_i \alpha_i\). Then \(g - \sum a_i f_i = X g_1\) for some power series \(g_1\). Note that \(xg_1 \in P\). But \(x \notin P\) so \(g_1 \in P\) since \(P\) is prime. Similarly \(g_1 = \sum b_if_i + xg_2\) where \(g_2 \in P\). Continuing gives
      \[
        h_i = a_i + b_i x + c_i x^2 + \dots \in R[[x]]
      \]
      for \(1 \leq i \leq n\) satisfying
      \[
        g = h_1f_1 + \dots + h_n f_n.
      \]
    \end{proof}
  \end{enumerate}
\end{proof}

\begin{eg}
  \(\Z[[X]]/(X - p)\) for some \(p \in \Z\) is Noetherian. This is the ring of \emph{\(p\)-adic integers}.
\end{eg}

\subsection{Localisation}

\begin{definition}[multiplicatively closed subset]\index{multiplicatively closed subset}
  \(S\) is a \emph{multiplicatively closed subset} of \(R\) is
  \begin{enumerate}
  \item \(S\) is closed under multiplication,
  \item \(1 \in S\).
  \end{enumerate}
\end{definition}

Define a relation \(\equiv\) on \(R \times S\) where \((r_1, s_1) \equiv (r_2, s_2)\) if and only if \((r_1s_2 - r_2s_1) x = 0\) for some \(x \in S\). Check this is an equivalence relation. The class of \((r, s)\) is written as \(\frac{r}{s}\). The set of classes \(S^{-1}R\) can be made into a ring via
\begin{align*}
  \frac{r_1}{s_1} + \frac{r_2}{s_2} &= \frac{r_1s_2 + r_2s_1}{s_1s_1} \\
  \frac{r_1}{s_1} \cdot \frac{r_2}{s_2} &= \frac{r_1r_2}{s_1s_2}
\end{align*}

There is a ring homomorphism
\begin{align*}
  \theta: R &\to S^{-1} R \\
  r &\mapsto \frac{r}{1}
\end{align*}
\(S^{-1}R\) has the universal property:

\begin{lemma}
  Let \(\phi: R \to T\) be a ring homomorphism with \(\phi(s)\) a unit in \(T\) for all \(s \in S\). Then there is a unique ring homomorphism \(\alpha: S^{-1}R \to T\) such that \(\phi = \alpha \compose \theta\).
\end{lemma}

\begin{proof}
  For uniqueness, if \(\alpha: S^{-1}R \to T\) with \(\phi = \alpha \compose \theta\) then
  \[
    \alpha(\frac{r}{s}) = \phi(r) \phi(s)^{-1}
  \]
  is uniquely determined. For existence check this is well-defined.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Field of fractions of an integral domain \(R\): take \(S = R \setminus \{0\}\) then \(S^{-1}R\) is the fraction field of \(R\).
  \item \(S^{-1}R\) is the zero ring if and only if \(0 \in S\).
  \item If \(I\) is an ideal of \(R\), we can take
    \[
      S = 1 + I = \{1 + r: r \in I\}.
    \]
  \item \(R_f\) where \(S = \{1, f, f^2, \dots\}\).
  \item If \(P\) is a prime ideal of \(R\) then take \(S = R \setminus P\). Write \(R_P\) for \(S^{-1}P\) in this case. The process of going from \(R\) to \(R_P\) is called \emph{localisation}\index{localisation}. The elements \(\frac{r}{s} \in R_P\) with \(r \in P\) form an ideal \(P_P\) of \(R_P\). This is the unique maximal ideal of \(R_P\): if \(r \notin P\) then \(r \in S\) so \(\frac{r}{s}\) is a unit.
  \end{enumerate}
\end{eg}

\begin{definition}[local ring]\index{local ring}
  A ring is \emph{local} if it has a unique maximal ideal.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Let \(R = \Z, P = (p)\) where \(p\) prime. Then \(R_P = \{\frac{m}{n}: p \ndivides n\} \subseteq \Q\), \(P_P = \{\frac{m}{n}: p \ndivides n, p |m\}\).
  \item Let \(R = k[x_1, \dots, x_n]\) which can be regarded as functions on \(k^n\), \(P = (x_1 - a_1, \dots, x_n - a_n)\). Then \(R_P\) is the subring of the rational functions that are defined at \((a_1, \dots, a_n) \in k^n\). The unique maximal ideals \(P_P\) consists of the rational functions that are zero at \((a_1, \dots a_n)\).
  \end{enumerate}
\end{eg}

Similarly, given an \(R\)-module \(M\), we can define an equivalence relation \(\equiv\) on \(M \times S\) for a multiplicatively closed subset \(S \subseteq R\) where \((m_1, s_1) \equiv (m_2, s_2)\) if and only if \(x(s_1m_2 - s_2m_1) = 0\) for some \(x \in S\). This is an equivalence relation. The set of equivalence classes is denoted \(S^{-1}M\).

\(S^{-1}M\) can be regarded as an \(S^{-1}R\)-module via
\begin{align*}
  \frac{m_1}{s_1} + \frac{m_2}{s_2} &= \frac{s_1m_2 + s_2m_1}{s_1s_2} \\
  \frac{r_1}{s_1} \cdot \frac{m_2}{s_2} &= \frac{r_1m_2}{s_1s_2}
\end{align*}

Write \(M_P\) where \(S = R \setminus P\) for prime ideal \(P\).

If \(\theta: M_1 \to M\) is an \(R\)-module map. Then
\begin{align*}
  S^{-1}\theta: S^{-1}M_1 &\to S^{-1}M \\
  \frac{m_1}{s} &\mapsto \frac{\theta(m_1)}{s}
\end{align*}
is an \(S^{-1}R\)-module map and if \(\phi: M \to M_2\) is an \(R\)-module map then
\[
  S^{-1}(\phi \compose \theta) = S^{-1} \phi \compose S^{-1} \theta.
\]

\begin{definition}[(short) exact sequence]\index{exact sequence}\index{short exact sequence}
  A sequence of \(R\)-modules
  \[
    \begin{tikzcd}
      M_1 \ar[r, "\theta"] & M \ar[r, "\phi"] & M_2
    \end{tikzcd}
  \]
  is \emph{exact} at \(M\) if \(\im \theta = \ker \phi\).

  A \emph{short exact sequence} is a sequence of the form
  \[
    \begin{tikzcd}
      0 \ar[r] & M_1 \ar[r, "\theta"] & M \ar[r, "\phi"] & M_2 \ar[r] & 0
    \end{tikzcd}
  \]
  which is exact at \(M_1, M, M_2\).
\end{definition}

\begin{lemma}[localisation is exact]
  If
  \[
    \begin{tikzcd}
      M_1 \ar[r, "\theta"] & M \ar[r, "\phi"] & M_2
    \end{tikzcd}
  \]
  is exact at \(M\) then
  \[
    \begin{tikzcd}
      S^{-1} M_1 \ar[r, "S^{-1} \theta"] & S^{-1} M \ar[r, "S^{-1} \phi"] & S^{-1} M_2
    \end{tikzcd}
  \]
  is exact at \(S^{-1}M\), so we have an exact functor from the category of \(R\)-modules to the category of \(S^{-1}R\)-modules.
\end{lemma}

\begin{proof}
  Since \(\ker \phi = \im \theta\) we know \(\phi \compose \theta = 0\) so
  \[
    S^{-1} \phi \compose S^{-1} \theta = S^{-1}(0) = 0
  \]
  and hence \(\im S^{-1} \theta \subseteq \ker S^{-1} \phi\).

  Now suppose \(\frac{m}{s} \in \ker S^{-1} \phi\) so \(\frac{\phi(m)}{s} = 0 \in S^{-1}M_2\) and hence there is \(t \in S\) with \(0 = t \phi(m) = \phi(tm)\) in \(M_2\). So \(tm \in \ker \phi = \im \theta\) so \(tm = \theta(m_1)\) for some \(m_1 \in M_1\). Hence in \(S^{-1}M\),
  \[
    \frac{m}{s} = \frac{tm}{ts} = \frac{\theta(m_1)}{ts} = S^{-1} \theta(\frac{m_1}{ts}) \in \im S^{-1} \theta.
  \]
\end{proof}

\begin{corollary}
  Let \(N \leq M\) then
  \[
    S^{-1}(M/N) = S^{-1}M/S^{-1}N.
  \]
\end{corollary}

\begin{proof}
  Apply the exact functor \(S^{-1}\) to the short exact sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & N \ar[r] & M \ar[r] & M/N \ar[r] & 0
    \end{tikzcd}
  \]
  to get
  \[
    \begin{tikzcd}
      0 \ar[r] & S^{-1}N \ar[r] & S^{-1}M \ar[r] & S^{-1}(M/N) \ar[r] & 0
    \end{tikzcd}
  \]
\end{proof}

\begin{remark}
  We can regard \(S^{-1}N\) as a submodule of \(S^{-1}M\).
\end{remark}

Recall that we have a map \(\theta: R \to S^{-1}R\). If \(I\) is an ideal then \(S^{-1}I\) is an ideal of \(S^{-1}R\).

\begin{lemma}\leavevmode
  \begin{enumerate}
  \item Every ideal \(J \subseteq S^{-1}R\) is of the form \(S^{-1}I\) for some ideal \(I\) of \(R\).
  \item There is a bijective correspondence
    \begin{align*}
      \{\text{prime ideals of } S^{-1}R\} &\leftrightarrow \{\text{prime ideals disjoint from } S\} \\
      S^{-1}P &\mapsfrom P \\
      Q &\mapsto \{r \in R: \frac{r}{1} \in Q\}
    \end{align*}
  \end{enumerate}
\end{lemma}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Let \(P\) be a prime ideal, \(S = R \setminus P\). The there is a correspondence between prime ideals of \(R_P\) and prime ideals of \(R\) contained in \(P\). For example if \(R = k[x_1, \dots, x_n]\) and \(P\) is a maximal ideal of the form \((x_1 - a_1, \dots, x_n - a_n)\) for \((a_1, \dots, a_n) \in k^n\) then the prime ideals of \(R_P\) corresponds to prime ideals \(R\) consisting only of elements which are \(0\) at \((a_1, \dots, a_n)\).
  \item Let \(R = \Z/6\Z, P = 2\Z/6\Z, S = \{1, 3, 5\}\) then \((2\Z/6\Z)_P = 0\) since \(2\Z/6\Z \cong \Z/3\Z\) and \(3 \in S\). Thus \(P_P = 0\). The short exact sequence
    \[
      \begin{tikzcd}
        0 \ar[r] & 2\Z/6\Z \ar[r] & \Z/6\Z \ar[r] & \Z/2\Z \ar[r] & 0
      \end{tikzcd}
    \]
    becomes
    \[
      \begin{tikzcd}
        0 \ar[r] & 0 \ar[r] & R_P \ar[r] & (\Z/2\Z)_P \ar[r] & 0
      \end{tikzcd}
    \]
    on localisation. So \(R_P \cong (\Z/2\Z)_P \cong \Z/2\Z\). Note that the bijective correpondence in part 2 of the lemma does not extend to all ideals, as \(0\) and \(P\) are distinct but \(0_P\) and \(P_P\) are both zero.
  \end{enumerate}
\end{eg}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item Let \(J\) be an ideal in \(S^{-1}R\) and \(\frac{r}{s} \in J\). Then \(\frac{r}{1} \in J\). Let \(I = \{r \in R: \frac{r}{1} \in J\}\). Then \(r \in I\) and clearly \(J \subseteq S^{-1}I\). If \(r \in I\) then \(\frac{r}{1} \in J\) and hence \(\frac{r}{s} \in J\) for any \(s \in S\). So \(S^{-1}I \subseteq J\).
  \item Let \(Q\) be a prime ideal of \(S^{-1}(R)\) and let \(P = \{r \in R: \frac{r}{1} \in Q\}\). Claim \(P\) is prime and does not meet \(S\):
    \begin{proof}
      \(Q\) is proper and hence \(P\) is proper. If \(xy \in P\) then \(\frac{xy}{1} \in Q\) and so either \(\frac{x}{1} \in Q\) or \(\frac{y}{1} \in Q\). Hence \(x \in P\) or \(y \in P\).

      If \(s \in P \cap S\) then
      \[
        \frac{s}{1} \cdot \frac{1}{s} = \frac{1}{1} \in Q,
      \]
      contradicting properness of \(Q\).
    \end{proof}

    Conversely, suppose \(P\) is a prime ideal of \(R\) with \(P \cap S = \emptyset\). Let \(\frac{r_1}{s_1}, \frac{r_2}{s_2} \in S^{-1}R\) with \(\frac{r_1r_2}{s_1s_2} \in S^{-1}P\). So \((r_1r_2)s \in P\) for some \(s \in S\). But since \(S \cap P = \emptyset\), \(s \notin P\) so \(r_1r_2 \in P\) and hence either \(r_1 \in P\) or \(r_2 \in P\). Thus \(\frac{r_1}{s_1} \in S^{-1}P\) or \(\frac{r_2}{s_2} \in S^{-1}P\). \(S^{-1}P\) is also proper so it is prime.

    Furthermore \(\frac{r}{1} \in S^{-1}P\) implies \(s_1(rs - p) = 0\) for some \(p \in P, s, s_1 \in S\) and \(rss_1 \in P\). But \(ss_1 \in S\) and hence \(ss_1 \notin P\) so \(r \in P\). Thus we have established the bijection.
  \end{enumerate}
\end{proof}

\begin{lemma}
  If \(R\) is a Noetherian ring then \(S^{-1}R\) is a Noetherian ring.
\end{lemma}

\begin{proof}
  Consider any chain of ideals
  \[
    J_1 \subseteq J_2 \subseteq \cdots
  \]
  of \(S^{-1}R\). Set \(I_k = \{r \in R: \frac{r}{1} \in J_k\}\) so \(J_k = S^{-1}I_k\). So we get
  \[
    I_1 \subseteq I_2 \subseteq \cdots
  \]
  is a chain of ideals in \(R\). \(R\) is Noetherian so \(I_n = I_N\) for all \(n \geq N\) for some \(N\). Thus \(J_n = S^{-1}I_n = S^{-1}I_N = J_N\) for all \(n \geq N\).
\end{proof}

\begin{ex}
  Let \(P\) be a prime ideal and \(S\) a multiplicatively closed subset with \(S \cap P = \emptyset\). Then \(S^{-1}P\) is a prime ideal of \(S^{-1}R\). Show
  \[
    (S^{-1}R)_{S^{-1}P} \cong R_P.
  \]
  In particular if \(Q\) is a prime ideal of \(R\) with \(P \subseteq Q\), then taking \(S = R \setminus Q\), we have
  \[
    (R_Q)_{P_Q} \cong R_P.
  \]

  We'll need this when dealing with chains of prime ideals, in particular when proving Krull's principal ideal theorem and generalisations.
\end{ex}

\paragraph{Local properties}

\begin{definition}[local property]
  A property \(\mathcal P\) of a ring \(R\) (or an \(R\)-module \(M\)) is \emph{local} if \(R\) (or \(M\)) has property \(\mathcal P\) if and only if \(R_P\) (or \(M_P\)) has property \(\mathcal P\) for all prime ideals of \(R\).
\end{definition}

\begin{lemma}
  For an \(R\)-module \(M\), TFAE:
  \begin{enumerate}
  \item \(M = 0\).
  \item \(M_P = 0\) for all prime ideals \(P\) of \(R\).
  \item \(M_Q = 0\) for all maximal ideals \(Q\) of \(R\).
  \end{enumerate}
  Therefore being zero is a local property.
\end{lemma}

\begin{proof}
  \(1 \implies 2 \implies 3\) easily. Suppose \(M \neq 0\). We'll show there exists maximal ideal \(Q\) with \(M_Q \neq 0\). Take \(m \in M\) nonzero. Consider the annihilator
  \[
    \Ann_R(m) = \{r \in R: rm = 0\}
  \]
  which is a proper ideal and we have \(R/\Ann_R(m) \cong Rm \leq M\). Take maximal ideal \(Q\) containing \(\Ann_R(m)\) and we have a surjective map \(\phi: M_1 \cong R/\Ann_R(m) \to R/Q\) so we have a short exact sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & \ker \phi \ar[r] & M_1 \ar[r, "\phi"] & R/Q \ar[r] & 0
    \end{tikzcd}
  \]
  Localise at \(Q\),
  \[
    \begin{tikzcd}
      0 \ar[r] & (\ker \phi)_Q \ar[r] & M_{1Q} \ar[r] & (R/Q)_Q \ar[r] & 0
    \end{tikzcd}
  \]
  is exact. But \((R/Q)_Q \cong R_Q/Q_Q \neq 0\) and we deduce \(M_{1Q} \neq 0\). However we observed we could regard \(M_{1Q}\) as a submodule of \(M_Q\) and so \(M_Q \neq 0\) for this choice of maximal ideal \(Q\).
\end{proof}

Example sheet 1 question 7 uses this to prove that

\begin{proposition}
    Let \(\phi: M \to N\) be an \(R\)-module map. Then TFAE
    \begin{enumerate}
    \item \(\phi\) is injective.
    \item \(\phi_P: M_P \to N_P\) is injective for all prime ideals \(P\) of \(R\).
    \item \(\phi_Q: M_Q \to N_Q\) is injective for all maximal ideals \(Q\) of \(R\).
    \end{enumerate}
\end{proposition}
Similarly for surjectivity.

\subsection{Tensor products}

The whole point is to study multilinear maps via a consideration of linear maps.

\begin{definition}[bilinear map]\index{bilinear map}
  Let \(L, M, N\) be \(R\)-modules. \(\phi: M \times N \to L\) is \emph{\(R\)-bilinear} if
  \begin{enumerate}
  \item \(\phi(r_1m_1 + r_2m_2, n) = r_1 \phi(m, n) + r_2 \phi(m, n)\).
  \item \(\phi(m, r_1n_1 + r_2n_2) = r_1 \phi(m, n_1) + r_2 \phi(m, n_2)\).
  \end{enumerate}
\end{definition}

If \(\phi: M \times N \to T\) is \(R\)-bilinear and \(\theta: T \to L\) is \(R\)-linear then \(\theta \compose \phi\) is \(R\)-bilinear and we get
\[
  \phi^*: \Hom_R(T, L) \to \text{Bilin}_R(M \times N, L).
\]
\(\phi\) is \emph{universal} if \(\phi^*\) is a one-to-one correspondence.

\begin{lemma}\leavevmode
  \begin{enumerate}
  \item Given \(M, N\) there is an \(R\)-module \(T\) and a universal map \(\phi: M \times N \to T\).
  \item Given two such \(\phi_1: M \times N \to T_1, \phi_2: M \times N \to T_2\), there is a unique isomorphism \(\beta: T_1 \to T_2\) with \(\beta \compose \phi_1 = \phi_2\).
  \end{enumerate}
\end{lemma}

\begin{definition}[tensor product]\index{tensor product}
  \(T\) is the \emph{tensor product} over \(R\) of \(M\) and \(N\), written \(M \otimes N\).
\end{definition}

\begin{proof}
  Let \(F\) be the free \(R\)-module on generators \(e_{(m, n)}\) labelled by pairs \((m, n) \in M \times N\). Let \(X\) be the \(R\)-submodule of \(F\) generated by all elements of the form
  \begin{align*}
    & e_{(r_1m_1 + r_2m_2, n)} - r_1 e_{(m_1, n)} - r_2 e_{(m_2, n)} \\
    & e_{(m, r_1n_1 + r_2n_2)} - r_1 e_{(m, n_1)} - r_2 e_{(m, n_2)}
  \end{align*}
  Set \(T = F/X\) and write \(m \otimes n\) for the image of the element \(e_{(m, n)}\). Set
  \begin{align*}
    \phi: M \times N &\to T \\
    (m, n) &\mapsto m \otimes n
  \end{align*}
  Note \(T\) is generated as an \(R\)-module by \(m \otimes n\) and \(\phi\) is bilinear. Any map \(\alpha: M \times N \to L\) extends to an \(R\)-module map
  \begin{align*}
    \overline \alpha: F &\to L \\
    e_{(m, n)} &\mapsto \alpha(m, n)
  \end{align*}
  If \(\alpha\) is bilinear then \(\overline \alpha\) is zero on \(X\) and so \(\overline \alpha\) induces a map \(\alpha': T \to L\). \(\alpha'\) is uniquely defined by this.

  Unqiueness follows from universality.
\end{proof}

Warning: not all elements of \(M \otimes N\) are of the form \(m \otimes n\). In general, an element of \(M \otimes N\) is of the form \(\sum_{i = 1}^s m_i \otimes n_i\).

Usually if \(R\) is unambiguous one writes \(M \otimes N\). If not then write \(M \otimes_R N\).

\begin{eg}
  If \(R = k\) a field and \(M, N\) are vector spaces of dimension \(m\) and \(n\) then \(M \otimes_k N\) is a vector space of dimension \(mn\).
\end{eg}

\begin{remark}
  One may also define tensor products over non-commutative rings but in this case \(M\) needs to be a right \(R\)-module and \(N\) a left \(R\)-module in order to define \(M \otimes_R N\). \(M \otimes_R N\) is an additive group but there may not be any \(R\)-module structure. For the construction one takes a free \(\Z\)-module on \(e_{(m, n)}\) and \(X\) is generated by
  \begin{align*}
    & e_{(m_1 + m_2, n)} - e_{(m_1, n)} - e_{(m_2, n)} \\
    & e_{(m, n_1 + n_2)} - e_{(m, n_1)} - e_{(m, n_2)} \\
    & e_{(mr, n)} - e_{(m, rn)}
  \end{align*}
  If \(M\) is an \((R, S)\)-bimodule (i.e.\ it is a left \(R\)-module and a right \(S\)-module and the two actions commute) and \(N\) is an \((S, T)\)-bimodule for rings \(R, S, T\) not necessarily commutative, then \(M \otimes_S N\) is an \((R, T)\)-bimodule.
\end{remark}

\begin{lemma}
  There exist unqiue \(R\)-module isomorphisms
  \begin{enumerate}
  \item
    \begin{align*}
      M \otimes N &\to N \otimes M \\
      m \otimes n &\mapsto n \otimes m
    \end{align*}
  \item
    \begin{align*}
      (M \otimes N) \otimes L &\to M \otimes (N \otimes L) \\
      (m \otimes n) \otimes \ell &\mapsto m \otimes (n \otimes \ell)
    \end{align*}
  \item
    \begin{align*}
      (M \oplus N) \otimes L &\to (M \otimes L) \oplus (N \otimes L) \\
      (m + n) \otimes L &\mapsto m \otimes \ell + n \otimes \ell
    \end{align*}
  \item
    \begin{align*}
      R \otimes M &\to M \\
      r \otimes m &\mapsto rm
    \end{align*}
  \end{enumerate}
\end{lemma}

\begin{proof}
  Exercises.
\end{proof}

\paragraph{Restriction of scalars}

If \(\phi: R \to T\) is a ring homomorphism and \(N\) is a \(T\)-module, we can regard it as an \(R\)-module via
\[
  r n = \phi(r)n
\]
for \(r \in R, n \in N\). In particular \(T\) itself can be regarded as an \(R\)-module.

\paragraph{Extension of scalars}

Given an \(R\)-module \(M\), we can form \(T \otimes_R M\) which can be regarded as a \(T\)-module via
\[
  t_1(t_2 \otimes m) = (t_1t_2) \otimes m.
\]

\begin{eg}
  Localisation is an example of extension of scalars. Given an \(R\)-module \(M\) and multiplicatively closed subset \(S\) of \(R\), there is a unique isomorphism \(f: S^{-1}R \otimes_R M \to S^{-1}M\) since there is a bilinear map \(S^{-1}R \times M \to S^{-1}M, (\frac{r}{s}, m) \mapsto \frac{rm}{s}\) and universality yields the map \(f\). Check this is an isomorphism.
\end{eg}

\paragraph{Tensor products of maps}

Given \(R\)-module maps \(\theta: M_1 \to M_2, \phi: N_1 \to N_2\), then we can define an \(R\)-module
\begin{align*}
  \theta \otimes \phi: M_1 \otimes N_1 &\to M_2 \otimes N_2 \\
  m_1 \otimes n_1 &\mapsto \theta(m_1) \otimes \phi(n_1)
\end{align*}
This is induced by the bilinear map
\begin{align*}
  M_1 \times N_1 &\to M_2 \otimes N_2 \\
  (m_1, n_1) &\mapsto \theta(m_1) \otimes \phi(n_1)
\end{align*}

Given a short exact sequence
\[
  \begin{tikzcd}
    0 \ar[r] & M_1 \ar[r, "\theta"] & M \ar[r, "\phi"] & M_2 \ar[r] & 0
  \end{tikzcd}
\]
by tensoring with \(N\) we can form a sequence
\[
  \begin{tikzcd}
    0 \ar[r] & N \otimes M_1 \ar[r, "\id \otimes \theta"] & N \otimes M \ar[r, "\id \otimes \phi"] & N \otimes M_2 \ar[r] & 0
  \end{tikzcd}
\]
where \(\id: N \to N\) is the identity.

We saw that when \(N = S^{-1}R\) then localisation is exact so we have a short exact sequence. However, in general it is not exact.

\begin{eg}
  Let \(R = \Z\) and a short exact sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & \Z \ar[r, "2"] & \Z \ar[r] & \Z/2\Z \ar[r] & 0
    \end{tikzcd}
  \]
  set \(N = \Z/2\Z\), we observe that
  \[
    N \otimes_\Z \Z \cong \Z/2\Z, N \otimes_\Z \Z/2\Z \cong \Z/2\Z
  \]
  so we have a sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & \Z/2\Z \ar[r, "\id \otimes 2"] & \Z/2\Z \ar[r] & \Z/2\Z \ar[r] & 0
    \end{tikzcd}
  \]
  with \(\id \otimes 2 = 0\) so we do not have exactness on the left hand side. So \(N \otimes_\Z -\) does not preserve exactness. However, it is indeed right exact. This is the starting point of homology theory.
\end{eg}

\begin{definition}[flat module]\index{flat module}
  \(N\) is a \emph{flat} \(R\)-module if \(N \otimes_R -\) preserves exactness of all short exact sequence.
\end{definition}

\begin{eg}
  \(S^{-1}R\) is a flat \(R\)-module for all multiplicatively closed subsets \(S\) of \(R\). In particular \(R\) itself is a flat \(R\)-module. Moreoever \(R^n\) is flat.
\end{eg}

\begin{definition}[algebra]\index{algebra}
  Given \(\phi: R \to T\) a ring homomorphism, we say \(T\) is an \emph{\(R\)-algebra}.
\end{definition}

\begin{definition}[tensor product of algebras]\index{algebra!tensor product}\index{tensor product!of algebras}
  Given \(R\)-algebras \(\phi_i: R \to T_i\) for \(i = 1, 2\), we can define the \emph{tensor product over \(R\)} by endowing \(T_1 \otimes_R T_2\) with a product
  \[
    (t_1 \otimes t_2) (t_1' \otimes t_2') = t_1t_1' \otimes t_2t_2'
  \]
  and
  \begin{align*}
    R &\to T_1 \otimes_R T_2 \\
    r &\mapsto \phi_1(r) \otimes 1 = 1 \otimes \phi_2(r) = r(1 \otimes 1)
  \end{align*}
  This is well-defined and \(1 \otimes 1\) is the multiplicative identity.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Let \(R = k\) be a field. Then \(k[x_1] \otimes_k k[x_2] \cong k[x_1, x_2]\).
  \item \(\Q[x]/(x^2 + 1) \otimes_\Q \C \cong \C[x]/(x^2 + 1)\).
  \item \(k[x_1]/(f(x_1)) \otimes_k k[x_2]/(g(x_2)) \cong k[x_1, x_2]/(f(x_1), g(x_2))\).
  \end{enumerate}
\end{eg}

\section{Ideal structure}

Throughout this chapter \(R\) is commutative with a \(1\).

\begin{lemma}
  The set of nilpotent elements of a commutative ring \(R\) form an ideal \(\mathcal N(R)\) and \(R/\nilrad R\) has no nilpotent elements.
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

\begin{definition}[nilradical]\index{nilradical}
  The ideal \(\nilrad R\) is the \emph{nilradical} of \(R\).
\end{definition}

\begin{lemma}[Krull]
  \(\nilrad R\) is the intersection of all the prime ideals of \(R\).
\end{lemma}

\begin{proof}
  Let \(I = \bigcap_{P \text{ prime}} P\). If \(x \in R\) is nilpotent then \(x^m = 0 \in P\) for some \(m\). \(P\) prime implies that \(x \in P\) so \(x \in I\). If \(x\) is not nilpotent then consider \(S = \{1, x, x^2, \dots\}\) which does not contain \(0\). Localise to get \(S^{-1}R = R_x\) which is not zero. Take a maximal ideal of \(R_x\). By prime ideal correspondence this maximal ideal of \(R_x\) corresponds to a prime ideal \(P\) with \(P \cap S = \emptyset\). In particular \(x \notin P\) so \(x \notin I\). Thus \(I = \nilrad R\).
\end{proof}

\begin{definition}[radical]\index{radical}
  For an ideal \(I\) of \(R\) its \emph{radical} is
  \[
    \sqrt I = \{x: x^m \in I \text{ for some } m\}.
  \]
\end{definition}
Note that \(\sqrt I /I = \nilrad R/I\).

\begin{definition}[Jacobson radical]\index{Jacobson radical}
  The \emph{Jacobson radical} of \(R\) is the intersection of all the maximal ideals of \(R\), written \(\jac R\).
\end{definition}
Thus
\[
  \nilrad R = \bigcap_{\text{prime}} P \subseteq \bigcap_{\text{maximal}} P = \jac R.
\]
In general we don't have equality. For example if \(R\) is a local ring with unique maximal ideal \(P\) then \(\jac R = P\). But if \(R = \Z_{(p)} \subseteq \Q\) which is an integral domain then it does not have nonzero nilpotent elements so \(\nilrad R = (0)\).


















\iffalse
\section{Hochschild homology}

\begin{eg}
  Examples of bimodules:
  \begin{enumerate}
  \item \(R\) itself is an \(R\)-\(R\) bimodule.
  \item \(R \otimes_k R\) is a bimodule, as so is \(R \otimes_k R \otimes_k \dots \otimes_k R\) \(n\)-times.
  \item There is a bimodule free presentation of \(R\)
    \[
      0 \to \ker \mu \to R \otimes R \xrightarrow{\mu} R \to 0
    \]
    where \(\mu\) is the multiplication \(r \otimes s \to rs\). \(R \otimes_k R^{\text{op}}\) is a free module --- as a \(R \otimes R\) module it is free of rank \(1\) gnerated by \(1 \otimes 1\).
  \end{enumerate}
\end{eg}

\begin{definition}[Hochschild (co)homology]\index{Hochschild homology}\index{Hochschild cohomology}
  Given an \(R\)-\(R\) bimodule \(M\), define \emph{Hochschild homology}
  \[
    HH_n(R, M) = \Tor_M^{R, R} (R, M)
  \]
  and \emph{Hochschild cohomology}
  \[
    HH^n(R, M) = \Ext_{R, R}^M(R, M).
  \]
\end{definition}

In particular
\begin{align*}
  HH^0(R, M) &= \Hom_{R, R} (R, M) = \{m \in M: rm = mr \text{ for all } r \in R\} \\
  HH^0(R, R) &= \{s \in R: rs = sr \text{ for all } r \in R\} = Z(R) \\
  HH_0(R, M) &= R \otimes_{\R \otimes \R^{\text{op}}} M \cong M / \langle rm - mr: m \in M, r \in R \rangle \\
  HH_0(R, R) &= R/[R, R]
\end{align*}
where \([r, s] = rs - sr\) is the \emph{Lie bracket} on \(R\) of example sheet 3 Q4 (correction of example sheet: need \(R\) semisimple).

\begin{definition}
  The Hochschild chain complex gives a free resolution for the bimodule \(R\)
  \[
    \begin{tikzcd}
      \cdots \ar[r] & R \otimes R \otimes R \otimes R \ar[r, "d_1"] & R \otimes R \otimes R \ar[r, "d_0"] & R \otimes R \ar[r, "\mu"] & R \ar[r] & 0
    \end{tikzcd}
  \]
  where
  \begin{align*}
    d_{n - 1}: R^{\otimes n + 2} & R^{\otimes n + 1} \\
    r_0 \otimes \dots \otimes r_{n + 1} &\mapsto \sum_{i = 0}^n (-1)^i r_0 \otimes \dots \otimes (r_ir_{i + 1}) \otimes \dots \otimes r_{n + 1}
  \end{align*}
\end{definition}

\begin{definition}[Hochschild cohomological dimension]\index{Hochschild cohomology!dimension}
  The (Hochschild cohomological) \emph{dimension} \(\dim R\) of \(R\) is
  \[
    \dim R = \sup \{n: HH^n(R, M) \neq 0 \text{ for some bimodule } M\}.
  \]
\end{definition}

\begin{definition}[separable]\index{separable}
  The \(k\)-algebras \(R\) of \(\dim R = 0\) are precisely  those where the bimodule \(R\) is projective. This is when \(R\) is a direct summand of \(R \otimes R\) --- there is a map \(\beta: R \to R \otimes R\) so that \(\mu \compose \beta = \id_R\). These algebras are called \emph{\(k\)-separable}.
\end{definition}

This generalises the notion of a separable field extension, but note that \(k\)-separable algebras must be finite-dimensional as \(k\)-vector spaces. See example sheet.

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(M_n(k)\), the matrix algebra over \(k\), is \(k\)-separable. Given the map \(\nu: R \to R \otimes R\), the image of \(1\) is called a separating idempotent. For \(M_n(k)\) a separating idempotent is obtained as follow: let \(E_{ij}\) be the elementary matrix which has \(1\) at \(ij\)th entry and \(0\) otherwise. Fix \(j\) and consider \(\sum_i E_{ij} \otimes E_{ji}\). This is a separating idempotent. Note that the image of the under \(\mu\) is the identity matrix.
  \item For \(G\) a finite group, \(\C G\) is \(\C\)-separable:
    \[
      \C G \otimes \C G^{\text{op}}
      \cong \C G \otimes \C G
      \cong \C( G \times G)
    \]
    which is semisimple and completely reducible. so all submodules are direct summands. In particular we get \(\C G\) is a direct summand of \(\C(G \times G)\). Thus \(\dim (\C G) = 0\).
  \item Now consider higher dimensions. Note that
    \[
      \Hom_{R \otimes R} (R - R, M) \cong \Hom_k (k, M).
    \]
    On LHS a map is determined by the image of \(1 \otimes 1\), and on RHS it is determined by \(1\). Moreover
    \[
      \Hom_{R \otimes R} (\underbrace{R \otimes \dots \otimes R}_{n + 2}, M) \cong \Hom_K  (\underbrace{R \otimes \dots \otimes R}_n, M).
    \]
  \end{enumerate}
\end{eg}

\begin{definition}
  The \emph{Hochschild cochain complex} is
  \[
    \begin{tikzcd}
      M \cong \Hom_k(k, M) \ar[r, "\delta_0"] & \Hom_k(R, M) \ar[r, "\delta_1"] & \Hom(R \otimes R, M) \ar[r] & \cdots
    \end{tikzcd}
  \]
  where
  \begin{align*}
    (\delta_0 f)(r) &= rf(1) - f(1) r, \quad f \in \Hom_k(k, M) \\
    (\delta_1 f)(r_1 \otimes r_2) &= r_1 f(r_2) - f(r_1r_2) + f(r_1)r_2, \quad f \in \Hom_k(R, M) \\
    (\delta_2 f)(r_1 \otimes r_2 \otimes r_3) &= r_1 f(r_2 \otimes r_3) - f(r_1r_2 \otimes r_3) + f(r_1 \otimes r_2r_3) - f(r_1 \otimes r_3) r_3 \\
  \end{align*}
  and so on.
\end{definition}

\begin{definition}[derivation, inner derivation]\index{derivation}\index{inner derivation}
  \[
    \ker \delta_1 = \{f \in \Hom_k(R, M): f(r_1r_2) = r_1f(r_2) + f(r_1)r_2\}
  \]
  is called the \emph{derivations} from \(R\) to \(M\) and is denoted \(\Der(R, M)\). On the other hand
  \[
    \im \delta_0 = \{f \in \Hom_k(R, M) \text{ of the form } r \mapsto rm - mr \text{ for some } m \in M\}
  \]
  is called the \emph{inner derivations} and is denoted \(\Innder(R, M)\).
\end{definition}

Thus
\[
  HH^1(R, M) = \frac{\Der(R, M)}{\Innder(R, M)}.
\]
If \(M = R\) we get
\[
  HH^1(R, R) = \frac{\Der(R)}{\Innder(R)}.
\]
If \(R\) is commutative then \(\Innder R = 0\) and so \(HH^1(R, R) = \Der R\).

In general, \(\Der R\) fomrs a Lie algebra: if \(D_1, D_2\) are derivations \(R \to R\) then \(D_1D_2 - D_2D_1 \in \End_k R\) is also a derivation.

\begin{eg}
  \(R = k[x]\) with \(\ch k = 0\). Then
  \[
    \Der R = \{p(x) \frac{d}{dx}: p(x) \in k[x]\}.
  \]
\end{eg}

For a commutative \(k\)-algebra \(R\), we define the differential operators interatively:
\begin{align*}
  \mathcal D^0(R) &= \{D \in \End_k(R): [r, D] = 0 \text{ for all } r \in R\} \\
  \mathcal D^{i + 1} (R) &= \{D \in \End_k(R): [r, D] \in \mathcal D^i \text{ for all } r \in R\} \\
\end{align*}
and define
\[
  \mathcal D(R) = \bigcup_i \mathcal D^i(R).
\]
In geometry we have \(D\)-modules, which are modules over differential operators.

\begin{eg}
  Let \(R = k[x]\). Then
  \[
    \mathcal D(R) = k[x, \frac{d}{dx}] \subseteq \End_k(R).
  \]

  If \(R = k[x_1, \dots, x_n]\) then
  \[
    \mathcal D(R) = k[x_1, \frac{\partial  }{\partial x_1}, \dots, x_n, \frac{\partial  }{\partial x_n}]
  \]
  by a messy induction.
\end{eg}

\begin{definition}[semidirect product]\index{semidirect product}
  Given an \(R\)-\(R\)-bimodule \(M\), we can form a \emph{semidirect product} \(R \ltimes M\) as follow: the underlying set is \(R \times M\), addition is pairwise addition, multiplication is
  \[
    (r_1, m_1) \cdot (r_2, m_2) = (r_1r_2, r_1m_2 + m_1r_2).
  \]
\end{definition}

Or you can think of this as \(R + M\varepsilon\) where \(\varepsilon^2 = 0\) and \(\varepsilon\) commutes with everything. The ideal \(M\varepsilon\) in \(R + M\varepsilon\) has \((M\varepsilon)^2 = 0\).

\begin{lemma}
  \[
    \Der(R, M) \cong \{\text{algebra complements to \(M\) in } R \ltimes M\}.
  \]
\end{lemma}

\begin{proof}
  A complement to \(M\) is an embedded copy of \(R\) in \(R \ltimes M\) with some embedding
  \begin{align*}
    R &\embed R \ltimes M \\
    r &\mapsto (r, D(r))
  \end{align*}
  This \(D: R \to M\) is a derivation.

  COnversely a derivation \(D: R \to M\) gives an emedding of \(R\) in \(R \ltimes M\).
\end{proof}

Inner derivations in this context?

\begin{corollary}
  \(\Der(R, M)\) is the set of automorphisms of \(R \ltimes M\) sending \(r \mapsto (r, D(r)), m \mapsto m\).

  If we identify \(R \ltimes M\) with \(R + M\varepsilon\) via \(r \mapsto r + D(r)\varepsilon, m\varepsilon \mapsto m\varepsilon\), then \(\Innder(R, M)\) is the set of automorphisms of \(R + M\varepsilon\) of form obtained by conjugation by \(1 + m\varepsilon\).
\end{corollary}

\section{Graded rings and filtrations}

\begin{definition}[graded ring, homogeneous component, graded ideal, graded module]\index{graded ring}\index{homogeneous component}\index{graded ideal}\index{graded module}
  A \emph{(\(\Z\)-)graded ring} \(R\) is a ring that can be decomposed as a direct sum of its additive subgroups
  \[
    R = \bigoplus_{i \in \Z} R_i
  \]
  where \(R_i\) is called the \emph{\(i\)th homogeneous component}, satisfying \(R_iR_j \subseteq R_{i + j}\).

  A \emph{graded ideal} \(I \subseteq R\)  is of the form \(\bigoplus_{i \in \Z} I_i\) with \(I_i \subseteq R_i\).

  A \emph{grade \(R\)-module} \(V\) is one of the form
  \[
    V = \bigoplus_{j \in \Z} V_j
  \]
  such that \(R_iV_j \subseteq V_{i + j}\).

  Similarly we can have gradings with respect to different index sets, e.g.\ positively graded rings with indexing set \(\N = \{0, 1, \dots \}\).
\end{definition}

Then \(R_0\) is a subring of \(R\) and each \(R_i\) is a \(R_0\)-module.

\begin{note}
  If a graded ideal has a finite gnerating set then it has a finite generating set of homogeneous elements.
\end{note}

Suppose \(R = \bigoplus_{i \geq 0} R_i\) is a commutative Notherian rings generated by \(R_0\) and generators \(x_1, \dots, x_m\) of degree \(k_1, \dots, k_m \geq 1\). In particular \(R_0\) is Notherian. Let \(\lambda\) be an additive integer valued function on finitely generated \(R_0\)-modules, i.e.\ if we have a short exact sequence
\[
  \begin{tikzcd}
    0 \ar[r] & U_1 \ar[r] & U \ar[r] & U_2 \ar[r] & 0
  \end{tikzcd}
\]
then \(\lambda(U) = \lambda(U_1) + \lambda(U_2)\).

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(R_0 = k\), can take \(\lambda\) to be \(k\)-vector space dimension.
  \item \(R_0\) is local Artinian with unique maximal ideal \(\mathfrak p\) then within any finitely generately \(R_0\)-module \(U\) we have a chian
    \[
      U \geq U_0 \geq U_1 \geq U_2 \geq \dots \geq U_m = 0
    \]
    with each \(U_i/U_{i + 1} \cong R/\mathfrak p\). Set \(\lambda(U)\) to be number of factors. This is the \emph{composition length} of \(U\). It is well-defined.
  \end{enumerate}
\end{eg}

\begin{definition}[PoincarÃ© series]\index{PoincarÃ© series}
  The \emph{PoincarÃ© series} of a graded finitely generated \(R\)-module \(V = \bigoplus_{i \geq 0} V_i\), is the power series
  \[
    P(V, t) = \sum_{i \geq 0} \lambda(V_i) t^i \in \Z[[t]].
  \]
\end{definition}

\begin{theorem}[Hilbert-Serre]\index{Hilbert-Serre theorem}
  \label{thm:Hilbert-Serre}
  \(P(V, t)\) is a rational function
  \[
    \frac{f(t)}{\prod_{j =1}^m (1 - t^{k_j})}
  \]
  where \(f(t) \in \Z[t]\) is a polynomial and \(k_j\) is the degree of generator \(x_j\).
\end{theorem}

\begin{corollary}
  If each \(k_j = 1\) then for large enough \(i\)
  \[
    \lambda(V_i) = \phi(i)
  \]
  for some rational polynomial \(\phi(t) \in \Q[t]\) of degree \(d - 1\) where \(d\) is the order of pole at \(t = 1\). Moreover
  \[
    \sum_{j = 0}^i \lambda(V_j) = \chi(i)
  \]
  where \(\chi(t) \in \Q[t]\) is of degree \(d\).
\end{corollary}

\begin{definition}[Hilbert polynomial, Samuel polynomial]\index{Hilbert polynomial}\index{Samuel polynomial}
  \(\phi(t)\) is the \emph{Hilbert plynomial} and \(\chi(t)\) is the \emph{Samuel polynomial}.
\end{definition}

Note that the degree of \(\chi\) gives us another dimension.

\begin{proof}[Proof of \nameref{thm:Hilbert-Serre}]
  Induction on \(m\), the number of generators. If \(m = 0\) then \(R = R_0\) and \(V\) is a finite generated \(R_0\)-module so \(V_j = 0\) for large enough \(j\) so in fact \(P(V, t)\) is a polynomial.

  For \(m > 0\), multiplication by \(x_m\) gives \(R_0\)-module homomorphisms \(x_m: V_i \to V_{i + k_m}\). Let \(K_i\) and \(L_{i + k_m}\) be the kernel and cokernel of the map and let \(K = \bigoplus K_i, L = \bigoplus L_i\). \(K\) is a graded submodule of \(V = \bigoplus V_i\) and so is a finitely generated \(R\)-module and \(L = V/x_mV\) is also a finitely generated \(R\)-module. Observe that \(x_m\) acts trivially on both and so \(K\) and \(L\) may be regarded as \(R_0[x_1, \dots, x_{m - 1}]\)-module.
\end{proof}

*Missed lecture on 24/11/18 (filtered ring)

Last task is to use our knowledge of commutative graded rings to give information about filtered rings where associated graded is commutative. and Noetherian.

For a (not necessarily commutative) ring \(R\) with a maximal ideal \(\mathfrak p\) with \(R/\mathfrak p\) a field \(K\), form \(\gr R\) associated to the \(\mathfrak p\)-adic filtration. Recall that the \(\mathfrak p\)-filtration is a negative one, and so \(\gr R\) is a negatively graded ring. However we observed that we renumber a negatively graded ring to be positively graded. Assume that \(\gr R\) is commutative and now positively graded. Apply Hilbert-Serre with \(\lambda\) the \(K\)-vector space dimension. Take a finitely generated \(R\)-module \(M\) and form \(\gr M\) and renumber so it is also positively graded. Now by Hilbert-Serre
\[
  \dim_K(M \mathfrak p^i/M \mathfrak p^{i + 1}) = \phi(i)
\]
for \(i\) large enough for some rational polynomial \(\phi(t) \in \Q[t]\).

We also know that
\[
  \sum_{j = 0}^i \dim_K (M \mathfrak p^j/M \mathfrak p^{j + 1}) = \chi(i)
\]
for some rational polynomial \(\chi(t)\) and for \(i\) large enough. However LHS is precisely the composition length of \(M /M \mathfrak p^{i + 1}\), given by a rational polynomial \(\chi(t)\) of degree \(d\). This gives yet another dimension.

\begin{definition}
  \(d(M) = d\).
\end{definition}

In particular this gives \(d(R)\). Note that this dimension depends on the choice of the maximal ideal \(\mathfrak p\).

\begin{remark}\leavevmode
  \begin{enumerate}
  \item For a commutative Noetherian local ring that is an integral domain, \(d(R) = \dim R\). In example sheet 4 we show this holds for any regular local ring.
  \item For a finitely generated \(k\)-algebra \(R\) which is an integral domain we saw on example sheet that all maximal ideals have the same height, namely the dimension \(R\). So \(\dim R = \dim R_{\mathfrak p} = d(R)\) for any maximal ideal \(\mathfrak p\) and any \(\mathfrak p\)-adic filtration.
  \end{enumerate}
\end{remark}

\begin{theorem}[Hilbert's Syzygy theorem]\index{Hilbert's Syzygy theorem}
  Let \(k\) be a field and \(R = k[x_1, \dots, x_n]\) considered as a graded ring with respect to total degree. Let \(M\) be a finitely generated grade \(R\)-module. Then there is a free resolution of \(M\) of length \(\leq n\).
\end{theorem}

\begin{proof}
  First we recall that the Koszul complex gives a free resolution of the trivial module \(k\) of length \(n\). We're going to view \(\Tor_M(k, M)\) in two different way. We can either apply \(- \otimes M\) to the Koszul complex (free resolution of \(k\)), or apply \(k \otimes -\) to a free resolution of \(M\), and we know that the homology groups arising from these two approaches are the same.

  We can take a free resolution of \(M\)
  \[
    \begin{tikzcd}
      \cdots \ar[r] & F_n \ar[r] & F_{n - 1} \ar[r] & \cdots \ar[r] & F_1 \ar[r] & F_0 \ar[r] & M \ar[r] & 0
    \end{tikzcd}
  \]
  with each \(F_i\) of finite rank. Moreover we may assume it is minimal in the sense that the rank can't be less. For example \(\operatorname{rk}(F_0)\) equals tot he minimal number of generators of \(M\). This is called the \emph{minimal free resolution}\index{minimal free resolution} for \(M\). The crucial point is that if we consider
  \[
    \begin{tikzcd}
      0 \ar[r] & K \ar[r] & F_0 \ar[r] & M \ar[r] & 0
    \end{tikzcd}
  \]
  where \(K\) is the first syzygy module, then when we apply \(k \otimes -\) we get
  \[
    \begin{tikzcd}
      0 \ar[r] & k \otimes K \ar[r] & k \otimes F_0 \ar[r] & k \otimes M \ar[r] & 0
    \end{tikzcd}
  \]
  and minimality implies that \(k \otimes K \to k \otimes F_0\) is the zero map. Hence apply \(k \otimes -\) to our minimal resolution,
  \[
    \begin{tikzcd}
      \cdots \ar[r] & k \otimes F_n \ar[r] & k \otimes F_{n - 1} \ar[r] & \cdots \ar[r] & k \otimes F_0 \ar[r] & k \otimes M
    \end{tikzcd}
  \]
  and all these maps, apart from the last one, are zero. So it is eqsy to read off that the homology groups are \(k \otimes F_i\) which is a \(k\)-vector space of dimension equal to rank of \(F_i\).

  However applying \(- \otimes M\) to the Koszul complex we learn that \(\Tor^i(k, M) = 0\) for \(i \geq n + 1\), we deduce that in our minimal resolution \(F_i\) is of rank \(0\) for \(i \geq n + 1\). In other words, \(F_0 = 0\) for \(i \geq n + 1\). Thus our minimal resolution is of length \(\leq n\).
\end{proof}

\fi


\printindex
\end{document}

% Book:
% A & M -- all about commutative rings and no homology
% Kaplanasky -- preferred over Sharp
% Sharp
% Zariski & Samuel -- encyclopedia
% Reid
% Matsumura -- goes beyond this course and not suitable for first course
% Bourbaki
% C. Weibel: An introduction to homological algebra
